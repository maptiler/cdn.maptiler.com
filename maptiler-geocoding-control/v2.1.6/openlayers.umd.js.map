{"version":3,"file":"openlayers.umd.js","sources":["../node_modules/svelte/src/runtime/internal/utils.js","../node_modules/svelte/src/runtime/internal/dom.js","../node_modules/svelte/src/runtime/internal/lifecycle.js","../node_modules/svelte/src/runtime/internal/scheduler.js","../node_modules/svelte/src/runtime/internal/transitions.js","../node_modules/svelte/src/runtime/internal/each.js","../node_modules/svelte/src/runtime/internal/Component.js","../node_modules/svelte/src/shared/version.js","../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../src/ClearIcon.svelte","../src/FailIcon.svelte","../src/FeatureItem.svelte","../src/LoadingIcon.svelte","../src/ReverseGeocodingIcon.svelte","../src/SearchIcon.svelte","../src/geoUtils.ts","../src/proximity.ts","../node_modules/geo-coordinates-parser/dist/mjs/regex.js","../node_modules/geo-coordinates-parser/dist/mjs/toCoordinateFormat.js","../node_modules/geo-coordinates-parser/dist/mjs/converter.js","../node_modules/geo-coordinates-parser/dist/mjs/tests/testformats.js","../node_modules/geo-coordinates-parser/dist/mjs/merge.js","../src/GeocodingControl.svelte","../node_modules/@turf/helpers/dist/esm/index.js","../node_modules/@turf/meta/dist/esm/index.js","../node_modules/@turf/bbox/dist/esm/index.js","../node_modules/bignumber.js/bignumber.mjs","../node_modules/splaytree-ts/dist/esm/index.js","../node_modules/polyclip-ts/dist/esm/index.js","../node_modules/@turf/difference/dist/esm/index.js","../node_modules/@turf/flatten/dist/esm/index.js","../node_modules/@turf/union/dist/esm/index.js","../src/mask.ts","../src/openlayers-controller.ts","../src/openlayers.ts"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.19';\nexport const PUBLIC_VERSION = '4';\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","<svg viewBox=\"0 0 14 14\" width=\"13\" height=\"13\">\n  <path\n    d=\"M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z\"\n  />\n</svg>\n\n<style>\n  svg {\n    display: block;\n    fill: var(--color-icon-button);\n  }\n</style>\n","<svg viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path\n    d=\"M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z\"\n  />\n</svg>\n\n<style>\n  svg {\n    display: block;\n    fill: #e15042;\n  }\n</style>\n","<script context=\"module\" lang=\"ts\">\n  type SpriteIcon = { width: number; height: number; x: number; y: number };\n\n  const hidpi =\n    typeof devicePixelRatio === \"undefined\" ? 1 : devicePixelRatio > 1.25;\n\n  const scaleUrl = hidpi ? \"@2x\" : \"\";\n\n  const scaleFactor = hidpi ? 2 : 1;\n\n  let sprites:\n    | undefined\n    | null\n    | { width: number; height: number; icons: Record<string, SpriteIcon> };\n\n  let spritePromise: Promise<void> | undefined;\n</script>\n\n<script lang=\"ts\">\n  import { createEventDispatcher } from \"svelte\";\n  import type { Feature, ShowPlaceType } from \"./types\";\n\n  export let feature: Feature;\n\n  export let style: \"selected\" | \"picked\" | \"default\" = \"default\";\n\n  export let showPlaceType: ShowPlaceType;\n\n  export let missingIconsCache: Set<string>;\n\n  export let iconsBaseUrl: string;\n\n  $: categories = feature.properties?.categories;\n\n  $: isReverse = feature.place_type[0] === \"reverse\";\n\n  const dispatch = createEventDispatcher<{ select: undefined }>();\n\n  let category: string | undefined;\n\n  let imageUrl: string | undefined;\n\n  let spriteIcon: SpriteIcon | undefined;\n\n  let index: number;\n\n  $: placeType =\n    feature.properties?.categories?.join(\", \") ??\n    feature.properties?.place_type_name?.[0] ??\n    feature.place_type[0];\n\n  $: {\n    index = categories?.length ?? 0;\n\n    loadIcon();\n  }\n\n  function loadSprites() {\n    spritePromise ??= fetch(`${iconsBaseUrl}sprite${scaleUrl}.json`)\n      .then((response) => response.json())\n      .then((data) => {\n        sprites = data;\n      })\n      .catch(() => {\n        sprites = null;\n      });\n  }\n\n  function handleImgError() {\n    if (imageUrl) {\n      missingIconsCache.add(imageUrl);\n    }\n\n    loadIcon();\n  }\n\n  function loadIcon() {\n    if (sprites !== undefined) {\n      loadIcon2();\n    } else {\n      loadSprites();\n\n      spritePromise?.then(loadIcon2);\n    }\n  }\n\n  function loadIcon2() {\n    do {\n      index--;\n\n      category = categories?.[index];\n\n      spriteIcon = category ? sprites?.icons[category] : undefined;\n\n      if (spriteIcon) {\n        break;\n      }\n\n      imageUrl = category\n        ? iconsBaseUrl + category.replace(/ /g, \"_\") + \".svg\"\n        : undefined;\n    } while (index > -1 && (!imageUrl || missingIconsCache.has(imageUrl)));\n  }\n</script>\n\n<!-- svelte-ignore a11y-click-events-have-key-events -->\n<li\n  tabindex=\"-1\"\n  role=\"option\"\n  aria-selected={style === \"selected\"}\n  aria-checked={style === \"picked\"}\n  class={style}\n  on:mouseenter\n  on:focus={() => dispatch(\"select\", undefined)}\n  on:click={(ev) => {\n    // this is to trigger the event if we click on focused item\n    if (document.activeElement !== ev.target) {\n      dispatch(\"select\", undefined);\n    }\n  }}\n>\n  {#if sprites && spriteIcon}\n    <div\n      class=\"sprite-icon\"\n      style={`\n        width: ${spriteIcon.width / scaleFactor}px;\n        height: ${spriteIcon.height / scaleFactor}px;\n        background-image: url(${iconsBaseUrl}sprite${scaleUrl}.png);\n        background-position: -${spriteIcon.x / scaleFactor}px -${spriteIcon.y / scaleFactor}px;\n        background-size: ${sprites.width / scaleFactor}px ${sprites.height / scaleFactor}px;\n      `}\n      title={placeType}\n    />\n  {:else if imageUrl}\n    <img\n      src={imageUrl}\n      alt={category}\n      title={placeType}\n      on:error={() => handleImgError()}\n    />\n  {:else if feature.address}\n    <img\n      src={iconsBaseUrl + \"housenumber.svg\"}\n      alt={placeType}\n      title={placeType}\n    />\n  {:else if feature.id.startsWith(\"road.\")}\n    <img src={iconsBaseUrl + \"road.svg\"} alt={placeType} title={placeType} />\n  {:else if feature.id.startsWith(\"address.\")}\n    <img src={iconsBaseUrl + \"street.svg\"} alt={placeType} title={placeType} />\n  {:else if feature.id.startsWith(\"postal_code.\")}\n    <img\n      src={iconsBaseUrl + \"postal_code.svg\"}\n      alt={placeType}\n      title={placeType}\n    />\n  {:else if feature.id.startsWith(\"poi.\")}\n    <img src={iconsBaseUrl + \"poi.svg\"} alt={placeType} title={placeType} />\n  {:else if isReverse}\n    <img src={iconsBaseUrl + \"reverse.svg\"} alt={placeType} title={placeType} />\n  {:else}\n    <img src={iconsBaseUrl + \"area.svg\"} alt={placeType} title={placeType} />\n  {/if}\n\n  <span class=\"texts\">\n    <span>\n      <span class=\"primary\">\n        {isReverse ? feature.place_name : feature.place_name.replace(/,.*/, \"\")}\n      </span>\n\n      {#if showPlaceType === \"always\" || (showPlaceType !== \"never\" && !feature.address && !feature.id.startsWith(\"road.\") && !feature.id.startsWith(\"address.\") && !feature.id.startsWith(\"postal_code.\") && (!feature.id.startsWith(\"poi.\") || !imageUrl) && !isReverse)}\n        <span class=\"secondary\">\n          {placeType}\n        </span>\n      {/if}\n    </span>\n\n    <span class=\"line2\">\n      {isReverse ? \"\" : feature.place_name.replace(/[^,]*,?\\s*/, \"\")}\n    </span>\n  </span>\n</li>\n\n<style lang=\"scss\">\n  .sprite-icon {\n    align-self: center;\n    justify-self: center;\n    opacity: 0.75;\n    background-repeat: no-repeat;\n  }\n\n  li {\n    text-align: left;\n    cursor: default;\n    display: grid;\n    grid-template-columns: 40px 1fr;\n    color: var(--color-text);\n    padding: 8px 0px;\n    font-size: 14px;\n    line-height: 18px;\n    min-width: fit-content;\n    outline: 0;\n\n    &:first-child {\n      padding-top: 10px;\n    }\n\n    &:last-child {\n      padding-bottom: 10px;\n    }\n\n    &.picked {\n      background-color: #e7edff;\n\n      .secondary {\n        color: #96a4c7;\n        padding-left: 4px;\n      }\n\n      .line2 {\n        color: #96a4c7;\n      }\n    }\n\n    &.selected {\n      background-color: #f3f6ff;\n\n      & {\n        animation: backAndForth 5s linear infinite;\n      }\n\n      & .primary {\n        color: #2b8bfb;\n      }\n\n      .secondary {\n        color: #a2adc7;\n        padding-left: 4px;\n      }\n\n      .line2 {\n        color: #a2adc7;\n      }\n    }\n\n    & > img {\n      align-self: center;\n      justify-self: center;\n      opacity: 0.75;\n    }\n  }\n\n  .texts {\n    padding: 0 17px 0 0;\n\n    & > * {\n      white-space: nowrap;\n      display: block;\n      min-width: fit-content;\n    }\n  }\n\n  .primary {\n    font-weight: 600;\n  }\n\n  .secondary {\n    color: #aeb6c7;\n    padding-left: 4px;\n  }\n\n  .line2 {\n    color: #aeb6c7;\n  }\n\n  @keyframes backAndForth {\n    0% {\n      transform: translateX(0);\n    }\n    10% {\n      transform: translateX(0);\n    }\n    45% {\n      transform: translateX(calc(-100% + 270px));\n    }\n    55% {\n      transform: translateX(calc(-100% + 270px));\n    }\n    90% {\n      transform: translateX(0);\n    }\n    100% {\n      transform: translateX(0);\n    }\n  }\n</style>\n","<div>\n  <svg viewBox=\"0 0 18 18\" width=\"24\" height=\"24\">\n    <path\n      fill=\"#333\"\n      d=\"M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z\"\n    />\n    <path\n      opacity=\".1\"\n      d=\"M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z\"\n    />\n  </svg>\n</div>\n\n<style>\n  div {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    pointer-events: none;\n\n    display: flex;\n    align-items: center;\n  }\n\n  svg {\n    animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);\n  }\n\n  @keyframes rotate {\n    from {\n      -webkit-transform: rotate(0);\n      transform: rotate(0);\n    }\n    to {\n      -webkit-transform: rotate(360deg);\n      transform: rotate(360deg);\n    }\n  }\n</style>\n","<svg viewBox=\"0 0 60.006 21.412\" width=\"14\" height=\"20\">\n  <path\n    d=\"M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z\"\n  />\n</svg>\n\n<style>\n  svg {\n    display: block;\n    fill: var(--color-icon-button);\n  }\n</style>\n","<svg\n  xmlns=\"http://www.w3.org/2000/svg\"\n  width=\"13\"\n  height=\"13\"\n  viewBox=\"0 0 13 13\"\n>\n  <circle cx=\"4.789\" cy=\"4.787\" r=\"3.85\" />\n  <path d=\"M12.063 12.063 7.635 7.635\" />\n</svg>\n\n<style>\n  circle {\n    stroke-width: 1.875;\n    fill: none;\n  }\n\n  path {\n    stroke-width: 1.875;\n    stroke-linecap: round;\n  }\n\n  svg {\n    display: block;\n    stroke: var(--color-icon-button);\n  }\n</style>\n","import type { BBox } from \"./types\";\n\n// taken from Leaflet\nexport function wrapNum(\n  x: number,\n  range: [number, number],\n  includeMax: boolean,\n) {\n  const max = range[1],\n    min = range[0],\n    d = max - min;\n\n  return x === max && includeMax ? x : ((((x - min) % d) + d) % d) + min;\n}\n\nexport function unwrapBbox(bbox0: BBox): BBox {\n  const bbox = [...bbox0] satisfies BBox;\n\n  if (bbox[2] < bbox[0]) {\n    if (\n      Math.abs((bbox[0] + bbox[2] + 360) / 2) >\n      Math.abs((bbox[0] - 360 + bbox[2]) / 2)\n    ) {\n      bbox[0] -= 360;\n    } else {\n      bbox[2] += 360;\n    }\n  }\n\n  return bbox;\n}\n","import type { MapController, ProximityRule } from \"./types\";\n\nlet cachedLocation: { time: number; coords: undefined | string } | undefined;\n\nexport async function getProximity(\n  mapController: MapController | undefined,\n  proximity: ProximityRule[] | null | undefined,\n  ac: AbortController,\n) {\n  const centerAndZoom = mapController?.getCenterAndZoom();\n\n  for (const rule of proximity ?? []) {\n    if (\n      centerAndZoom &&\n      ((rule.minZoom != undefined && rule.minZoom > centerAndZoom[0]) ||\n        (rule.maxZoom != undefined && rule.maxZoom < centerAndZoom[0]))\n    ) {\n      continue;\n    }\n\n    if (rule.type === \"fixed\") {\n      return rule.coordinates.join(\",\");\n    }\n\n    cg: if (rule.type === \"client-geolocation\") {\n      if (\n        cachedLocation &&\n        rule.cachedLocationExpiry &&\n        cachedLocation.time + rule.cachedLocationExpiry > Date.now()\n      ) {\n        if (!cachedLocation.coords) {\n          break cg;\n        }\n\n        return cachedLocation.coords;\n      }\n\n      let coords: string | undefined;\n\n      try {\n        coords = await new Promise<string>((resolve, reject) => {\n          ac.signal.addEventListener(\"abort\", () => {\n            reject(Error(\"aborted\"));\n          });\n\n          navigator.geolocation.getCurrentPosition(\n            (pos) => {\n              resolve(\n                [pos.coords.longitude, pos.coords.latitude]\n                  .map((c) => c.toFixed(6))\n                  .join(\",\"),\n              );\n            },\n            (err) => {\n              reject(err);\n            },\n            rule,\n          );\n        });\n\n        return coords;\n      } catch {\n        // ignore\n      } finally {\n        if (rule.cachedLocationExpiry) {\n          cachedLocation = {\n            time: Date.now(),\n            coords,\n          };\n        }\n      }\n\n      if (ac.signal.aborted) {\n        return;\n      }\n    }\n\n    if (rule.type === \"server-geolocation\") {\n      return \"ip\";\n    }\n\n    if (centerAndZoom && rule.type === \"map-center\") {\n      return centerAndZoom[1].toFixed(6) + \",\" + centerAndZoom[2].toFixed(6);\n    }\n  }\n}\n","//Coordinates pattern matching regex\n//DM with invalid minutes (goes to coords_other); this is just a shortened version of that to create a guard condition\nconst dm_invalid = /^(NORTH|SOUTH|[NS])?\\s*([+-]?[0-8]?[0-9])\\s*([\\.:]|D(?:EG)?(?:REES)?)?\\s*,?([6-9][0-9])\\s*(['\\.:]|M(?:IN)?(?:UTES)?)?\\s*(NORTH|SOUTH|[NS])?(?:\\s*[,/;]\\s*|\\s*)(EAST|WEST|[EW])?\\s*([+-]?[0-1]?[0-9]?[0-9])\\s*([\\.:]|D(?:EG)?(?:REES)?)?\\s*,?([6-9][0-9])\\s*(['\\.:]|M(?:IN)?(?:UTES)?)?\\s*(EAST|WEST|[EW])?$/i;\n//DM as numbers only - see issue #15\nconst dm_numbers = /^([+-]?[0-8]?[0-9])\\s+([0-5]?[0-9]\\.\\d{3,})[\\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\\s+([0-5]?[0-9]\\.\\d{3,})$/;\n//decimal degrees\nconst dd_re = /^(NORTH|SOUTH|[NS])?[\\s]*([+-]?[0-8]?[0-9](?:[\\.,]\\d{3,}))[\\s]*([]?)[\\s]*(NORTH|SOUTH|[NS])?[\\s]*[,/;]?[\\s]*(EAST|WEST|[EW])?[\\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\\.,]\\d{3,}))[\\s]*([]?)[\\s]*(EAST|WEST|[EW])?$/i;\n//degrees minutes seconds with '.' as separator - gives array with 15 values\nconst dms_periods = /^(NORTH|SOUTH|[NS])?\\s*([+-]?[0-8]?[0-9])\\s*(\\.)\\s*([0-5]?[0-9])\\s*(\\.)\\s*((?:[0-5]?[0-9])(?:[\\.,]\\d{1,3})?)?\\s*(NORTH|SOUTH|[NS])?(?:\\s*[,/;]\\s*|\\s*)(EAST|WEST|[EW])?\\s*([+-]?[0-1]?[0-9]?[0-9])\\s*(\\.)\\s*([0-5]?[0-9])\\s*(\\.)\\s*((?:[0-5]?[0-9])(?:[\\.,]\\d{1,3})?)?\\s*(EAST|WEST|[EW])?$/i;\n//degrees minutes seconds with words 'degrees, minutes, seconds' as separators (needed because the s of seconds messes with the S of SOUTH) - gives array of 17 values\nconst dms_abbr = /^(NORTH|SOUTH|[NS])?\\s*([+-]?[0-8]?[0-9])\\s*(D(?:EG)?(?:REES)?)\\s*([0-5]?[0-9])\\s*(M(?:IN)?(?:UTES)?)\\s*((?:[0-5]?[0-9])(?:[\\.,]\\d{1,3})?)?\\s*(S(?:EC)?(?:ONDS)?)?\\s*(NORTH|SOUTH|[NS])?(?:\\s*[,/;]\\s*|\\s*)(EAST|WEST|[EW])?\\s*([+-]?[0-1]?[0-9]?[0-9])\\s*(D(?:EG)?(?:REES)?)\\s*([0-5]?[0-9])\\s*(M(?:IN)?(?:UTES)?)\\s*((?:[0-5]?[0-9])(?:[\\.,]\\d{1,3})?)?\\s*(S(?:EC)?(?:ONDS)?)\\s*(EAST|WEST|[EW])?$/i;\n//everything else - gives array of 17 values \nconst coords_other = /^(NORTH|SOUTH|[NS])?\\s*([+-]?[0-8]?[0-9])\\s*([\\.:]|D(?:EG)?(?:REES)?)?\\s*,?([0-5]?[0-9](?:[\\.,]\\d{1,})?)?\\s*(['\\.:]|M(?:IN)?(?:UTES)?)?\\s*,?((?:[0-5]?[0-9])(?:[\\.,]\\d{1,3})?)?\\s*(''||||[\"\\.])?\\s*(NORTH|SOUTH|[NS])?(?:\\s*[,/;]\\s*|\\s*)(EAST|WEST|[EW])?\\s*([+-]?[0-1]?[0-9]?[0-9])\\s*([\\.:]|D(?:EG)?(?:REES)?)?\\s*,?([0-5]?[0-9](?:[\\.,]\\d{1,})?)?\\s*(['\\.:]|M(?:IN)?(?:UTES)?)?\\s*,?((?:[0-5]?[0-9])(?:[\\.,]\\d{1,3})?)?\\s*(''||||[\"\\.])?\\s*(EAST|WEST|[EW])?$/i;\nexport { dm_invalid, dm_numbers, dd_re, dms_periods, dms_abbr, coords_other };\n","//borrowed from https://www.codegrepper.com/code-examples/javascript/javascript+converting+latitude+longitude+to+gps+coordinates\n/**\n * Converts decimalCoordinates to commonly used string formats\n * Note that this will add degree and direction symbols to decimal coordinates\n * @param {string} format Either DMS or DM\n * @returns {string}\n */\nfunction toCoordinateFormat(format) {\n    if (!['DMS', 'DM', 'DD'].includes(format))\n        throw new Error('invalid format specified');\n    if (this.decimalCoordinates && this.decimalCoordinates.trim()) {\n        const parts = this.decimalCoordinates.split(',').map(x => Number(x.trim()));\n        const decimalLatitude = Number(parts[0]);\n        const decimalLongitude = Number(parts[1]);\n        const absoluteLatitude = Math.abs(decimalLatitude);\n        const absoluteLongitude = Math.abs(decimalLongitude);\n        const latDir = decimalLatitude > 0 ? \"N\" : \"S\";\n        const longDir = decimalLongitude > 0 ? \"E\" : \"W\";\n        let result;\n        if (format == 'DD') {\n            result = `${absoluteLatitude} ${latDir}, ${absoluteLongitude} ${longDir}`;\n        }\n        //else we need some more things\n        const degreesLatitude = Math.floor(absoluteLatitude);\n        const degreesLongitude = Math.floor(absoluteLongitude);\n        const minutesLatitudeNotTruncated = (absoluteLatitude - degreesLatitude) * 60;\n        const minutesLongitudeNotTruncated = (absoluteLongitude - degreesLongitude) * 60;\n        if (format == 'DM') {\n            let dmMinsLatitude = round(minutesLatitudeNotTruncated, 3).toFixed(3).padStart(6, '0');\n            let dmMinsLongitude = round(minutesLongitudeNotTruncated, 3).toFixed(3).padStart(6, '0');\n            if (dmMinsLatitude.endsWith('.000') && dmMinsLongitude.endsWith('.000')) {\n                dmMinsLatitude = dmMinsLatitude.replace(/\\.000$/, '');\n                dmMinsLongitude = dmMinsLongitude.replace(/\\.000$/, '');\n            }\n            result = `${degreesLatitude} ${dmMinsLatitude}' ${latDir}, ${degreesLongitude} ${dmMinsLongitude}' ${longDir}`;\n        }\n        if (format == \"DMS\") {\n            const latMinutes = Math.floor(minutesLatitudeNotTruncated);\n            const longMinutes = Math.floor(minutesLongitudeNotTruncated);\n            let latSeconds = ((minutesLatitudeNotTruncated - latMinutes) * 60).toFixed(1).padStart(4, '0');\n            let longSeconds = ((minutesLongitudeNotTruncated - longMinutes) * 60).toFixed(1).padStart(4, '0');\n            const latMinutesString = latMinutes.toString().padStart(2, '0');\n            const longMinutesString = longMinutes.toString().padStart(2, '0');\n            // if they both end in .0 we drop the .0\n            if (latSeconds.endsWith('.0') && longSeconds.endsWith('.0')) {\n                latSeconds = latSeconds.replace(/\\.0$/, '');\n                longSeconds = longSeconds.replace(/\\.0$/, '');\n            }\n            result = `${degreesLatitude} ${latMinutesString}' ${latSeconds}\" ${latDir}, ${degreesLongitude} ${longMinutesString}' ${longSeconds}\" ${longDir}`;\n        }\n        return result;\n    }\n    else {\n        throw new Error('no decimal coordinates to convert');\n    }\n}\nfunction round(num, places) {\n    const d = Math.pow(10, places);\n    return Math.round((num + Number.EPSILON) * d) / d;\n}\nexport default toCoordinateFormat;\n","//function for converting coordinates from a string to decimal and verbatim\n//this is just a comment\nimport { dm_invalid, dm_numbers, dd_re, dms_periods, dms_abbr, coords_other } from './regex.js';\nimport toCoordinateFormat from './toCoordinateFormat.js';\n/**\n * Function for converting coordinates in a variety of formats to decimal coordinates\n * @param {string} coordsString The coordinates string to convert\n * @param {number} [decimalPlaces] The number of decimal places for converted coordinates; default is 5\n * @returns {{verbatimCoordinates: string, decimalCoordinates: string, decimalLatitude: number, decimalLongitude: number, closeEnough: function(string): boolean, toCoordinateFormat: toCoordinateFormat}}\n */\nfunction converter(coordsString, decimalPlaces) {\n    //TODO add exact match to entered string, so that it can be used to filter out superflous text around it\n    if (!decimalPlaces) {\n        decimalPlaces = 5;\n    }\n    coordsString = coordsString.replace(/\\s+/g, ' ').trim(); //just to tidy up whitespaces\n    let ddLat = null;\n    let ddLng = null;\n    let latdir = \"\";\n    let lngdir = \"\";\n    let originalFormat = null;\n    let match = [];\n    let matchSuccess = false;\n    if (dm_invalid.test(coordsString)) {\n        throw new Error(\"invalid coordinate value\");\n    }\n    if (dm_numbers.test(coordsString)) {\n        match = dm_numbers.exec(coordsString);\n        matchSuccess = checkMatch(match);\n        if (matchSuccess) {\n            ddLat = Math.abs(match[1]) + match[2] / 60;\n            if (Number(match[1]) < 0) {\n                ddLat *= -1;\n            }\n            ddLng = Math.abs(match[3]) + match[4] / 60;\n            if (Number(match[3]) < 0) {\n                ddLng *= -1;\n            }\n            originalFormat = \"DM\";\n        }\n        else {\n            throw new Error(\"invalid coordinate format\");\n        }\n    }\n    else if (dd_re.test(coordsString)) {\n        match = dd_re.exec(coordsString);\n        matchSuccess = checkMatch(match);\n        if (matchSuccess) {\n            ddLat = match[2];\n            ddLng = match[6];\n            //need to fix if there are ','s instead of '.'\n            if (ddLat.includes(',')) {\n                ddLat = ddLat.replace(',', '.');\n            }\n            if (ddLng.includes(',')) {\n                ddLng = ddLng.replace(',', '.');\n            }\n            originalFormat = \"DD\";\n            //validation, we don't want things like 23.00000\n            //some more validation: no zero coords or degrees only\n            if (Number(Math.round(ddLat)) == Number(ddLat)) {\n                throw new Error('integer only coordinate provided');\n            }\n            if (Number(Math.round(ddLng)) == Number(ddLng)) {\n                throw new Error('integer only coordinate provided');\n            }\n            //get directions\n            if (match[1]) {\n                latdir = match[1];\n                lngdir = match[5];\n            }\n            else if (match[4]) {\n                latdir = match[4];\n                lngdir = match[8];\n            }\n        }\n        else {\n            throw new Error(\"invalid decimal coordinate format\");\n        }\n    }\n    else if (dms_periods.test(coordsString)) {\n        match = dms_periods.exec(coordsString);\n        matchSuccess = checkMatch(match);\n        if (matchSuccess) {\n            ddLat = Math.abs(parseInt(match[2]));\n            if (match[4]) {\n                ddLat += match[4] / 60;\n                originalFormat = \"DM\";\n            }\n            if (match[6]) {\n                ddLat += match[6].replace(',', '.') / 3600;\n                originalFormat = \"DMS\";\n            }\n            if (parseInt(match[2]) < 0) {\n                ddLat = -1 * ddLat;\n            }\n            ddLng = Math.abs(parseInt(match[9]));\n            if (match[11]) {\n                ddLng += match[11] / 60;\n            }\n            if (match[13]) {\n                ddLng += match[13].replace(',', '.') / 3600;\n            }\n            if (parseInt(match[9]) < 0) {\n                ddLng = -1 * ddLng;\n            }\n            //the compass directions\n            if (match[1]) {\n                latdir = match[1];\n                lngdir = match[8];\n            }\n            else if (match[7]) {\n                latdir = match[7];\n                lngdir = match[14];\n            }\n        }\n        else {\n            throw new Error(\"invalid DMS coordinates format\");\n        }\n    }\n    else if (dms_abbr.test(coordsString)) {\n        match = dms_abbr.exec(coordsString);\n        matchSuccess = checkMatch(match);\n        if (matchSuccess) {\n            ddLat = Math.abs(parseInt(match[2]));\n            if (match[4]) {\n                ddLat += match[4] / 60;\n                originalFormat = \"DM\";\n            }\n            if (match[6]) {\n                ddLat += match[6] / 3600;\n                originalFormat = \"DMS\";\n            }\n            if (parseInt(match[2]) < 0) {\n                ddLat = -1 * ddLat;\n            }\n            ddLng = Math.abs(parseInt(match[10]));\n            if (match[12]) {\n                ddLng += match[12] / 60;\n            }\n            if (match[14]) {\n                ddLng += match[14] / 3600;\n            }\n            if (parseInt(match[10]) < 0) {\n                ddLng = -1 * ddLng;\n            }\n            //the compass directions\n            if (match[1]) {\n                latdir = match[1];\n                lngdir = match[9];\n            }\n            else if (match[8]) {\n                latdir = match[8];\n                lngdir = match[16];\n            }\n        }\n        else {\n            throw new Error(\"invalid DMS coordinates format\");\n        }\n    }\n    else if (coords_other.test(coordsString)) {\n        match = coords_other.exec(coordsString);\n        matchSuccess = checkMatch(match);\n        // we need an extra check here for things that matched that shouldn't have\n        if (match.filter(x => x).length <= 5) {\n            throw new Error(\"invalid coordinates format\");\n        }\n        if (matchSuccess) {\n            ddLat = Math.abs(parseInt(match[2]));\n            if (match[4]) {\n                ddLat += match[4].replace(',', '.') / 60;\n                originalFormat = \"DM\";\n            }\n            if (match[6]) {\n                ddLat += match[6].replace(',', '.') / 3600;\n                originalFormat = \"DMS\";\n            }\n            if (parseInt(match[2]) < 0) {\n                ddLat = -1 * ddLat;\n            }\n            ddLng = Math.abs(parseInt(match[10]));\n            if (match[12]) {\n                ddLng += match[12].replace(',', '.') / 60;\n            }\n            if (match[14]) {\n                ddLng += match[14].replace(',', '.') / 3600;\n            }\n            if (parseInt(match[10]) < 0) {\n                ddLng = -1 * ddLng;\n            }\n            //the compass directions\n            if (match[1]) {\n                latdir = match[1];\n                lngdir = match[9];\n            }\n            else if (match[8]) {\n                latdir = match[8];\n                lngdir = match[16];\n            }\n        }\n        else {\n            throw new Error(\"invalid coordinates format\");\n        }\n    }\n    if (matchSuccess) {\n        //more validation....\n        //check longitude value - it can be wrong!\n        if (Math.abs(ddLng) >= 180) {\n            throw new Error(\"invalid longitude value\");\n        }\n        //just to be safe check latitude also...\n        if (Math.abs(ddLat) >= 90) {\n            throw new Error(\"invalid latitude value\");\n        }\n        //if we have one direction we must have the other\n        if ((latdir && !lngdir) || (!latdir && lngdir)) {\n            throw new Error(\"invalid coordinates value\");\n        }\n        //the directions can't be the same\n        if (latdir && latdir == lngdir) {\n            throw new Error(\"invalid coordinates format\");\n        }\n        // a bit of tidying up...\n        if (ddLat.toString().includes(',')) {\n            ddLat = ddLat.replace(',', '.');\n        }\n        if (ddLng.toString().includes(',')) {\n            ddLng = ddLng.replace(',', '.');\n        }\n        //make sure the signs and cardinal directions match\n        let patt = /S|SOUTH/i;\n        if (patt.test(latdir)) {\n            if (ddLat > 0) {\n                ddLat = -1 * ddLat;\n            }\n        }\n        patt = /W|WEST/i;\n        if (patt.test(lngdir)) {\n            if (ddLng > 0) {\n                ddLng = -1 * ddLng;\n            }\n        }\n        //we need to get the verbatim coords from the string\n        //we can't split down the middle because if there are decimals they may have different numbers on each side\n        //so we need to find the separating character, or if none, use the match values to split down the middle\n        const verbatimCoordinates = match[0].trim();\n        let verbatimLat;\n        let verbatimLng;\n        const sepChars = /[,/;\\u0020]/g; //comma, forward slash and spacebar\n        const seps = verbatimCoordinates.match(sepChars);\n        if (seps == null) {\n            //split down the middle\n            const middle = Math.floor(coordsString.length / 2);\n            verbatimLat = verbatimCoordinates.substring(0, middle).trim();\n            verbatimLng = verbatimCoordinates.substring(middle).trim();\n        }\n        else { //if length is odd then find the index of the middle value\n            //get the middle index\n            let middle;\n            //easy for odd numbers\n            if (seps.length % 2 == 1) {\n                middle = Math.floor(seps.length / 2);\n            }\n            else {\n                middle = (seps.length / 2) - 1;\n            }\n            //walk through seps until we get to the middle\n            let splitIndex = 0;\n            //it might be only one value\n            if (middle == 0) {\n                splitIndex = verbatimCoordinates.indexOf(seps[0]);\n                verbatimLat = verbatimCoordinates.substring(0, splitIndex).trim();\n                verbatimLng = verbatimCoordinates.substring(splitIndex + 1).trim();\n            }\n            else {\n                let currSepIndex = 0;\n                let startSearchIndex = 0;\n                while (currSepIndex <= middle) {\n                    splitIndex = verbatimCoordinates.indexOf(seps[currSepIndex], startSearchIndex);\n                    startSearchIndex = splitIndex + 1;\n                    currSepIndex++;\n                }\n                verbatimLat = verbatimCoordinates.substring(0, splitIndex).trim();\n                verbatimLng = verbatimCoordinates.substring(splitIndex + 1).trim();\n            }\n        }\n        //validation again...\n        //we only allow zeros after the period if its DM\n        const splitLat = verbatimLat.split('.');\n        if (splitLat.length == 2) {\n            if (splitLat[1] == 0 && splitLat[1].length != 2) {\n                throw new Error('invalid coordinates format');\n            }\n        }\n        const splitLon = verbatimLng.split('.');\n        if (splitLon.length == 2) {\n            if (splitLon[1] == 0 && splitLon[1].length != 2) {\n                throw new Error('invalid coordinates format');\n            }\n        }\n        //no integer coords allowed\n        if (/^\\d+$/.test(verbatimLat) || /^\\d+$/.test(verbatimLng)) {\n            throw new Error('degree only coordinate/s provided');\n        }\n        //all done!!\n        //just truncate the decimals appropriately\n        ddLat = Number(Number(ddLat).toFixed(decimalPlaces));\n        ddLng = Number(Number(ddLng).toFixed(decimalPlaces));\n        return Object.freeze({\n            verbatimCoordinates,\n            verbatimLatitude: verbatimLat,\n            verbatimLongitude: verbatimLng,\n            decimalLatitude: ddLat,\n            decimalLongitude: ddLng,\n            decimalCoordinates: `${ddLat},${ddLng}`,\n            originalFormat,\n            closeEnough: coordsCloseEnough,\n            toCoordinateFormat\n        });\n    }\n    else {\n        throw new Error(\"coordinates pattern match failed\");\n    }\n}\nfunction checkMatch(match) {\n    if (!isNaN(match[0])) { //we've matched a number, not what we want....\n        return false;\n    }\n    //first remove the empty values from the array\n    const filteredMatch = [...match];\n    //we need to shift the array because it contains the whole coordinates string in the first item\n    filteredMatch.shift();\n    //check the array length is an even number\n    if (filteredMatch.length % 2 > 0) {\n        return false;\n    }\n    // regex for testing corresponding values match\n    const numerictest = /^[-+]?\\d+([\\.,]\\d+)?$/; //for testing numeric values\n    const stringtest = /[eastsouthnorthwest]+/i; //for testing string values (north, south, etc)\n    const halflen = filteredMatch.length / 2;\n    for (let i = 0; i < halflen; i++) {\n        const leftside = filteredMatch[i];\n        const rightside = filteredMatch[i + halflen];\n        const bothAreNumbers = numerictest.test(leftside) && numerictest.test(rightside);\n        const bothAreStrings = stringtest.test(leftside) && stringtest.test(rightside);\n        const valuesAreEqual = leftside == rightside;\n        if (leftside == undefined && rightside == undefined) { //we have to handle undefined because regex converts it to string 'undefined'!!\n            continue;\n        }\n        else if (leftside == undefined || rightside == undefined) { //no we need to handle the case where one is and the other not...\n            return false;\n        }\n        else if (bothAreNumbers || bothAreStrings || valuesAreEqual) {\n            continue;\n        }\n        else {\n            return false;\n        }\n    }\n    return true;\n}\n//functions for coordinate validation\n//as decimal arithmetic is not straightforward, we approximate\nfunction decimalsCloseEnough(dec1, dec2) {\n    const originaldiff = Math.abs(dec1 - dec2);\n    const diff = Number(originaldiff.toFixed(6));\n    if (diff <= 0.00001) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nfunction coordsCloseEnough(coordsToTest) {\n    if (!coordsToTest) {\n        throw new Error('coords must be provided');\n    }\n    if (coordsToTest.includes(',')) {\n        const coords = coordsToTest.split(',');\n        if (Number(coords[0]) == NaN || Number(coords[1]) == NaN) {\n            throw new Error(\"coords are not valid decimals\");\n        }\n        else {\n            return decimalsCloseEnough(this.decimalLatitude, Number(coords[0])) && decimalsCloseEnough(this.decimalLongitude, coords[1]); //this here will be the converted coordinates object\n        }\n    }\n    else {\n        throw new Error(\"coords being tested must be separated by a comma\");\n    }\n}\n// An enum for coordinates formats\nconst to = Object.freeze({\n    DMS: 'DMS',\n    DM: 'DM',\n    DD: 'DD'\n});\nconverter.to = to;\nexport default converter;\n","//return an array of coordinate strings for testing\n//coordinations-parser formats\n//https://www.npmjs.com/package/coordinate-parser\nconst coordsParserFormats = [\n    {\n        verbatimCoordinates: '40.123, -74.123',\n        verbatimLatitude: '40.123',\n        verbatimLongitude: '-74.123'\n    },\n    {\n        verbatimCoordinates: '40.123 N 74.123 W',\n        verbatimLatitude: '40.123 N',\n        verbatimLongitude: '74.123 W'\n    },\n    {\n        verbatimCoordinates: '40.123 N 74.123 W',\n        verbatimLatitude: '40.123 N',\n        verbatimLongitude: '74.123 W'\n    },\n    {\n        verbatimCoordinates: '40 7 22.8\" N 74 7 22.8\" W',\n        verbatimLatitude: '40 7 22.8\" N',\n        verbatimLongitude: '74 7 22.8\" W'\n    },\n    {\n        verbatimCoordinates: '40 7.38 , -74 7.38',\n        verbatimLatitude: '40 7.38',\n        verbatimLongitude: '-74 7.38'\n    },\n    {\n        verbatimCoordinates: 'N40722.8, W74722.8',\n        verbatimLatitude: 'N40722.8',\n        verbatimLongitude: 'W74722.8'\n    },\n    {\n        verbatimCoordinates: '40722.8\"N, 74722.8\"W',\n        verbatimLatitude: '40722.8\"N',\n        verbatimLongitude: '74722.8\"W'\n    },\n    {\n        verbatimCoordinates: '407\\'22.8\"N, 747\\'22.8\"W',\n        verbatimLatitude: '407\\'22.8\"N',\n        verbatimLongitude: '747\\'22.8\"W'\n    },\n    {\n        verbatimCoordinates: '40 7 22.8, -74 7 22.8',\n        verbatimLatitude: '40 7 22.8',\n        verbatimLongitude: '-74 7 22.8'\n    },\n    {\n        verbatimCoordinates: '40.123 -74.123',\n        verbatimLatitude: '40.123',\n        verbatimLongitude: '-74.123'\n    },\n    {\n        verbatimCoordinates: '40.123,-74.123',\n        verbatimLatitude: '40.123',\n        verbatimLongitude: '-74.123'\n    },\n    {\n        verbatimCoordinates: '40.123N74.123W',\n        verbatimLatitude: '40.123N',\n        verbatimLongitude: '74.123W'\n    },\n    {\n        verbatimCoordinates: '4007.38N7407.38W',\n        verbatimLatitude: '4007.38N',\n        verbatimLongitude: '7407.38W'\n    },\n    {\n        verbatimCoordinates: '40722.8\"N, 74722.8\"W',\n        verbatimLatitude: '40722.8\"N',\n        verbatimLongitude: '74722.8\"W'\n    },\n    {\n        verbatimCoordinates: '400722.8N740722.8W',\n        verbatimLatitude: '400722.8N',\n        verbatimLongitude: '740722.8W'\n    },\n    {\n        verbatimCoordinates: 'N 40 7.38 W 74 7.38',\n        verbatimLatitude: 'N 40 7.38',\n        verbatimLongitude: 'W 74 7.38'\n    },\n    {\n        verbatimCoordinates: '40:7:22.8N 74:7:22.8W',\n        verbatimLatitude: '40:7:22.8N',\n        verbatimLongitude: '74:7:22.8W'\n    },\n    {\n        verbatimCoordinates: '40:7:23N,74:7:23W',\n        verbatimLatitude: '40:7:23N',\n        verbatimLongitude: '74:7:23W',\n        decimalLatitude: 40.1230555555,\n        decimalLongitude: -74.1230555555\n    },\n    {\n        verbatimCoordinates: '40723\"N 74723\"W',\n        verbatimLatitude: '40723\"N',\n        verbatimLongitude: '74723\"W',\n        decimalLatitude: 40.1230555555,\n        decimalLongitude: -74.12305555555555\n    },\n    {\n        verbatimCoordinates: '40723\"S 74723\"E',\n        verbatimLatitude: '40723\"S',\n        verbatimLongitude: '74723\"E',\n        decimalLatitude: -40.1230555555,\n        decimalLongitude: 74.12305555555555\n    },\n    {\n        verbatimCoordinates: '40723\" -74723\"',\n        verbatimLatitude: '40723\"',\n        verbatimLongitude: '-74723\"',\n        decimalLatitude: 40.1230555555,\n        decimalLongitude: -74.123055555\n    },\n    {\n        verbatimCoordinates: '40d 7 23\" N 74d 7 23\" W',\n        verbatimLatitude: '40d 7 23\" N',\n        verbatimLongitude: '74d 7 23\" W',\n        decimalLatitude: 40.1230555555,\n        decimalLongitude: -74.123055555\n    },\n    {\n        verbatimCoordinates: '40.123N 74.123W',\n        verbatimLatitude: '40.123N',\n        verbatimLongitude: '74.123W'\n    },\n    {\n        verbatimCoordinates: '40 7.38, -74 7.38',\n        verbatimLatitude: '40 7.38',\n        verbatimLongitude: '-74 7.38'\n    },\n    {\n        verbatimCoordinates: '40 7.38, -74 7.38',\n        verbatimLatitude: '40 7.38',\n        verbatimLongitude: '-74 7.38'\n    },\n    {\n        verbatimCoordinates: '40 7 22.8; -74 7 22.8',\n        verbatimLatitude: '40 7 22.8',\n        verbatimLongitude: '-74 7 22.8'\n    }\n];\nconst coordsParserDecimals = {\n    decimalLatitude: 40.123,\n    decimalLongitude: -74.123\n};\n//formats from https://gist.github.com/moole/3707127/337bd31d813a10abcf55084381803e5bbb0b20dc \nconst coordsRegexFormats = [\n    {\n        verbatimCoordinates: '504\\'17.698\"south, 1424\\'2.826\"east',\n        verbatimLatitude: '504\\'17.698\"south',\n        verbatimLongitude: '1424\\'2.826\"east',\n        decimalLatitude: -50.0715827777777778,\n        decimalLongitude: 14.400785\n    },\n    {\n        verbatimCoordinates: '50d4m17.698S 14d24m2.826E',\n        verbatimLatitude: '50d4m17.698S',\n        verbatimLongitude: '14d24m2.826E',\n        decimalLatitude: -50.0715827777777778,\n        decimalLongitude: 14.400785\n    },\n    {\n        verbatimCoordinates: '40:26:46N,79:56:55W',\n        verbatimLatitude: '40:26:46N',\n        verbatimLongitude: '79:56:55W',\n        decimalLatitude: 40.4461111111111111,\n        decimalLongitude: -79.9486111111111111\n    },\n    {\n        verbatimCoordinates: '40:26:46.302N 79:56:55.903W',\n        verbatimLatitude: '40:26:46.302N',\n        verbatimLongitude: '79:56:55.903W',\n        decimalLatitude: 40.446195,\n        decimalLongitude: -79.9488619444444444\n    },\n    {\n        verbatimCoordinates: '402647N 795836W',\n        verbatimLatitude: '402647N',\n        verbatimLongitude: '795836W',\n        decimalLatitude: 40.4463888888888889,\n        decimalLongitude: -79.9766666666666667\n    },\n    {\n        verbatimCoordinates: '40d 26 47 N 79d 58 36 W',\n        verbatimLatitude: '40d 26 47 N',\n        verbatimLongitude: '79d 58 36 W',\n        decimalLatitude: 40.4463888888888889,\n        decimalLongitude: -79.9766666666666667\n    },\n    {\n        verbatimCoordinates: '40.446195N 79.948862W',\n        verbatimLatitude: '40.446195N',\n        verbatimLongitude: '79.948862W',\n        decimalLatitude: 40.446195,\n        decimalLongitude: -79.948862\n    },\n    {\n        verbatimCoordinates: '40,446195 79,948862',\n        verbatimLatitude: '40,446195',\n        verbatimLongitude: '79,948862',\n        decimalLatitude: 40.446195,\n        decimalLongitude: 79.948862\n    },\n    {\n        verbatimCoordinates: '40 26.7717, -79 56.93172',\n        verbatimLatitude: '40 26.7717',\n        verbatimLongitude: '-79 56.93172',\n        decimalLatitude: 40.446195,\n        decimalLongitude: -79.948862\n    },\n    {\n        verbatimCoordinates: '40.446195, -79.948862',\n        verbatimLatitude: '40.446195',\n        verbatimLongitude: '-79.948862',\n        decimalLatitude: 40.446195,\n        decimalLongitude: -79.948862\n    },\n    {\n        verbatimCoordinates: '40.123256; -74.123256',\n        verbatimLatitude: '40.123256',\n        verbatimLongitude: '-74.123256',\n        decimalLatitude: 40.123256,\n        decimalLongitude: -74.123256\n    },\n    {\n        verbatimCoordinates: '1824S 2245E',\n        verbatimLatitude: '1824S',\n        verbatimLongitude: '2245E',\n        decimalLatitude: -18.4,\n        decimalLongitude: 22.75\n    }\n];\n// additional formats we've encountered\nconst otherFormats = [\n    {\n        verbatimCoordinates: '10.432342S 10.6345345E',\n        verbatimLatitude: '10.432342S',\n        verbatimLongitude: '10.6345345E',\n        decimalLatitude: -10.432342,\n        decimalLongitude: 10.6345345\n    },\n    {\n        verbatimCoordinates: '10.00S 10.00E',\n        verbatimLatitude: '10.00S',\n        verbatimLongitude: '10.00E',\n        decimalLatitude: -10.00000,\n        decimalLongitude: 10.00000\n    },\n    {\n        verbatimCoordinates: '00.00S 01.00E',\n        verbatimLatitude: '00.00S',\n        verbatimLongitude: '01.00E',\n        decimalLatitude: 0.00000,\n        decimalLongitude: 1.00000\n    },\n    {\n        verbatimCoordinates: '18.24S 22.45E',\n        verbatimLatitude: '18.24S',\n        verbatimLongitude: '22.45E',\n        decimalLatitude: -18.4,\n        decimalLongitude: 22.75\n    },\n    {\n        verbatimCoordinates: '27deg 15min 45.2sec S 18deg 32min 53.7sec E',\n        verbatimLatitude: '27deg 15min 45.2sec S',\n        verbatimLongitude: '18deg 32min 53.7sec E',\n        decimalLatitude: -27.2625555555555556,\n        decimalLongitude: 18.54825\n    },\n    {\n        verbatimCoordinates: '-23.3245 S / 28.2344 E',\n        verbatimLatitude: '-23.3245 S',\n        verbatimLongitude: '28.2344 E',\n        decimalLatitude: -23.3245,\n        decimalLongitude: 28.2344\n    },\n    {\n        verbatimCoordinates: '40 26.7717 -79 56.93172',\n        verbatimLatitude: '40 26.7717',\n        verbatimLongitude: '-79 56.93172',\n        decimalLatitude: 40.446195,\n        decimalLongitude: -79.948862\n    },\n    {\n        verbatimCoordinates: '27.15.45S 18.32.53E',\n        verbatimLatitude: '27.15.45S',\n        verbatimLongitude: '18.32.53E',\n        decimalLatitude: -27.2625,\n        decimalLongitude: 18.548055\n    },\n    {\n        verbatimCoordinates: '-27.15.45 18.32.53',\n        verbatimLatitude: '-27.15.45',\n        verbatimLongitude: '18.32.53',\n        decimalLatitude: -27.2625,\n        decimalLongitude: 18.548055\n    },\n    {\n        verbatimCoordinates: '27.15.45.2S 18.32.53.4E',\n        verbatimLatitude: '27.15.45.2S',\n        verbatimLongitude: '18.32.53.4E',\n        decimalLatitude: -27.262556,\n        decimalLongitude: 18.548167\n    },\n    {\n        verbatimCoordinates: '27.15.45,2S 18.32.53,4E',\n        verbatimLatitude: '27.15.45,2S',\n        verbatimLongitude: '18.32.53,4E',\n        decimalLatitude: -27.262556,\n        decimalLongitude: 18.548167\n    },\n    {\n        verbatimCoordinates: 'S23.43563   E22.45634 ',\n        verbatimLatitude: 'S23.43563 ',\n        verbatimLongitude: 'E22.45634 ',\n        decimalLatitude: -23.43563,\n        decimalLongitude: 22.45634\n    },\n    {\n        verbatimCoordinates: '27,71372 S 23,07771 E',\n        verbatimLatitude: '27,71372 S',\n        verbatimLongitude: '23,07771 E',\n        decimalLatitude: -27.71372,\n        decimalLongitude: 23.07771\n    },\n    {\n        verbatimCoordinates: '27.45.34 S 23.23.23 E',\n        verbatimLatitude: '27.45.34 S',\n        verbatimLongitude: '23.23.23 E',\n        decimalLatitude: -27.759444,\n        decimalLongitude: 23.38972222\n    },\n    {\n        verbatimCoordinates: 'S 27.45.34 E 23.23.23',\n        verbatimLatitude: 'S 27.45.34',\n        verbatimLongitude: 'E 23.23.23',\n        decimalLatitude: -27.759444,\n        decimalLongitude: 23.38972222\n    },\n    {\n        verbatimCoordinates: '53 16.3863,4 52.8171',\n        verbatimLatitude: '53 16.3863',\n        verbatimLongitude: '4 52.8171',\n        decimalLatitude: 53.273105,\n        decimalLongitude: 4.88029\n    },\n    {\n        verbatimCoordinates: '50 8.2914,-5 2.4447',\n        verbatimLatitude: '50 8.2914',\n        verbatimLongitude: '-5 2.4447',\n        decimalLatitude: 50.13819,\n        decimalLongitude: -5.040745\n    },\n    {\n        verbatimCoordinates: `N 48 30,6410', E 18 57,4583'`,\n        verbatimLatitude: `N 48 30,6410'`,\n        verbatimLongitude: `E 18 57,4583'`,\n        decimalLatitude: 48.51068,\n        decimalLongitude: 18.95764\n    },\n    {\n        verbatimCoordinates: `1.23456, 18.33453`,\n        verbatimLatitude: `1.23456`,\n        verbatimLongitude: `18.33453`,\n        decimalLatitude: 1.23456,\n        decimalLongitude: 18.33453\n    }\n];\nfunction getAllTestFormats() {\n    const arr1 = [];\n    coordsParserFormats.forEach(item => {\n        if (item.decimalLatitude) {\n            arr1.push(item);\n        }\n        else {\n            arr1.push({ ...item, ...coordsParserDecimals });\n        }\n    });\n    return [...arr1, ...coordsRegexFormats, ...otherFormats];\n}\nexport default getAllTestFormats();\n","//adds the formats to the convert object\n//we need to use this as the source for the npm package so that the formats are not included in the bundle\nimport converter from './converter.js';\nimport testFormats from './tests/testformats.js';\nconverter.formats = testFormats.map(format => format.verbatimCoordinates);\nexport const convert = converter;\n","<script lang=\"ts\">\n  import { createEventDispatcher, onDestroy } from \"svelte\";\n  import { default as ClearIcon } from \"./ClearIcon.svelte\";\n  import { default as FailIcon } from \"./FailIcon.svelte\";\n  import { default as FeatureItem } from \"./FeatureItem.svelte\";\n  import { default as LoadingIcon } from \"./LoadingIcon.svelte\";\n  import MarkerIcon from \"./MarkerIcon.svelte\";\n  import { default as ReverseGeocodingIcon } from \"./ReverseGeocodingIcon.svelte\";\n  import { default as SearchIcon } from \"./SearchIcon.svelte\";\n  import { unwrapBbox, wrapNum } from \"./geoUtils\";\n  import { getProximity } from \"./proximity\";\n  import { convert } from \"geo-coordinates-parser\";\n  import type {\n    BBox,\n    DispatcherType,\n    EnableReverse,\n    Feature,\n    FeatureCollection,\n    MapController,\n    PickedResultStyle,\n    ProximityRule,\n    ShowPlaceType,\n    TypeRule,\n  } from \"./types\";\n\n  export const ZOOM_DEFAULTS: Record<string, number> = {\n    continental_marine: 4,\n    country: 4,\n    major_landform: 8,\n    region: 5,\n    subregion: 6,\n    county: 7,\n    joint_municipality: 8,\n    joint_submunicipality: 9,\n    municipality: 10,\n    municipal_district: 11,\n    locality: 12,\n    neighbourhood: 13,\n    place: 14,\n    postal_code: 14,\n    road: 16,\n    poi: 17,\n    address: 18,\n    \"poi.peak\": 15,\n    \"poi.shop\": 18,\n    \"poi.cafe\": 18,\n    \"poi.restaurant\": 18,\n    \"poi.aerodrome\": 13,\n    // TODO add many more\n  };\n\n  let className: string | undefined = undefined;\n\n  export { className as class };\n\n  export let apiKey: string;\n\n  export let bbox: BBox | undefined = undefined;\n\n  export let clearButtonTitle = \"clear\";\n\n  export let clearOnBlur = false;\n\n  export let clearListOnPick = false;\n\n  export let keepListOpen = false;\n\n  export let collapsed = false;\n\n  export let country: string | string[] | undefined = undefined;\n\n  export let debounceSearch = 200;\n\n  export let enableReverse: EnableReverse = \"never\";\n\n  export let errorMessage = \"Something went wrong\";\n\n  export let filter: (feature: Feature) => boolean = () => true;\n\n  export let flyTo = true;\n\n  export let fuzzyMatch = true;\n\n  export let language: string | string[] | null | undefined = undefined;\n\n  export let limit: number | undefined = undefined;\n\n  const COPY_LIMIT = +41415112612;\n\n  export let reverseGeocodingLimit: number | undefined = COPY_LIMIT;\n\n  export let mapController: MapController | undefined = undefined;\n\n  export let minLength = 2;\n\n  export let noResultsMessage =\n    \"Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!\";\n\n  export let placeholder = \"Search\";\n\n  export let proximity: ProximityRule[] | null | undefined = [\n    { type: \"server-geolocation\" },\n  ];\n\n  export let reverseActive = enableReverse === \"always\";\n\n  export let reverseButtonTitle = \"toggle reverse geocoding\";\n\n  export let searchValue = \"\";\n\n  export let pickedResultStyle: PickedResultStyle = \"full-geometry\";\n\n  export let showPlaceType: ShowPlaceType = \"if-needed\";\n\n  export let showResultsWhileTyping = true;\n\n  export let selectFirst = true;\n\n  export let flyToSelected = false;\n\n  export let markerOnSelected = true;\n\n  export let types: TypeRule[] | undefined = undefined;\n\n  const COPY_TYPES: TypeRule[] = [];\n\n  export let reverseGeocodingTypes: TypeRule[] | undefined = COPY_TYPES;\n\n  export let exhaustiveReverseGeocoding = false;\n\n  export let excludeTypes = false;\n\n  const COPY_EXCLUDE_TYPES = undefined;\n\n  export let reverseGeocodingExcludeTypes: boolean | undefined =\n    COPY_EXCLUDE_TYPES;\n\n  export let zoom: Record<string, number> = ZOOM_DEFAULTS;\n\n  export let apiUrl: string = import.meta.env.VITE_API_URL;\n\n  export let fetchParameters: RequestInit = {};\n\n  export let iconsBaseUrl =\n    \"https://cdn.maptiler.com/maptiler-geocoding-control/v\" +\n    import.meta.env.VITE_LIB_VERSION +\n    \"/icons/\";\n\n  /**\n   * @deprecated use `adjustUrl`\n   */\n  export let adjustUrlQuery: (sp: URLSearchParams) => void = () => {};\n\n  /**\n   * Adjust geocoding URL before the fetch.\n   */\n  export let adjustUrl: (url: URL) => void = () => {};\n\n  /**\n   * Focus the search input box.\n   *\n   * @param options [FocusOptions](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus#options)\n   */\n  export function focus(options?: FocusOptions) {\n    input.focus(options);\n  }\n\n  /**\n   * Blur the search input box.\n   */\n  export function blur() {\n    input.blur();\n  }\n\n  /**\n   * Set the content of search input box.\n   *\n   * @param value text to set\n   * @param submit perform the search\n   */\n  export function setQuery(value: string, submit = true, reverse = false) {\n    searchValue = value;\n\n    if (submit) {\n      selectedItemIndex = -1;\n\n      handleSubmit();\n    } else {\n      handleInput(undefined, !reverse, reverse);\n\n      setTimeout(() => {\n        input.focus();\n        input.select();\n      });\n    }\n  }\n\n  /**\n   * Clear search result list.\n   */\n  export function clearList() {\n    listFeatures = undefined;\n    picked = undefined;\n    selectedItemIndex = -1;\n  }\n\n  /**\n   * Clear geocoding search results from the map.\n   */\n  export function clearMap() {\n    markedFeatures = [];\n    picked = undefined;\n  }\n\n  let listFeatures: Feature[] | undefined;\n\n  let markedFeatures: Feature[] | undefined;\n\n  let picked: Feature | undefined;\n\n  let lastSearchUrl = \"\";\n\n  let input: HTMLInputElement;\n\n  let selectedItemIndex = -1;\n\n  let error: unknown;\n\n  let cachedFeatures: Feature[] = [];\n\n  let abortController: AbortController | undefined;\n\n  let searchTimeoutRef: number | undefined;\n\n  let focusedDelayed: boolean;\n\n  let prevIdToFly: string | undefined;\n\n  let focused = false;\n\n  const missingIconsCache = new Set<string>();\n\n  const dispatch = createEventDispatcher<DispatcherType>();\n\n  $: reverseActive = enableReverse === \"always\";\n\n  $: if (\n    pickedResultStyle !== \"marker-only\" &&\n    picked &&\n    !picked.address &&\n    picked.geometry.type === \"Point\" &&\n    picked.place_type[0] !== \"reverse\"\n  ) {\n    search(picked.id, { byId: true }).catch((err) => (error = err));\n  }\n\n  $: {\n    if (mapController && picked && picked.id !== prevIdToFly && flyTo) {\n      goToPicked();\n\n      if (clearListOnPick) {\n        listFeatures = undefined;\n      }\n\n      markedFeatures = undefined;\n      selectedItemIndex = -1;\n    }\n\n    prevIdToFly = picked?.id;\n  }\n\n  $: if (mapController && selected && flyTo && flyToSelected) {\n    mapController.flyTo(selected.center, computeZoom(selected));\n  }\n\n  $: showPolygonMarker =\n    pickedResultStyle === \"full-geometry-including-polygon-center-marker\";\n\n  // if markerOnSelected was dynamically changed to false\n  $: if (!markerOnSelected) {\n    mapController?.setFeatures(undefined, undefined, showPolygonMarker);\n  }\n\n  $: if (mapController && markerOnSelected && !markedFeatures) {\n    mapController.setFeatures(\n      selected ? [selected] : undefined,\n      picked,\n      showPolygonMarker,\n    );\n\n    mapController.setSelectedMarker(selected ? 0 : -1);\n  }\n\n  $: if (markedFeatures !== listFeatures) {\n    markedFeatures = undefined;\n  }\n\n  $: if (mapController) {\n    mapController.setFeatures(markedFeatures, picked, showPolygonMarker);\n  }\n\n  $: if (searchValue.length < minLength) {\n    listFeatures = undefined;\n    error = undefined;\n    markedFeatures = listFeatures;\n  }\n\n  // highlight selected marker\n  $: if (markedFeatures && mapController) {\n    mapController.setSelectedMarker(selectedItemIndex);\n  }\n\n  // close dropdown in the next cycle so that the selected item event has the chance to fire\n  $: setTimeout(() => {\n    focusedDelayed = focused;\n\n    if (clearOnBlur && !focusedDelayed) {\n      searchValue = \"\";\n    }\n  });\n\n  $: if (\n    selectFirst &&\n    listFeatures?.length &&\n    selectedItemIndex == -1 &&\n    !picked\n  ) {\n    selectedItemIndex = 0;\n  }\n\n  $: selected = listFeatures?.[selectedItemIndex];\n\n  $: if (mapController) {\n    const coords = isQueryReverse(searchValue);\n\n    mapController.setReverseMarker(\n      coords ? [coords.decimalLongitude, coords.decimalLatitude] : undefined,\n    );\n  }\n\n  $: dispatch(\"select\", { feature: selected });\n\n  $: dispatch(\"pick\", { feature: picked });\n\n  $: optionsVisible =\n    !!listFeatures?.length && (focusedDelayed || keepListOpen);\n\n  $: dispatch(\"optionsvisibilitychange\", { optionsVisible });\n\n  $: dispatch(\"featureslisted\", { features: listFeatures });\n\n  $: dispatch(\"featuresmarked\", { features: markedFeatures });\n\n  $: dispatch(\"reversetoggle\", { reverse: reverseActive });\n\n  $: dispatch(\"querychange\", { query: searchValue });\n\n  $: if (mapController) {\n    mapController.indicateReverse(reverseActive);\n  }\n\n  $: if (mapController) {\n    mapController.setEventHandler((e) => {\n      switch (e.type) {\n        case \"mapClick\":\n          if (reverseActive) {\n            handleReverse(e.coordinates);\n          }\n\n          break;\n        case \"markerClick\":\n          {\n            const feature = listFeatures?.find(\n              (feature) => feature.id === e.id,\n            );\n\n            if (feature) {\n              pick(feature);\n            }\n          }\n\n          break;\n        case \"markerMouseEnter\":\n          if (markedFeatures) {\n            selectedItemIndex = !focusedDelayed\n              ? -1\n              : (listFeatures?.findIndex((feature) => feature.id === e.id) ??\n                -1);\n          }\n\n          break;\n        case \"markerMouseLeave\":\n          if (markedFeatures) {\n            selectedItemIndex = -1;\n          }\n\n          break;\n      }\n    });\n  }\n\n  onDestroy(() => {\n    if (mapController) {\n      mapController.setEventHandler(undefined);\n      mapController.indicateReverse(false);\n      mapController.setSelectedMarker(-1);\n      mapController.setFeatures(undefined, undefined, false);\n    }\n  });\n\n  function handleSubmit(event?: unknown) {\n    focused = false;\n\n    if (searchTimeoutRef) {\n      clearTimeout(searchTimeoutRef);\n\n      searchTimeoutRef = undefined;\n    }\n\n    if (selectedItemIndex > -1 && listFeatures) {\n      picked = listFeatures[selectedItemIndex];\n\n      searchValue =\n        picked.place_type[0] === \"reverse\"\n          ? picked.place_name\n          : picked.place_name.replace(/,.*/, \"\");\n\n      error = undefined;\n\n      markedFeatures = undefined;\n\n      selectedItemIndex = -1;\n    } else if (searchValue) {\n      const zoomTo = event || !isQueryReverse(searchValue);\n\n      search(searchValue, { exact: true })\n        .then(() => {\n          markedFeatures = listFeatures;\n\n          picked = undefined;\n\n          if (zoomTo) {\n            zoomToResults();\n          }\n        })\n        .catch((err) => (error = err));\n    }\n  }\n\n  function isQueryReverse(searchValue: string) {\n    try {\n      return convert(searchValue, 6);\n    } catch {\n      return false;\n    }\n  }\n\n  async function search(\n    searchValue: string,\n    {\n      byId = false,\n      exact = false,\n    }: undefined | { byId?: boolean; exact?: boolean } = {},\n  ) {\n    error = undefined;\n\n    abortController?.abort();\n\n    const ac = new AbortController();\n\n    abortController = ac;\n\n    try {\n      const isReverse = isQueryReverse(searchValue);\n\n      const urlObj = new URL(\n        apiUrl +\n          \"/\" +\n          encodeURIComponent(\n            isReverse\n              ? isReverse.decimalLongitude + \",\" + isReverse.decimalLatitude\n              : searchValue,\n          ) +\n          \".json\",\n      );\n\n      const sp = urlObj.searchParams;\n\n      if (language !== undefined) {\n        sp.set(\n          \"language\",\n          Array.isArray(language) ? language.join(\",\") : (language ?? \"\"),\n        );\n      }\n\n      const [zoom] = mapController?.getCenterAndZoom() ?? [];\n\n      let effTypes = (\n        !isReverse || reverseGeocodingTypes === COPY_TYPES\n          ? types\n          : reverseGeocodingTypes\n      )\n        ?.map((typeRule) =>\n          typeof typeRule === \"string\"\n            ? typeRule\n            : zoom === undefined ||\n                ((typeRule[0] ?? 0) <= zoom && zoom < (typeRule[1] ?? Infinity))\n              ? typeRule[2]\n              : undefined,\n        )\n        .filter((type) => type !== undefined);\n\n      if (effTypes) {\n        effTypes = [...new Set(effTypes)];\n\n        sp.set(\"types\", effTypes.join(\",\"));\n      }\n\n      const effExcludeTypes =\n        !isReverse || reverseGeocodingExcludeTypes === COPY_EXCLUDE_TYPES\n          ? excludeTypes\n          : reverseGeocodingExcludeTypes;\n\n      if (effExcludeTypes) {\n        sp.set(\"excludeTypes\", String(effExcludeTypes));\n      }\n\n      if (bbox) {\n        sp.set(\"bbox\", bbox.map((c) => c.toFixed(6)).join(\",\"));\n      }\n\n      if (country) {\n        sp.set(\"country\", Array.isArray(country) ? country.join(\",\") : country);\n      }\n\n      if (!byId && !isReverse) {\n        const coords = await getProximity(mapController, proximity, ac);\n\n        if (coords) {\n          sp.set(\"proximity\", coords);\n        }\n\n        if (exact || !showResultsWhileTyping) {\n          sp.set(\"autocomplete\", \"false\");\n        }\n\n        sp.set(\"fuzzyMatch\", String(fuzzyMatch));\n      }\n\n      const effReverseGeocodingLimit =\n        reverseGeocodingLimit === COPY_LIMIT ? limit : reverseGeocodingLimit;\n\n      if (\n        effReverseGeocodingLimit !== undefined &&\n        effReverseGeocodingLimit > 1 &&\n        effTypes?.length !== 1\n      ) {\n        console.warn(\n          \"For reverse geocoding when limit > 1 then types must contain single value.\",\n        );\n      }\n\n      if (isReverse) {\n        if (\n          effReverseGeocodingLimit === 1 ||\n          (effReverseGeocodingLimit !== undefined &&\n            (exhaustiveReverseGeocoding || effTypes?.length === 1))\n        ) {\n          sp.set(\"limit\", String(effReverseGeocodingLimit));\n        }\n      } else if (limit !== undefined) {\n        sp.set(\"limit\", String(limit));\n      }\n\n      sp.set(\"key\", apiKey);\n\n      adjustUrlQuery(sp);\n\n      adjustUrl(urlObj);\n\n      const noTypes =\n        urlObj.searchParams.get(\"types\") === \"\" &&\n        urlObj.searchParams.get(\"excludeTypes\") !== \"true\";\n\n      const url = urlObj.toString();\n\n      if (url === lastSearchUrl) {\n        if (byId) {\n          if (clearListOnPick) {\n            listFeatures = undefined;\n          }\n\n          picked = cachedFeatures[0];\n        } else {\n          listFeatures = cachedFeatures;\n\n          if (listFeatures[selectedItemIndex]?.id !== selected?.id) {\n            selectedItemIndex = -1;\n          }\n        }\n\n        return;\n      }\n\n      lastSearchUrl = url;\n\n      let featureCollection: FeatureCollection;\n\n      if (noTypes) {\n        featureCollection = { type: \"FeatureCollection\", features: [] };\n      } else {\n        const res = await fetch(url, {\n          signal: ac.signal,\n          ...fetchParameters,\n        });\n\n        if (!res.ok) {\n          throw new Error(await res.text());\n        }\n\n        featureCollection = await res.json();\n      }\n\n      dispatch(\"response\", { url, featureCollection });\n\n      if (byId) {\n        if (clearListOnPick) {\n          listFeatures = undefined;\n        }\n\n        picked = featureCollection.features[0];\n\n        cachedFeatures = [picked];\n      } else {\n        listFeatures = featureCollection.features.filter(filter);\n\n        if (isReverse) {\n          listFeatures.unshift({\n            type: \"Feature\",\n            properties: {},\n            id:\n              \"reverse_\" +\n              isReverse.decimalLongitude +\n              \"_\" +\n              isReverse.decimalLatitude,\n            text: isReverse.decimalLatitude + \", \" + isReverse.decimalLongitude,\n            place_name:\n              isReverse.decimalLatitude + \", \" + isReverse.decimalLongitude,\n            place_type: [\"reverse\"],\n            center: [isReverse.decimalLongitude, isReverse.decimalLatitude],\n            bbox: [\n              isReverse.decimalLongitude,\n              isReverse.decimalLatitude,\n              isReverse.decimalLongitude,\n              isReverse.decimalLatitude,\n            ],\n            geometry: {\n              type: \"Point\",\n              coordinates: [\n                isReverse.decimalLongitude,\n                isReverse.decimalLatitude,\n              ],\n            },\n          });\n        }\n\n        cachedFeatures = listFeatures;\n\n        if (listFeatures[selectedItemIndex]?.id !== selected?.id) {\n          selectedItemIndex = -1;\n        }\n\n        if (isReverse) {\n          input.focus();\n        }\n      }\n    } catch (e) {\n      if (\n        e &&\n        typeof e === \"object\" &&\n        \"name\" in e &&\n        e.name === \"AbortError\"\n      ) {\n        return;\n      }\n\n      throw e;\n    } finally {\n      if (ac === abortController) {\n        abortController = undefined;\n      }\n    }\n  }\n\n  function zoomToResults() {\n    if (!markedFeatures?.length || !flyTo) {\n      return;\n    }\n\n    const bbox: BBox = [180, 90, -180, -90];\n\n    const fuzzyOnly = !markedFeatures.some((feature) => !feature.matching_text);\n\n    let allZoom: number | undefined;\n\n    for (const feature of markedFeatures) {\n      const featZoom = computeZoom(feature);\n\n      allZoom =\n        allZoom === undefined\n          ? featZoom\n          : featZoom === undefined\n            ? allZoom\n            : Math.max(allZoom, featZoom);\n\n      if (fuzzyOnly || !feature.matching_text) {\n        for (const i of [0, 1, 2, 3] as const) {\n          bbox[i] = Math[i < 2 ? \"min\" : \"max\"](\n            bbox[i],\n            feature.bbox?.[i] ?? feature.center[i % 2],\n          );\n        }\n      }\n    }\n\n    if (mapController && markedFeatures.length > 0) {\n      if (picked && bbox[0] === bbox[2] && bbox[1] === bbox[3]) {\n        mapController.flyTo(picked.center, computeZoom(picked));\n      } else {\n        mapController.fitBounds(unwrapBbox(bbox), 50, allZoom);\n      }\n    }\n  }\n\n  function goToPicked() {\n    if (!picked || !mapController) {\n      return;\n    }\n\n    if (\n      !picked.bbox ||\n      (picked.bbox[0] === picked.bbox[2] && picked.bbox[1] === picked.bbox[3])\n    ) {\n      mapController.flyTo(picked.center, computeZoom(picked));\n    } else {\n      mapController.fitBounds(unwrapBbox(picked.bbox), 50, computeZoom(picked));\n    }\n  }\n\n  function computeZoom(feature: Feature): number | undefined {\n    if (\n      !feature.bbox ||\n      (feature.bbox[0] !== feature.bbox[2] &&\n        feature.bbox[1] !== feature.bbox[3])\n    ) {\n      return undefined;\n    }\n\n    const index = feature.id.replace(/\\..*/, \"\");\n\n    return (\n      (Array.isArray(feature.properties?.categories)\n        ? (feature.properties.categories as string[]).reduce(\n            (a, category) => {\n              const b = zoom[index + \".\" + category];\n\n              return a === undefined ? b : b === undefined ? a : Math.max(a, b);\n            },\n            undefined as undefined | number,\n          )\n        : undefined) ?? zoom[index]\n    );\n  }\n\n  function handleReverse(coordinates: [lng: number, lat: number]) {\n    reverseActive = enableReverse === \"always\";\n\n    listFeatures = undefined;\n    picked = undefined;\n    selectedItemIndex = -1;\n\n    setQuery(\n      coordinates[1].toFixed(6) +\n        \", \" +\n        wrapNum(coordinates[0], [-180, 180], true).toFixed(6),\n      false,\n      true,\n    );\n  }\n\n  function handleKeyDown(e: KeyboardEvent) {\n    if (!listFeatures) {\n      return;\n    }\n\n    let dir = e.key === \"ArrowDown\" ? 1 : e.key === \"ArrowUp\" ? -1 : 0;\n\n    if (!dir) {\n      return;\n    }\n\n    input.focus();\n\n    focused = true;\n\n    e.preventDefault();\n\n    if (picked && selectedItemIndex === -1) {\n      selectedItemIndex = listFeatures.findIndex(\n        (listFeature) => listFeature.id === picked?.id,\n      );\n    }\n\n    if (selectedItemIndex === (picked || selectFirst ? 0 : -1) && dir === -1) {\n      selectedItemIndex = listFeatures.length;\n    }\n\n    selectedItemIndex += dir;\n\n    if (selectedItemIndex >= listFeatures.length) {\n      selectedItemIndex = -1;\n    }\n\n    if (selectedItemIndex < 0 && (picked || selectFirst)) {\n      selectedItemIndex = 0;\n    }\n  }\n\n  function handleInput(_?: Event, debounce = true, reverse = false) {\n    error = undefined;\n    picked = undefined;\n    focused = true;\n\n    if (showResultsWhileTyping || reverse) {\n      if (searchTimeoutRef) {\n        clearTimeout(searchTimeoutRef);\n      }\n\n      if (searchValue.length < minLength) {\n        return;\n      }\n\n      const sv = searchValue;\n\n      searchTimeoutRef = window.setTimeout(\n        () => {\n          search(sv).catch((err) => (error = err));\n        },\n        debounce ? debounceSearch : 0,\n      );\n    } else {\n      listFeatures = undefined;\n      error = undefined;\n    }\n  }\n\n  function pick(feature: Feature) {\n    if (picked && picked?.id === feature?.id) {\n      goToPicked();\n    } else {\n      picked = feature;\n      searchValue = feature.place_name;\n    }\n  }\n\n  function handleMouseEnter(index: number) {\n    selectedItemIndex = index;\n  }\n\n  function handleMouseLeave() {\n    if (!selectFirst || picked) {\n      selectedItemIndex = -1;\n    }\n\n    // re-focus on picked\n    if (flyToSelected) {\n      goToPicked();\n    }\n  }\n</script>\n\n{#if false}\n  <!-- This workaround is just to use marker styles. Bug in svlete/vite? Investigate. -->\n  <MarkerIcon displayIn=\"list\" />\n{/if}\n\n<form\n  on:submit|preventDefault={handleSubmit}\n  class:can-collapse={collapsed && searchValue === \"\"}\n  class={className}\n>\n  <div class=\"input-group\">\n    <button class=\"search-button\" type=\"button\" on:click={() => input.focus()}>\n      <SearchIcon />\n    </button>\n\n    <input\n      bind:this={input}\n      bind:value={searchValue}\n      on:focus={() => (focused = true)}\n      on:blur={() => (focused = false)}\n      on:click={() => (focused = true)}\n      on:keydown={handleKeyDown}\n      on:input={handleInput}\n      on:change={() => (picked = undefined)}\n      {placeholder}\n      aria-label={placeholder}\n    />\n\n    <div class=\"clear-button-container\" class:displayable={searchValue !== \"\"}>\n      <button\n        type=\"button\"\n        on:click={() => {\n          searchValue = \"\";\n          picked = undefined;\n          input.focus();\n        }}\n        title={clearButtonTitle}\n      >\n        <ClearIcon />\n      </button>\n\n      {#if abortController}\n        <LoadingIcon />\n      {/if}\n    </div>\n\n    {#if enableReverse === \"button\"}\n      <button\n        type=\"button\"\n        class:active={reverseActive}\n        title={reverseButtonTitle}\n        on:click={() => (reverseActive = !reverseActive)}\n      >\n        <ReverseGeocodingIcon />\n      </button>\n    {/if}\n\n    <slot />\n  </div>\n\n  {#if error}\n    <div class=\"error\">\n      <FailIcon />\n\n      <div>{errorMessage}</div>\n\n      <button on:click={() => (error = undefined)}>\n        <ClearIcon />\n      </button>\n    </div>\n  {:else if !focusedDelayed && !keepListOpen}\n    {\"\"}\n  {:else if listFeatures?.length === 0}\n    <div class=\"no-results\">\n      <FailIcon />\n\n      <div>{noResultsMessage}</div>\n    </div>\n  {:else if listFeatures?.length && (focusedDelayed || keepListOpen)}\n    <ul\n      class=\"options\"\n      on:mouseleave={handleMouseLeave}\n      on:blur={() => undefined}\n      on:keydown={handleKeyDown}\n      role=\"listbox\"\n    >\n      {#each listFeatures as feature, i (feature.id + (feature.address ? \",\" + feature.address : \"\"))}\n        <FeatureItem\n          {feature}\n          {showPlaceType}\n          style={selectedItemIndex === i\n            ? \"selected\"\n            : picked?.id === feature.id\n              ? \"picked\"\n              : \"default\"}\n          on:mouseenter={() => handleMouseEnter(i)}\n          on:select={() => pick(feature)}\n          {missingIconsCache}\n          {iconsBaseUrl}\n        />\n      {/each}\n    </ul>\n  {/if}\n</form>\n\n<style lang=\"scss\">\n  form {\n    font-family: \"Open Sans\", \"Ubuntu\", \"Helvetica Neue\", Arial, Helvetica,\n      sans-serif;\n    position: relative;\n    background-color: #fff;\n    z-index: 10;\n    border-radius: 4px;\n    margin: 0;\n    transition: max-width 0.25s;\n    box-shadow: 0px 2px 5px rgba(51, 51, 89, 0.15);\n    --color-text: #444952;\n    --color-icon-button: #444952;\n\n    &,\n    & *,\n    & *:after,\n    & *:before {\n      box-sizing: border-box;\n    }\n\n    &.can-collapse {\n      max-width: 29px;\n\n      & input::placeholder {\n        transition: opacity 0.25s;\n        opacity: 0;\n      }\n    }\n\n    &,\n    &:focus-within,\n    &:hover {\n      width: 270px;\n      max-width: 270px;\n\n      & input::placeholder {\n        opacity: 1;\n      }\n    }\n  }\n\n  input {\n    font: inherit;\n    font-size: 14px;\n    flex-grow: 1;\n    min-height: 29px;\n    background-color: transparent;\n    color: #444952;\n    white-space: nowrap;\n    overflow: hidden;\n    border: 0;\n    margin: 0;\n    padding: 0;\n\n    &:focus {\n      color: #444952;\n      outline: 0;\n      outline: none;\n      box-shadow: none;\n    }\n  }\n\n  ul,\n  div.error,\n  div.no-results {\n    background-color: #fff;\n    border-radius: 4px;\n    left: 0;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    position: absolute;\n    width: 100%;\n    top: calc(100% + 6px);\n    overflow: hidden;\n  }\n\n  ul {\n    font-size: 14px;\n    line-height: 16px;\n    box-shadow: 0px 5px 10px rgba(51, 51, 89, 0.15);\n  }\n\n  div.error,\n  div.no-results {\n    font: inherit;\n    line-height: 18px;\n    font-size: 12px;\n    display: flex;\n    gap: 16px;\n  }\n\n  div.error {\n    padding: 16px;\n    font-weight: 600;\n    color: #e25041;\n    background-color: #fbeae8;\n\n    div {\n      flex-grow: 1;\n    }\n\n    :global(svg) {\n      flex-shrink: 0;\n      width: 20px;\n      height: 20px;\n    }\n\n    button {\n      flex-shrink: 0;\n      & > :global(svg) {\n        width: 13px;\n        fill: #e25041;\n      }\n\n      &:hover :global(svg),\n      &:active :global(svg) {\n        fill: #444952;\n      }\n    }\n  }\n\n  div.no-results {\n    padding: 14px 24px 14px 16px;\n    font-weight: 400;\n    color: #6b7c93;\n    box-shadow: 0px 5px 10px rgba(51, 51, 89, 0.15);\n\n    :global(svg) {\n      margin-top: 4px;\n      flex-shrink: 0;\n      width: 20px;\n      height: 20px;\n      width: 30px;\n      height: 30px;\n    }\n  }\n\n  :global(.leaflet-bottom) ul.options,\n  :global(.maplibregl-ctrl-bottom-left) ul.options,\n  :global(.maplibregl-ctrl-bottom-right) ul.options {\n    top: auto;\n    bottom: calc(100% + 6px);\n  }\n\n  button {\n    padding: 0;\n    margin: 0;\n    border: 0;\n    background-color: transparent;\n    height: auto;\n    width: auto;\n\n    &:hover {\n      background-color: transparent;\n    }\n  }\n\n  button:hover :global(svg),\n  button:active :global(svg) {\n    fill: #2b8bfb;\n  }\n\n  .input-group {\n    display: flex;\n    align-items: stretch;\n    gap: 7px;\n    padding-inline: 8px;\n    border-radius: 4px;\n    overflow: hidden;\n\n    &:focus-within {\n      outline: #2b8bfb solid 2px;\n    }\n  }\n\n  .search-button {\n    flex-shrink: 0;\n  }\n\n  :global(.maplibregl-ctrl-geocoder:not(.maptiler-ctrl) .search-button svg) {\n    width: 12px !important;\n    transform: translate(0.5px, 0);\n  }\n\n  .clear-button-container {\n    display: flex;\n    display: none;\n    position: relative;\n    align-items: stretch;\n\n    &.displayable {\n      display: flex;\n      flex-shrink: 0;\n    }\n  }\n\n  :global(.maplibregl-ctrl-geocoder) {\n    position: relative;\n    z-index: 3;\n  }\n\n  :global(.maptiler-ctrl) {\n    &:not(:empty) {\n      box-shadow: none;\n    }\n\n    & .input-group {\n      padding-inline: 8px;\n      border: white solid 2px;\n\n      &:focus-within {\n        border: #2b8bfb solid 2px;\n        outline: 0;\n        outline: none;\n      }\n    }\n\n    & form {\n      &.can-collapse {\n        max-width: 33px;\n      }\n\n      &,\n      &:focus-within,\n      &:hover {\n        width: 270px;\n        max-width: 270px;\n      }\n    }\n  }\n</style>\n","// index.ts\nvar earthRadius = 63710088e-1;\nvar factors = {\n  centimeters: earthRadius * 100,\n  centimetres: earthRadius * 100,\n  degrees: 360 / (2 * Math.PI),\n  feet: earthRadius * 3.28084,\n  inches: earthRadius * 39.37,\n  kilometers: earthRadius / 1e3,\n  kilometres: earthRadius / 1e3,\n  meters: earthRadius,\n  metres: earthRadius,\n  miles: earthRadius / 1609.344,\n  millimeters: earthRadius * 1e3,\n  millimetres: earthRadius * 1e3,\n  nauticalmiles: earthRadius / 1852,\n  radians: 1,\n  yards: earthRadius * 1.0936\n};\nvar areaFactors = {\n  acres: 247105e-9,\n  centimeters: 1e4,\n  centimetres: 1e4,\n  feet: 10.763910417,\n  hectares: 1e-4,\n  inches: 1550.003100006,\n  kilometers: 1e-6,\n  kilometres: 1e-6,\n  meters: 1,\n  metres: 1,\n  miles: 386e-9,\n  nauticalmiles: 29155334959812285e-23,\n  millimeters: 1e6,\n  millimetres: 1e6,\n  yards: 1.195990046\n};\nfunction feature(geom, properties, options = {}) {\n  const feat = { type: \"Feature\" };\n  if (options.id === 0 || options.id) {\n    feat.id = options.id;\n  }\n  if (options.bbox) {\n    feat.bbox = options.bbox;\n  }\n  feat.properties = properties || {};\n  feat.geometry = geom;\n  return feat;\n}\nfunction geometry(type, coordinates, _options = {}) {\n  switch (type) {\n    case \"Point\":\n      return point(coordinates).geometry;\n    case \"LineString\":\n      return lineString(coordinates).geometry;\n    case \"Polygon\":\n      return polygon(coordinates).geometry;\n    case \"MultiPoint\":\n      return multiPoint(coordinates).geometry;\n    case \"MultiLineString\":\n      return multiLineString(coordinates).geometry;\n    case \"MultiPolygon\":\n      return multiPolygon(coordinates).geometry;\n    default:\n      throw new Error(type + \" is invalid\");\n  }\n}\nfunction point(coordinates, properties, options = {}) {\n  if (!coordinates) {\n    throw new Error(\"coordinates is required\");\n  }\n  if (!Array.isArray(coordinates)) {\n    throw new Error(\"coordinates must be an Array\");\n  }\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be at least 2 numbers long\");\n  }\n  if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) {\n    throw new Error(\"coordinates must contain numbers\");\n  }\n  const geom = {\n    type: \"Point\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction points(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return point(coords, properties);\n    }),\n    options\n  );\n}\nfunction polygon(coordinates, properties, options = {}) {\n  for (const ring of coordinates) {\n    if (ring.length < 4) {\n      throw new Error(\n        \"Each LinearRing of a Polygon must have 4 or more Positions.\"\n      );\n    }\n    if (ring[ring.length - 1].length !== ring[0].length) {\n      throw new Error(\"First and last Position are not equivalent.\");\n    }\n    for (let j = 0; j < ring[ring.length - 1].length; j++) {\n      if (ring[ring.length - 1][j] !== ring[0][j]) {\n        throw new Error(\"First and last Position are not equivalent.\");\n      }\n    }\n  }\n  const geom = {\n    type: \"Polygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction polygons(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return polygon(coords, properties);\n    }),\n    options\n  );\n}\nfunction lineString(coordinates, properties, options = {}) {\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be an array of two or more positions\");\n  }\n  const geom = {\n    type: \"LineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction lineStrings(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return lineString(coords, properties);\n    }),\n    options\n  );\n}\nfunction featureCollection(features, options = {}) {\n  const fc = { type: \"FeatureCollection\" };\n  if (options.id) {\n    fc.id = options.id;\n  }\n  if (options.bbox) {\n    fc.bbox = options.bbox;\n  }\n  fc.features = features;\n  return fc;\n}\nfunction multiLineString(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiLineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPoint(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPoint\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPolygon(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPolygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction geometryCollection(geometries, properties, options = {}) {\n  const geom = {\n    type: \"GeometryCollection\",\n    geometries\n  };\n  return feature(geom, properties, options);\n}\nfunction round(num, precision = 0) {\n  if (precision && !(precision >= 0)) {\n    throw new Error(\"precision must be a positive number\");\n  }\n  const multiplier = Math.pow(10, precision || 0);\n  return Math.round(num * multiplier) / multiplier;\n}\nfunction radiansToLength(radians, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return radians * factor;\n}\nfunction lengthToRadians(distance, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return distance / factor;\n}\nfunction lengthToDegrees(distance, units) {\n  return radiansToDegrees(lengthToRadians(distance, units));\n}\nfunction bearingToAzimuth(bearing) {\n  let angle = bearing % 360;\n  if (angle < 0) {\n    angle += 360;\n  }\n  return angle;\n}\nfunction azimuthToBearing(angle) {\n  angle = angle % 360;\n  if (angle > 180) {\n    return angle - 360;\n  } else if (angle < -180) {\n    return angle + 360;\n  }\n  return angle;\n}\nfunction radiansToDegrees(radians) {\n  const normalisedRadians = radians % (2 * Math.PI);\n  return normalisedRadians * 180 / Math.PI;\n}\nfunction degreesToRadians(degrees) {\n  const normalisedDegrees = degrees % 360;\n  return normalisedDegrees * Math.PI / 180;\n}\nfunction convertLength(length, originalUnit = \"kilometers\", finalUnit = \"kilometers\") {\n  if (!(length >= 0)) {\n    throw new Error(\"length must be a positive number\");\n  }\n  return radiansToLength(lengthToRadians(length, originalUnit), finalUnit);\n}\nfunction convertArea(area, originalUnit = \"meters\", finalUnit = \"kilometers\") {\n  if (!(area >= 0)) {\n    throw new Error(\"area must be a positive number\");\n  }\n  const startFactor = areaFactors[originalUnit];\n  if (!startFactor) {\n    throw new Error(\"invalid original units\");\n  }\n  const finalFactor = areaFactors[finalUnit];\n  if (!finalFactor) {\n    throw new Error(\"invalid final units\");\n  }\n  return area / startFactor * finalFactor;\n}\nfunction isNumber(num) {\n  return !isNaN(num) && num !== null && !Array.isArray(num);\n}\nfunction isObject(input) {\n  return input !== null && typeof input === \"object\" && !Array.isArray(input);\n}\nfunction validateBBox(bbox) {\n  if (!bbox) {\n    throw new Error(\"bbox is required\");\n  }\n  if (!Array.isArray(bbox)) {\n    throw new Error(\"bbox must be an Array\");\n  }\n  if (bbox.length !== 4 && bbox.length !== 6) {\n    throw new Error(\"bbox must be an Array of 4 or 6 numbers\");\n  }\n  bbox.forEach((num) => {\n    if (!isNumber(num)) {\n      throw new Error(\"bbox must only contain numbers\");\n    }\n  });\n}\nfunction validateId(id) {\n  if (!id) {\n    throw new Error(\"id is required\");\n  }\n  if ([\"string\", \"number\"].indexOf(typeof id) === -1) {\n    throw new Error(\"id must be a number or a string\");\n  }\n}\nexport {\n  areaFactors,\n  azimuthToBearing,\n  bearingToAzimuth,\n  convertArea,\n  convertLength,\n  degreesToRadians,\n  earthRadius,\n  factors,\n  feature,\n  featureCollection,\n  geometry,\n  geometryCollection,\n  isNumber,\n  isObject,\n  lengthToDegrees,\n  lengthToRadians,\n  lineString,\n  lineStrings,\n  multiLineString,\n  multiPoint,\n  multiPolygon,\n  point,\n  points,\n  polygon,\n  polygons,\n  radiansToDegrees,\n  radiansToLength,\n  round,\n  validateBBox,\n  validateId\n};\n//# sourceMappingURL=index.js.map","// index.js\nimport { feature, point, lineString, isObject } from \"@turf/helpers\";\nfunction coordEach(geojson, callback, excludeWrapCoord) {\n  if (geojson === null) return;\n  var j, k, l, geometry, stopG, coords, geometryMaybeCollection, wrapShrink = 0, coordIndex = 0, isGeometryCollection, type = geojson.type, isFeatureCollection = type === \"FeatureCollection\", isFeature = type === \"Feature\", stop = isFeatureCollection ? geojson.features.length : 1;\n  for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n    geometryMaybeCollection = isFeatureCollection ? geojson.features[featureIndex].geometry : isFeature ? geojson.geometry : geojson;\n    isGeometryCollection = geometryMaybeCollection ? geometryMaybeCollection.type === \"GeometryCollection\" : false;\n    stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n    for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n      var multiFeatureIndex = 0;\n      var geometryIndex = 0;\n      geometry = isGeometryCollection ? geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n      if (geometry === null) continue;\n      coords = geometry.coordinates;\n      var geomType = geometry.type;\n      wrapShrink = excludeWrapCoord && (geomType === \"Polygon\" || geomType === \"MultiPolygon\") ? 1 : 0;\n      switch (geomType) {\n        case null:\n          break;\n        case \"Point\":\n          if (callback(\n            coords,\n            coordIndex,\n            featureIndex,\n            multiFeatureIndex,\n            geometryIndex\n          ) === false)\n            return false;\n          coordIndex++;\n          multiFeatureIndex++;\n          break;\n        case \"LineString\":\n        case \"MultiPoint\":\n          for (j = 0; j < coords.length; j++) {\n            if (callback(\n              coords[j],\n              coordIndex,\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex\n            ) === false)\n              return false;\n            coordIndex++;\n            if (geomType === \"MultiPoint\") multiFeatureIndex++;\n          }\n          if (geomType === \"LineString\") multiFeatureIndex++;\n          break;\n        case \"Polygon\":\n        case \"MultiLineString\":\n          for (j = 0; j < coords.length; j++) {\n            for (k = 0; k < coords[j].length - wrapShrink; k++) {\n              if (callback(\n                coords[j][k],\n                coordIndex,\n                featureIndex,\n                multiFeatureIndex,\n                geometryIndex\n              ) === false)\n                return false;\n              coordIndex++;\n            }\n            if (geomType === \"MultiLineString\") multiFeatureIndex++;\n            if (geomType === \"Polygon\") geometryIndex++;\n          }\n          if (geomType === \"Polygon\") multiFeatureIndex++;\n          break;\n        case \"MultiPolygon\":\n          for (j = 0; j < coords.length; j++) {\n            geometryIndex = 0;\n            for (k = 0; k < coords[j].length; k++) {\n              for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                if (callback(\n                  coords[j][k][l],\n                  coordIndex,\n                  featureIndex,\n                  multiFeatureIndex,\n                  geometryIndex\n                ) === false)\n                  return false;\n                coordIndex++;\n              }\n              geometryIndex++;\n            }\n            multiFeatureIndex++;\n          }\n          break;\n        case \"GeometryCollection\":\n          for (j = 0; j < geometry.geometries.length; j++)\n            if (coordEach(geometry.geometries[j], callback, excludeWrapCoord) === false)\n              return false;\n          break;\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n  }\n}\nfunction coordReduce(geojson, callback, initialValue, excludeWrapCoord) {\n  var previousValue = initialValue;\n  coordEach(\n    geojson,\n    function(currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n      if (coordIndex === 0 && initialValue === void 0)\n        previousValue = currentCoord;\n      else\n        previousValue = callback(\n          previousValue,\n          currentCoord,\n          coordIndex,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    },\n    excludeWrapCoord\n  );\n  return previousValue;\n}\nfunction propEach(geojson, callback) {\n  var i;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      for (i = 0; i < geojson.features.length; i++) {\n        if (callback(geojson.features[i].properties, i) === false) break;\n      }\n      break;\n    case \"Feature\":\n      callback(geojson.properties, 0);\n      break;\n  }\n}\nfunction propReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  propEach(geojson, function(currentProperties, featureIndex) {\n    if (featureIndex === 0 && initialValue === void 0)\n      previousValue = currentProperties;\n    else\n      previousValue = callback(previousValue, currentProperties, featureIndex);\n  });\n  return previousValue;\n}\nfunction featureEach(geojson, callback) {\n  if (geojson.type === \"Feature\") {\n    callback(geojson, 0);\n  } else if (geojson.type === \"FeatureCollection\") {\n    for (var i = 0; i < geojson.features.length; i++) {\n      if (callback(geojson.features[i], i) === false) break;\n    }\n  }\n}\nfunction featureReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  featureEach(geojson, function(currentFeature, featureIndex) {\n    if (featureIndex === 0 && initialValue === void 0)\n      previousValue = currentFeature;\n    else previousValue = callback(previousValue, currentFeature, featureIndex);\n  });\n  return previousValue;\n}\nfunction coordAll(geojson) {\n  var coords = [];\n  coordEach(geojson, function(coord) {\n    coords.push(coord);\n  });\n  return coords;\n}\nfunction geomEach(geojson, callback) {\n  var i, j, g, geometry, stopG, geometryMaybeCollection, isGeometryCollection, featureProperties, featureBBox, featureId, featureIndex = 0, isFeatureCollection = geojson.type === \"FeatureCollection\", isFeature = geojson.type === \"Feature\", stop = isFeatureCollection ? geojson.features.length : 1;\n  for (i = 0; i < stop; i++) {\n    geometryMaybeCollection = isFeatureCollection ? geojson.features[i].geometry : isFeature ? geojson.geometry : geojson;\n    featureProperties = isFeatureCollection ? geojson.features[i].properties : isFeature ? geojson.properties : {};\n    featureBBox = isFeatureCollection ? geojson.features[i].bbox : isFeature ? geojson.bbox : void 0;\n    featureId = isFeatureCollection ? geojson.features[i].id : isFeature ? geojson.id : void 0;\n    isGeometryCollection = geometryMaybeCollection ? geometryMaybeCollection.type === \"GeometryCollection\" : false;\n    stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n    for (g = 0; g < stopG; g++) {\n      geometry = isGeometryCollection ? geometryMaybeCollection.geometries[g] : geometryMaybeCollection;\n      if (geometry === null) {\n        if (callback(\n          null,\n          featureIndex,\n          featureProperties,\n          featureBBox,\n          featureId\n        ) === false)\n          return false;\n        continue;\n      }\n      switch (geometry.type) {\n        case \"Point\":\n        case \"LineString\":\n        case \"MultiPoint\":\n        case \"Polygon\":\n        case \"MultiLineString\":\n        case \"MultiPolygon\": {\n          if (callback(\n            geometry,\n            featureIndex,\n            featureProperties,\n            featureBBox,\n            featureId\n          ) === false)\n            return false;\n          break;\n        }\n        case \"GeometryCollection\": {\n          for (j = 0; j < geometry.geometries.length; j++) {\n            if (callback(\n              geometry.geometries[j],\n              featureIndex,\n              featureProperties,\n              featureBBox,\n              featureId\n            ) === false)\n              return false;\n          }\n          break;\n        }\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n    featureIndex++;\n  }\n}\nfunction geomReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  geomEach(\n    geojson,\n    function(currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n      if (featureIndex === 0 && initialValue === void 0)\n        previousValue = currentGeometry;\n      else\n        previousValue = callback(\n          previousValue,\n          currentGeometry,\n          featureIndex,\n          featureProperties,\n          featureBBox,\n          featureId\n        );\n    }\n  );\n  return previousValue;\n}\nfunction flattenEach(geojson, callback) {\n  geomEach(geojson, function(geometry, featureIndex, properties, bbox, id) {\n    var type = geometry === null ? null : geometry.type;\n    switch (type) {\n      case null:\n      case \"Point\":\n      case \"LineString\":\n      case \"Polygon\":\n        if (callback(\n          feature(geometry, properties, { bbox, id }),\n          featureIndex,\n          0\n        ) === false)\n          return false;\n        return;\n    }\n    var geomType;\n    switch (type) {\n      case \"MultiPoint\":\n        geomType = \"Point\";\n        break;\n      case \"MultiLineString\":\n        geomType = \"LineString\";\n        break;\n      case \"MultiPolygon\":\n        geomType = \"Polygon\";\n        break;\n    }\n    for (var multiFeatureIndex = 0; multiFeatureIndex < geometry.coordinates.length; multiFeatureIndex++) {\n      var coordinate = geometry.coordinates[multiFeatureIndex];\n      var geom = {\n        type: geomType,\n        coordinates: coordinate\n      };\n      if (callback(feature(geom, properties), featureIndex, multiFeatureIndex) === false)\n        return false;\n    }\n  });\n}\nfunction flattenReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  flattenEach(\n    geojson,\n    function(currentFeature, featureIndex, multiFeatureIndex) {\n      if (featureIndex === 0 && multiFeatureIndex === 0 && initialValue === void 0)\n        previousValue = currentFeature;\n      else\n        previousValue = callback(\n          previousValue,\n          currentFeature,\n          featureIndex,\n          multiFeatureIndex\n        );\n    }\n  );\n  return previousValue;\n}\nfunction segmentEach(geojson, callback) {\n  flattenEach(geojson, function(feature2, featureIndex, multiFeatureIndex) {\n    var segmentIndex = 0;\n    if (!feature2.geometry) return;\n    var type = feature2.geometry.type;\n    if (type === \"Point\" || type === \"MultiPoint\") return;\n    var previousCoords;\n    var previousFeatureIndex = 0;\n    var previousMultiIndex = 0;\n    var prevGeomIndex = 0;\n    if (coordEach(\n      feature2,\n      function(currentCoord, coordIndex, featureIndexCoord, multiPartIndexCoord, geometryIndex) {\n        if (previousCoords === void 0 || featureIndex > previousFeatureIndex || multiPartIndexCoord > previousMultiIndex || geometryIndex > prevGeomIndex) {\n          previousCoords = currentCoord;\n          previousFeatureIndex = featureIndex;\n          previousMultiIndex = multiPartIndexCoord;\n          prevGeomIndex = geometryIndex;\n          segmentIndex = 0;\n          return;\n        }\n        var currentSegment = lineString(\n          [previousCoords, currentCoord],\n          feature2.properties\n        );\n        if (callback(\n          currentSegment,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex,\n          segmentIndex\n        ) === false)\n          return false;\n        segmentIndex++;\n        previousCoords = currentCoord;\n      }\n    ) === false)\n      return false;\n  });\n}\nfunction segmentReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  var started = false;\n  segmentEach(\n    geojson,\n    function(currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n      if (started === false && initialValue === void 0)\n        previousValue = currentSegment;\n      else\n        previousValue = callback(\n          previousValue,\n          currentSegment,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex,\n          segmentIndex\n        );\n      started = true;\n    }\n  );\n  return previousValue;\n}\nfunction lineEach(geojson, callback) {\n  if (!geojson) throw new Error(\"geojson is required\");\n  flattenEach(geojson, function(feature2, featureIndex, multiFeatureIndex) {\n    if (feature2.geometry === null) return;\n    var type = feature2.geometry.type;\n    var coords = feature2.geometry.coordinates;\n    switch (type) {\n      case \"LineString\":\n        if (callback(feature2, featureIndex, multiFeatureIndex, 0, 0) === false)\n          return false;\n        break;\n      case \"Polygon\":\n        for (var geometryIndex = 0; geometryIndex < coords.length; geometryIndex++) {\n          if (callback(\n            lineString(coords[geometryIndex], feature2.properties),\n            featureIndex,\n            multiFeatureIndex,\n            geometryIndex\n          ) === false)\n            return false;\n        }\n        break;\n    }\n  });\n}\nfunction lineReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  lineEach(\n    geojson,\n    function(currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n      if (featureIndex === 0 && initialValue === void 0)\n        previousValue = currentLine;\n      else\n        previousValue = callback(\n          previousValue,\n          currentLine,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    }\n  );\n  return previousValue;\n}\nfunction findSegment(geojson, options) {\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var segmentIndex = options.segmentIndex || 0;\n  var properties = options.properties;\n  var geometry;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n      if (segmentIndex < 0) segmentIndex = coords.length + segmentIndex - 1;\n      return lineString(\n        [coords[segmentIndex], coords[segmentIndex + 1]],\n        properties,\n        options\n      );\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[geometryIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          coords[geometryIndex][segmentIndex],\n          coords[geometryIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[multiFeatureIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          coords[multiFeatureIndex][segmentIndex],\n          coords[multiFeatureIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[multiFeatureIndex][geometryIndex].length - segmentIndex - 1;\n      return lineString(\n        [\n          coords[multiFeatureIndex][geometryIndex][segmentIndex],\n          coords[multiFeatureIndex][geometryIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\nfunction findPoint(geojson, options) {\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var coordIndex = options.coordIndex || 0;\n  var properties = options.properties;\n  var geometry;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n      return point(coords, properties, options);\n    case \"MultiPoint\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      return point(coords[multiFeatureIndex], properties, options);\n    case \"LineString\":\n      if (coordIndex < 0) coordIndex = coords.length + coordIndex;\n      return point(coords[coordIndex], properties, options);\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[geometryIndex].length + coordIndex;\n      return point(coords[geometryIndex][coordIndex], properties, options);\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[multiFeatureIndex].length + coordIndex;\n      return point(coords[multiFeatureIndex][coordIndex], properties, options);\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[multiFeatureIndex][geometryIndex].length - coordIndex;\n      return point(\n        coords[multiFeatureIndex][geometryIndex][coordIndex],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\nexport {\n  coordAll,\n  coordEach,\n  coordReduce,\n  featureEach,\n  featureReduce,\n  findPoint,\n  findSegment,\n  flattenEach,\n  flattenReduce,\n  geomEach,\n  geomReduce,\n  lineEach,\n  lineReduce,\n  propEach,\n  propReduce,\n  segmentEach,\n  segmentReduce\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { coordEach } from \"@turf/meta\";\nfunction bbox(geojson, options = {}) {\n  if (geojson.bbox != null && true !== options.recompute) {\n    return geojson.bbox;\n  }\n  const result = [Infinity, Infinity, -Infinity, -Infinity];\n  coordEach(geojson, (coord) => {\n    if (result[0] > coord[0]) {\n      result[0] = coord[0];\n    }\n    if (result[1] > coord[1]) {\n      result[1] = coord[1];\n    }\n    if (result[2] < coord[0]) {\n      result[2] = coord[0];\n    }\n    if (result[3] < coord[1]) {\n      result[3] = coord[1];\n    }\n  });\n  return result;\n}\nvar turf_bbox_default = bbox;\nexport {\n  bbox,\n  turf_bbox_default as default\n};\n//# sourceMappingURL=index.js.map","/*\r\n *      bignumber.js v9.1.2\r\n *      A JavaScript library for arbitrary-precision arithmetic.\r\n *      https://github.com/MikeMcl/bignumber.js\r\n *      Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *      MIT Licensed.\r\n *\r\n *      BigNumber.prototype methods     |  BigNumber methods\r\n *                                      |\r\n *      absoluteValue            abs    |  clone\r\n *      comparedTo                      |  config               set\r\n *      decimalPlaces            dp     |      DECIMAL_PLACES\r\n *      dividedBy                div    |      ROUNDING_MODE\r\n *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT\r\n *      exponentiatedBy          pow    |      RANGE\r\n *      integerValue                    |      CRYPTO\r\n *      isEqualTo                eq     |      MODULO_MODE\r\n *      isFinite                        |      POW_PRECISION\r\n *      isGreaterThan            gt     |      FORMAT\r\n *      isGreaterThanOrEqualTo   gte    |      ALPHABET\r\n *      isInteger                       |  isBigNumber\r\n *      isLessThan               lt     |  maximum              max\r\n *      isLessThanOrEqualTo      lte    |  minimum              min\r\n *      isNaN                           |  random\r\n *      isNegative                      |  sum\r\n *      isPositive                      |\r\n *      isZero                          |\r\n *      minus                           |\r\n *      modulo                   mod    |\r\n *      multipliedBy             times  |\r\n *      negated                         |\r\n *      plus                            |\r\n *      precision                sd     |\r\n *      shiftedBy                       |\r\n *      squareRoot               sqrt   |\r\n *      toExponential                   |\r\n *      toFixed                         |\r\n *      toFormat                        |\r\n *      toFraction                      |\r\n *      toJSON                          |\r\n *      toNumber                        |\r\n *      toPrecision                     |\r\n *      toString                        |\r\n *      valueOf                         |\r\n *\r\n */\r\n\r\n\r\nvar\r\n  isNumeric = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,\r\n  mathceil = Math.ceil,\r\n  mathfloor = Math.floor,\r\n\r\n  bignumberError = '[BigNumber Error] ',\r\n  tooManyDigits = bignumberError + 'Number primitive has more than 15 significant digits: ',\r\n\r\n  BASE = 1e14,\r\n  LOG_BASE = 14,\r\n  MAX_SAFE_INTEGER = 0x1fffffffffffff,         // 2^53 - 1\r\n  // MAX_INT32 = 0x7fffffff,                   // 2^31 - 1\r\n  POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13],\r\n  SQRT_BASE = 1e7,\r\n\r\n  // EDITABLE\r\n  // The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and\r\n  // the arguments to toExponential, toFixed, toFormat, and toPrecision.\r\n  MAX = 1E9;                                   // 0 to MAX_INT32\r\n\r\n\r\n/*\r\n * Create and return a BigNumber constructor.\r\n */\r\nfunction clone(configObject) {\r\n  var div, convertBase, parseNumeric,\r\n    P = BigNumber.prototype = { constructor: BigNumber, toString: null, valueOf: null },\r\n    ONE = new BigNumber(1),\r\n\r\n\r\n    //----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------\r\n\r\n\r\n    // The default values below must be integers within the inclusive ranges stated.\r\n    // The values can also be changed at run-time using BigNumber.set.\r\n\r\n    // The maximum number of decimal places for operations involving division.\r\n    DECIMAL_PLACES = 20,                     // 0 to MAX\r\n\r\n    // The rounding mode used when rounding to the above decimal places, and when using\r\n    // toExponential, toFixed, toFormat and toPrecision, and round (default value).\r\n    // UP         0 Away from zero.\r\n    // DOWN       1 Towards zero.\r\n    // CEIL       2 Towards +Infinity.\r\n    // FLOOR      3 Towards -Infinity.\r\n    // HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    ROUNDING_MODE = 4,                       // 0 to 8\r\n\r\n    // EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]\r\n\r\n    // The exponent value at and beneath which toString returns exponential notation.\r\n    // Number type: -7\r\n    TO_EXP_NEG = -7,                         // 0 to -MAX\r\n\r\n    // The exponent value at and above which toString returns exponential notation.\r\n    // Number type: 21\r\n    TO_EXP_POS = 21,                         // 0 to MAX\r\n\r\n    // RANGE : [MIN_EXP, MAX_EXP]\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // Number type: -324  (5e-324)\r\n    MIN_EXP = -1e7,                          // -1 to -MAX\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // Number type:  308  (1.7976931348623157e+308)\r\n    // For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.\r\n    MAX_EXP = 1e7,                           // 1 to MAX\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    CRYPTO = false,                          // true or false\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP        0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN      1 The remainder has the same sign as the dividend.\r\n    //             This modulo mode is commonly known as 'truncated division' and is\r\n    //             equivalent to (a % n) in JavaScript.\r\n    // FLOOR     3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.\r\n    // EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).\r\n    //             The remainder is always positive.\r\n    //\r\n    // The truncated division, floored division, Euclidian division and IEEE 754 remainder\r\n    // modes are commonly used for the modulus operation.\r\n    // Although the other rounding modes can also be used, they may not give useful results.\r\n    MODULO_MODE = 1,                         // 0 to 9\r\n\r\n    // The maximum number of significant digits of the result of the exponentiatedBy operation.\r\n    // If POW_PRECISION is 0, there will be unlimited significant digits.\r\n    POW_PRECISION = 0,                       // 0 to MAX\r\n\r\n    // The format specification used by the BigNumber.prototype.toFormat method.\r\n    FORMAT = {\r\n      prefix: '',\r\n      groupSize: 3,\r\n      secondaryGroupSize: 0,\r\n      groupSeparator: ',',\r\n      decimalSeparator: '.',\r\n      fractionGroupSize: 0,\r\n      fractionGroupSeparator: '\\xA0',        // non-breaking space\r\n      suffix: ''\r\n    },\r\n\r\n    // The alphabet used for base conversion. It must be at least 2 characters long, with no '+',\r\n    // '-', '.', whitespace, or repeated character.\r\n    // '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'\r\n    ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz',\r\n    alphabetHasNormalDecimalDigits = true;\r\n\r\n\r\n  //------------------------------------------------------------------------------------------\r\n\r\n\r\n  // CONSTRUCTOR\r\n\r\n\r\n  /*\r\n   * The BigNumber constructor and exported function.\r\n   * Create and return a new instance of a BigNumber object.\r\n   *\r\n   * v {number|string|BigNumber} A numeric value.\r\n   * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.\r\n   */\r\n  function BigNumber(v, b) {\r\n    var alphabet, c, caseChanged, e, i, isNum, len, str,\r\n      x = this;\r\n\r\n    // Enable constructor call without `new`.\r\n    if (!(x instanceof BigNumber)) return new BigNumber(v, b);\r\n\r\n    if (b == null) {\r\n\r\n      if (v && v._isBigNumber === true) {\r\n        x.s = v.s;\r\n\r\n        if (!v.c || v.e > MAX_EXP) {\r\n          x.c = x.e = null;\r\n        } else if (v.e < MIN_EXP) {\r\n          x.c = [x.e = 0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.c = v.c.slice();\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if ((isNum = typeof v == 'number') && v * 0 == 0) {\r\n\r\n        // Use `1 / n` to handle minus zero also.\r\n        x.s = 1 / v < 0 ? (v = -v, -1) : 1;\r\n\r\n        // Fast path for integers, where n < 2147483648 (2**31).\r\n        if (v === ~~v) {\r\n          for (e = 0, i = v; i >= 10; i /= 10, e++);\r\n\r\n          if (e > MAX_EXP) {\r\n            x.c = x.e = null;\r\n          } else {\r\n            x.e = e;\r\n            x.c = [v];\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        str = String(v);\r\n      } else {\r\n\r\n        if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);\r\n\r\n        x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n      // Exponential form?\r\n      if ((i = str.search(/e/i)) > 0) {\r\n\r\n        // Determine exponent.\r\n        if (e < 0) e = i;\r\n        e += +str.slice(i + 1);\r\n        str = str.substring(0, i);\r\n      } else if (e < 0) {\r\n\r\n        // Integer.\r\n        e = str.length;\r\n      }\r\n\r\n    } else {\r\n\r\n      // '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n      intCheck(b, 2, ALPHABET.length, 'Base');\r\n\r\n      // Allow exponential notation to be used with base 10 argument, while\r\n      // also rounding to DECIMAL_PLACES as with other bases.\r\n      if (b == 10 && alphabetHasNormalDecimalDigits) {\r\n        x = new BigNumber(v);\r\n        return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);\r\n      }\r\n\r\n      str = String(v);\r\n\r\n      if (isNum = typeof v == 'number') {\r\n\r\n        // Avoid potential interpretation of Infinity and NaN as base 44+ values.\r\n        if (v * 0 != 0) return parseNumeric(x, str, isNum, b);\r\n\r\n        x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;\r\n\r\n        // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n        if (BigNumber.DEBUG && str.replace(/^0\\.0*|\\./, '').length > 15) {\r\n          throw Error\r\n           (tooManyDigits + v);\r\n        }\r\n      } else {\r\n        x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      alphabet = ALPHABET.slice(0, b);\r\n      e = i = 0;\r\n\r\n      // Check that str is a valid base b number.\r\n      // Don't use RegExp, so alphabet can contain special characters.\r\n      for (len = str.length; i < len; i++) {\r\n        if (alphabet.indexOf(c = str.charAt(i)) < 0) {\r\n          if (c == '.') {\r\n\r\n            // If '.' is not the first character and it has not be found before.\r\n            if (i > e) {\r\n              e = len;\r\n              continue;\r\n            }\r\n          } else if (!caseChanged) {\r\n\r\n            // Allow e.g. hexadecimal 'FF' as well as 'ff'.\r\n            if (str == str.toUpperCase() && (str = str.toLowerCase()) ||\r\n                str == str.toLowerCase() && (str = str.toUpperCase())) {\r\n              caseChanged = true;\r\n              i = -1;\r\n              e = 0;\r\n              continue;\r\n            }\r\n          }\r\n\r\n          return parseNumeric(x, String(v), isNum, b);\r\n        }\r\n      }\r\n\r\n      // Prevent later check for length on converted number.\r\n      isNum = false;\r\n      str = convertBase(str, b, 10, x.s);\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n      else e = str.length;\r\n    }\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n    // Determine trailing zeros.\r\n    for (len = str.length; str.charCodeAt(--len) === 48;);\r\n\r\n    if (str = str.slice(i, ++len)) {\r\n      len -= i;\r\n\r\n      // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n      if (isNum && BigNumber.DEBUG &&\r\n        len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {\r\n          throw Error\r\n           (tooManyDigits + (x.s * v));\r\n      }\r\n\r\n       // Overflow?\r\n      if ((e = e - i - 1) > MAX_EXP) {\r\n\r\n        // Infinity.\r\n        x.c = x.e = null;\r\n\r\n      // Underflow?\r\n      } else if (e < MIN_EXP) {\r\n\r\n        // Zero.\r\n        x.c = [x.e = 0];\r\n      } else {\r\n        x.e = e;\r\n        x.c = [];\r\n\r\n        // Transform base\r\n\r\n        // e is the base 10 exponent.\r\n        // i is where to slice str to get the first element of the coefficient array.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (e < 0) i += LOG_BASE;  // i < 1\r\n\r\n        if (i < len) {\r\n          if (i) x.c.push(+str.slice(0, i));\r\n\r\n          for (len -= LOG_BASE; i < len;) {\r\n            x.c.push(+str.slice(i, i += LOG_BASE));\r\n          }\r\n\r\n          i = LOG_BASE - (str = str.slice(i)).length;\r\n        } else {\r\n          i -= len;\r\n        }\r\n\r\n        for (; i--; str += '0');\r\n        x.c.push(+str);\r\n      }\r\n    } else {\r\n\r\n      // Zero.\r\n      x.c = [x.e = 0];\r\n    }\r\n  }\r\n\r\n\r\n  // CONSTRUCTOR PROPERTIES\r\n\r\n\r\n  BigNumber.clone = clone;\r\n\r\n  BigNumber.ROUND_UP = 0;\r\n  BigNumber.ROUND_DOWN = 1;\r\n  BigNumber.ROUND_CEIL = 2;\r\n  BigNumber.ROUND_FLOOR = 3;\r\n  BigNumber.ROUND_HALF_UP = 4;\r\n  BigNumber.ROUND_HALF_DOWN = 5;\r\n  BigNumber.ROUND_HALF_EVEN = 6;\r\n  BigNumber.ROUND_HALF_CEIL = 7;\r\n  BigNumber.ROUND_HALF_FLOOR = 8;\r\n  BigNumber.EUCLID = 9;\r\n\r\n\r\n  /*\r\n   * Configure infrequently-changing library-wide settings.\r\n   *\r\n   * Accept an object with the following optional properties (if the value of a property is\r\n   * a number, it must be an integer within the inclusive range stated):\r\n   *\r\n   *   DECIMAL_PLACES   {number}           0 to MAX\r\n   *   ROUNDING_MODE    {number}           0 to 8\r\n   *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]\r\n   *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]\r\n   *   CRYPTO           {boolean}          true or false\r\n   *   MODULO_MODE      {number}           0 to 9\r\n   *   POW_PRECISION       {number}           0 to MAX\r\n   *   ALPHABET         {string}           A string of two or more unique characters which does\r\n   *                                       not contain '.'.\r\n   *   FORMAT           {object}           An object with some of the following properties:\r\n   *     prefix                 {string}\r\n   *     groupSize              {number}\r\n   *     secondaryGroupSize     {number}\r\n   *     groupSeparator         {string}\r\n   *     decimalSeparator       {string}\r\n   *     fractionGroupSize      {number}\r\n   *     fractionGroupSeparator {string}\r\n   *     suffix                 {string}\r\n   *\r\n   * (The values assigned to the above FORMAT object properties are not checked for validity.)\r\n   *\r\n   * E.g.\r\n   * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })\r\n   *\r\n   * Ignore properties/parameters set to null or undefined, except for ALPHABET.\r\n   *\r\n   * Return an object with the properties current values.\r\n   */\r\n  BigNumber.config = BigNumber.set = function (obj) {\r\n    var p, v;\r\n\r\n    if (obj != null) {\r\n\r\n      if (typeof obj == 'object') {\r\n\r\n        // DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'DECIMAL_PLACES')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          DECIMAL_PLACES = v;\r\n        }\r\n\r\n        // ROUNDING_MODE {number} Integer, 0 to 8 inclusive.\r\n        // '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'ROUNDING_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 8, p);\r\n          ROUNDING_MODE = v;\r\n        }\r\n\r\n        // EXPONENTIAL_AT {number|number[]}\r\n        // Integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to 0 inclusive, 0 to MAX inclusive].\r\n        // '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'EXPONENTIAL_AT')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, 0, p);\r\n            intCheck(v[1], 0, MAX, p);\r\n            TO_EXP_NEG = v[0];\r\n            TO_EXP_POS = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);\r\n          }\r\n        }\r\n\r\n        // RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].\r\n        // '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'\r\n        if (obj.hasOwnProperty(p = 'RANGE')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, -1, p);\r\n            intCheck(v[1], 1, MAX, p);\r\n            MIN_EXP = v[0];\r\n            MAX_EXP = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            if (v) {\r\n              MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' cannot be zero: ' + v);\r\n            }\r\n          }\r\n        }\r\n\r\n        // CRYPTO {boolean} true or false.\r\n        // '[BigNumber Error] CRYPTO not true or false: {v}'\r\n        // '[BigNumber Error] crypto unavailable'\r\n        if (obj.hasOwnProperty(p = 'CRYPTO')) {\r\n          v = obj[p];\r\n          if (v === !!v) {\r\n            if (v) {\r\n              if (typeof crypto != 'undefined' && crypto &&\r\n               (crypto.getRandomValues || crypto.randomBytes)) {\r\n                CRYPTO = v;\r\n              } else {\r\n                CRYPTO = !v;\r\n                throw Error\r\n                 (bignumberError + 'crypto unavailable');\r\n              }\r\n            } else {\r\n              CRYPTO = v;\r\n            }\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' not true or false: ' + v);\r\n          }\r\n        }\r\n\r\n        // MODULO_MODE {number} Integer, 0 to 9 inclusive.\r\n        // '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'MODULO_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 9, p);\r\n          MODULO_MODE = v;\r\n        }\r\n\r\n        // POW_PRECISION {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'POW_PRECISION')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          POW_PRECISION = v;\r\n        }\r\n\r\n        // FORMAT {object}\r\n        // '[BigNumber Error] FORMAT not an object: {v}'\r\n        if (obj.hasOwnProperty(p = 'FORMAT')) {\r\n          v = obj[p];\r\n          if (typeof v == 'object') FORMAT = v;\r\n          else throw Error\r\n           (bignumberError + p + ' not an object: ' + v);\r\n        }\r\n\r\n        // ALPHABET {string}\r\n        // '[BigNumber Error] ALPHABET invalid: {v}'\r\n        if (obj.hasOwnProperty(p = 'ALPHABET')) {\r\n          v = obj[p];\r\n\r\n          // Disallow if less than two characters,\r\n          // or if it contains '+', '-', '.', whitespace, or a repeated character.\r\n          if (typeof v == 'string' && !/^.?$|[+\\-.\\s]|(.).*\\1/.test(v)) {\r\n            alphabetHasNormalDecimalDigits = v.slice(0, 10) == '0123456789';\r\n            ALPHABET = v;\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' invalid: ' + v);\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n        // '[BigNumber Error] Object expected: {v}'\r\n        throw Error\r\n         (bignumberError + 'Object expected: ' + obj);\r\n      }\r\n    }\r\n\r\n    return {\r\n      DECIMAL_PLACES: DECIMAL_PLACES,\r\n      ROUNDING_MODE: ROUNDING_MODE,\r\n      EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],\r\n      RANGE: [MIN_EXP, MAX_EXP],\r\n      CRYPTO: CRYPTO,\r\n      MODULO_MODE: MODULO_MODE,\r\n      POW_PRECISION: POW_PRECISION,\r\n      FORMAT: FORMAT,\r\n      ALPHABET: ALPHABET\r\n    };\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if v is a BigNumber instance, otherwise return false.\r\n   *\r\n   * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.\r\n   *\r\n   * v {any}\r\n   *\r\n   * '[BigNumber Error] Invalid BigNumber: {v}'\r\n   */\r\n  BigNumber.isBigNumber = function (v) {\r\n    if (!v || v._isBigNumber !== true) return false;\r\n    if (!BigNumber.DEBUG) return true;\r\n\r\n    var i, n,\r\n      c = v.c,\r\n      e = v.e,\r\n      s = v.s;\r\n\r\n    out: if ({}.toString.call(c) == '[object Array]') {\r\n\r\n      if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {\r\n\r\n        // If the first element is zero, the BigNumber value must be zero.\r\n        if (c[0] === 0) {\r\n          if (e === 0 && c.length === 1) return true;\r\n          break out;\r\n        }\r\n\r\n        // Calculate number of digits that c[0] should have, based on the exponent.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (i < 1) i += LOG_BASE;\r\n\r\n        // Calculate number of digits of c[0].\r\n        //if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {\r\n        if (String(c[0]).length == i) {\r\n\r\n          for (i = 0; i < c.length; i++) {\r\n            n = c[i];\r\n            if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;\r\n          }\r\n\r\n          // Last element cannot be zero, unless it is the only element.\r\n          if (n !== 0) return true;\r\n        }\r\n      }\r\n\r\n    // Infinity/NaN\r\n    } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {\r\n      return true;\r\n    }\r\n\r\n    throw Error\r\n      (bignumberError + 'Invalid BigNumber: ' + v);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the maximum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.maximum = BigNumber.max = function () {\r\n    return maxOrMin(arguments, -1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the minimum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.minimum = BigNumber.min = function () {\r\n    return maxOrMin(arguments, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,\r\n   * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing\r\n   * zeros are produced).\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'\r\n   * '[BigNumber Error] crypto unavailable'\r\n   */\r\n  BigNumber.random = (function () {\r\n    var pow2_53 = 0x20000000000000;\r\n\r\n    // Return a 53 bit integer n, where 0 <= n < 9007199254740992.\r\n    // Check if Math.random() produces more than 32 bits of randomness.\r\n    // If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.\r\n    // 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.\r\n    var random53bitInt = (Math.random() * pow2_53) & 0x1fffff\r\n     ? function () { return mathfloor(Math.random() * pow2_53); }\r\n     : function () { return ((Math.random() * 0x40000000 | 0) * 0x800000) +\r\n       (Math.random() * 0x800000 | 0); };\r\n\r\n    return function (dp) {\r\n      var a, b, e, k, v,\r\n        i = 0,\r\n        c = [],\r\n        rand = new BigNumber(ONE);\r\n\r\n      if (dp == null) dp = DECIMAL_PLACES;\r\n      else intCheck(dp, 0, MAX);\r\n\r\n      k = mathceil(dp / LOG_BASE);\r\n\r\n      if (CRYPTO) {\r\n\r\n        // Browsers supporting crypto.getRandomValues.\r\n        if (crypto.getRandomValues) {\r\n\r\n          a = crypto.getRandomValues(new Uint32Array(k *= 2));\r\n\r\n          for (; i < k;) {\r\n\r\n            // 53 bits:\r\n            // ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)\r\n            // 11111 11111111 11111111 11111111 11100000 00000000 00000000\r\n            // ((Math.pow(2, 32) - 1) >>> 11).toString(2)\r\n            //                                     11111 11111111 11111111\r\n            // 0x20000 is 2^21.\r\n            v = a[i] * 0x20000 + (a[i + 1] >>> 11);\r\n\r\n            // Rejection sampling:\r\n            // 0 <= v < 9007199254740992\r\n            // Probability that v >= 9e15, is\r\n            // 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251\r\n            if (v >= 9e15) {\r\n              b = crypto.getRandomValues(new Uint32Array(2));\r\n              a[i] = b[0];\r\n              a[i + 1] = b[1];\r\n            } else {\r\n\r\n              // 0 <= v <= 8999999999999999\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 2;\r\n            }\r\n          }\r\n          i = k / 2;\r\n\r\n        // Node.js supporting crypto.randomBytes.\r\n        } else if (crypto.randomBytes) {\r\n\r\n          // buffer\r\n          a = crypto.randomBytes(k *= 7);\r\n\r\n          for (; i < k;) {\r\n\r\n            // 0x1000000000000 is 2^48, 0x10000000000 is 2^40\r\n            // 0x100000000 is 2^32, 0x1000000 is 2^24\r\n            // 11111 11111111 11111111 11111111 11111111 11111111 11111111\r\n            // 0 <= v < 9007199254740992\r\n            v = ((a[i] & 31) * 0x1000000000000) + (a[i + 1] * 0x10000000000) +\r\n               (a[i + 2] * 0x100000000) + (a[i + 3] * 0x1000000) +\r\n               (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];\r\n\r\n            if (v >= 9e15) {\r\n              crypto.randomBytes(7).copy(a, i);\r\n            } else {\r\n\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 7;\r\n            }\r\n          }\r\n          i = k / 7;\r\n        } else {\r\n          CRYPTO = false;\r\n          throw Error\r\n           (bignumberError + 'crypto unavailable');\r\n        }\r\n      }\r\n\r\n      // Use Math.random.\r\n      if (!CRYPTO) {\r\n\r\n        for (; i < k;) {\r\n          v = random53bitInt();\r\n          if (v < 9e15) c[i++] = v % 1e14;\r\n        }\r\n      }\r\n\r\n      k = c[--i];\r\n      dp %= LOG_BASE;\r\n\r\n      // Convert trailing digits to zeros according to dp.\r\n      if (k && dp) {\r\n        v = POWS_TEN[LOG_BASE - dp];\r\n        c[i] = mathfloor(k / v) * v;\r\n      }\r\n\r\n      // Remove trailing elements which are zero.\r\n      for (; c[i] === 0; c.pop(), i--);\r\n\r\n      // Zero?\r\n      if (i < 0) {\r\n        c = [e = 0];\r\n      } else {\r\n\r\n        // Remove leading elements which are zero and adjust exponent accordingly.\r\n        for (e = -1 ; c[0] === 0; c.splice(0, 1), e -= LOG_BASE);\r\n\r\n        // Count the digits of the first element of c to determine leading zeros, and...\r\n        for (i = 1, v = c[0]; v >= 10; v /= 10, i++);\r\n\r\n        // adjust the exponent accordingly.\r\n        if (i < LOG_BASE) e -= LOG_BASE - i;\r\n      }\r\n\r\n      rand.e = e;\r\n      rand.c = c;\r\n      return rand;\r\n    };\r\n  })();\r\n\r\n\r\n   /*\r\n   * Return a BigNumber whose value is the sum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.sum = function () {\r\n    var i = 1,\r\n      args = arguments,\r\n      sum = new BigNumber(args[0]);\r\n    for (; i < args.length;) sum = sum.plus(args[i++]);\r\n    return sum;\r\n  };\r\n\r\n\r\n  // PRIVATE FUNCTIONS\r\n\r\n\r\n  // Called by BigNumber and BigNumber.prototype.toString.\r\n  convertBase = (function () {\r\n    var decimal = '0123456789';\r\n\r\n    /*\r\n     * Convert string of baseIn to an array of numbers of baseOut.\r\n     * Eg. toBaseOut('255', 10, 16) returns [15, 15].\r\n     * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].\r\n     */\r\n    function toBaseOut(str, baseIn, baseOut, alphabet) {\r\n      var j,\r\n        arr = [0],\r\n        arrL,\r\n        i = 0,\r\n        len = str.length;\r\n\r\n      for (; i < len;) {\r\n        for (arrL = arr.length; arrL--; arr[arrL] *= baseIn);\r\n\r\n        arr[0] += alphabet.indexOf(str.charAt(i++));\r\n\r\n        for (j = 0; j < arr.length; j++) {\r\n\r\n          if (arr[j] > baseOut - 1) {\r\n            if (arr[j + 1] == null) arr[j + 1] = 0;\r\n            arr[j + 1] += arr[j] / baseOut | 0;\r\n            arr[j] %= baseOut;\r\n          }\r\n        }\r\n      }\r\n\r\n      return arr.reverse();\r\n    }\r\n\r\n    // Convert a numeric string of baseIn to a numeric string of baseOut.\r\n    // If the caller is toString, we are converting from base 10 to baseOut.\r\n    // If the caller is BigNumber, we are converting from baseIn to base 10.\r\n    return function (str, baseIn, baseOut, sign, callerIsToString) {\r\n      var alphabet, d, e, k, r, x, xc, y,\r\n        i = str.indexOf('.'),\r\n        dp = DECIMAL_PLACES,\r\n        rm = ROUNDING_MODE;\r\n\r\n      // Non-integer.\r\n      if (i >= 0) {\r\n        k = POW_PRECISION;\r\n\r\n        // Unlimited precision.\r\n        POW_PRECISION = 0;\r\n        str = str.replace('.', '');\r\n        y = new BigNumber(baseIn);\r\n        x = y.pow(str.length - i);\r\n        POW_PRECISION = k;\r\n\r\n        // Convert str as if an integer, then restore the fraction part by dividing the\r\n        // result by its base raised to a power.\r\n\r\n        y.c = toBaseOut(toFixedPoint(coeffToString(x.c), x.e, '0'),\r\n         10, baseOut, decimal);\r\n        y.e = y.c.length;\r\n      }\r\n\r\n      // Convert the number as integer.\r\n\r\n      xc = toBaseOut(str, baseIn, baseOut, callerIsToString\r\n       ? (alphabet = ALPHABET, decimal)\r\n       : (alphabet = decimal, ALPHABET));\r\n\r\n      // xc now represents str as an integer and converted to baseOut. e is the exponent.\r\n      e = k = xc.length;\r\n\r\n      // Remove trailing zeros.\r\n      for (; xc[--k] == 0; xc.pop());\r\n\r\n      // Zero?\r\n      if (!xc[0]) return alphabet.charAt(0);\r\n\r\n      // Does str represent an integer? If so, no need for the division.\r\n      if (i < 0) {\r\n        --e;\r\n      } else {\r\n        x.c = xc;\r\n        x.e = e;\r\n\r\n        // The sign is needed for correct rounding.\r\n        x.s = sign;\r\n        x = div(x, y, dp, rm, baseOut);\r\n        xc = x.c;\r\n        r = x.r;\r\n        e = x.e;\r\n      }\r\n\r\n      // xc now represents str converted to baseOut.\r\n\r\n      // THe index of the rounding digit.\r\n      d = e + dp + 1;\r\n\r\n      // The rounding digit: the digit to the right of the digit that may be rounded up.\r\n      i = xc[d];\r\n\r\n      // Look at the rounding digits and mode to determine whether to round up.\r\n\r\n      k = baseOut / 2;\r\n      r = r || d < 0 || xc[d + 1] != null;\r\n\r\n      r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n            : i > k || i == k &&(rm == 4 || r || rm == 6 && xc[d - 1] & 1 ||\r\n             rm == (x.s < 0 ? 8 : 7));\r\n\r\n      // If the index of the rounding digit is not greater than zero, or xc represents\r\n      // zero, then the result of the base conversion is zero or, if rounding up, a value\r\n      // such as 0.00001.\r\n      if (d < 1 || !xc[0]) {\r\n\r\n        // 1^-dp or 0\r\n        str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);\r\n      } else {\r\n\r\n        // Truncate xc to the required number of decimal places.\r\n        xc.length = d;\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          // Rounding up may mean the previous digit has to be rounded up and so on.\r\n          for (--baseOut; ++xc[--d] > baseOut;) {\r\n            xc[d] = 0;\r\n\r\n            if (!d) {\r\n              ++e;\r\n              xc = [1].concat(xc);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Determine trailing zeros.\r\n        for (k = xc.length; !xc[--k];);\r\n\r\n        // E.g. [4, 11, 15] becomes 4bf.\r\n        for (i = 0, str = ''; i <= k; str += alphabet.charAt(xc[i++]));\r\n\r\n        // Add leading zeros, decimal point and trailing zeros as required.\r\n        str = toFixedPoint(str, e, alphabet.charAt(0));\r\n      }\r\n\r\n      // The caller will add the sign.\r\n      return str;\r\n    };\r\n  })();\r\n\r\n\r\n  // Perform division in the specified base. Called by div and convertBase.\r\n  div = (function () {\r\n\r\n    // Assume non-zero x and k.\r\n    function multiply(x, k, base) {\r\n      var m, temp, xlo, xhi,\r\n        carry = 0,\r\n        i = x.length,\r\n        klo = k % SQRT_BASE,\r\n        khi = k / SQRT_BASE | 0;\r\n\r\n      for (x = x.slice(); i--;) {\r\n        xlo = x[i] % SQRT_BASE;\r\n        xhi = x[i] / SQRT_BASE | 0;\r\n        m = khi * xlo + xhi * klo;\r\n        temp = klo * xlo + ((m % SQRT_BASE) * SQRT_BASE) + carry;\r\n        carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;\r\n        x[i] = temp % base;\r\n      }\r\n\r\n      if (carry) x = [carry].concat(x);\r\n\r\n      return x;\r\n    }\r\n\r\n    function compare(a, b, aL, bL) {\r\n      var i, cmp;\r\n\r\n      if (aL != bL) {\r\n        cmp = aL > bL ? 1 : -1;\r\n      } else {\r\n\r\n        for (i = cmp = 0; i < aL; i++) {\r\n\r\n          if (a[i] != b[i]) {\r\n            cmp = a[i] > b[i] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return cmp;\r\n    }\r\n\r\n    function subtract(a, b, aL, base) {\r\n      var i = 0;\r\n\r\n      // Subtract b from a.\r\n      for (; aL--;) {\r\n        a[aL] -= i;\r\n        i = a[aL] < b[aL] ? 1 : 0;\r\n        a[aL] = i * base + a[aL] - b[aL];\r\n      }\r\n\r\n      // Remove leading zeros.\r\n      for (; !a[0] && a.length > 1; a.splice(0, 1));\r\n    }\r\n\r\n    // x: dividend, y: divisor.\r\n    return function (x, y, dp, rm, base) {\r\n      var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0,\r\n        yL, yz,\r\n        s = x.s == y.s ? 1 : -1,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      // Either NaN, Infinity or 0?\r\n      if (!xc || !xc[0] || !yc || !yc[0]) {\r\n\r\n        return new BigNumber(\r\n\r\n         // Return NaN if either NaN, or both Infinity or 0.\r\n         !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN :\r\n\r\n          // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n          xc && xc[0] == 0 || !yc ? s * 0 : s / 0\r\n       );\r\n      }\r\n\r\n      q = new BigNumber(s);\r\n      qc = q.c = [];\r\n      e = x.e - y.e;\r\n      s = dp + e + 1;\r\n\r\n      if (!base) {\r\n        base = BASE;\r\n        e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);\r\n        s = s / LOG_BASE | 0;\r\n      }\r\n\r\n      // Result exponent may be one less then the current value of e.\r\n      // The coefficients of the BigNumbers from convertBase may have trailing zeros.\r\n      for (i = 0; yc[i] == (xc[i] || 0); i++);\r\n\r\n      if (yc[i] > (xc[i] || 0)) e--;\r\n\r\n      if (s < 0) {\r\n        qc.push(1);\r\n        more = true;\r\n      } else {\r\n        xL = xc.length;\r\n        yL = yc.length;\r\n        i = 0;\r\n        s += 2;\r\n\r\n        // Normalise xc and yc so highest order digit of yc is >= base / 2.\r\n\r\n        n = mathfloor(base / (yc[0] + 1));\r\n\r\n        // Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.\r\n        // if (n > 1 || n++ == 1 && yc[0] < base / 2) {\r\n        if (n > 1) {\r\n          yc = multiply(yc, n, base);\r\n          xc = multiply(xc, n, base);\r\n          yL = yc.length;\r\n          xL = xc.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xc.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL; rem[remL++] = 0);\r\n        yz = yc.slice();\r\n        yz = [0].concat(yz);\r\n        yc0 = yc[0];\r\n        if (yc[1] >= base / 2) yc0++;\r\n        // Not necessary, but to prevent trial digit n > base, when using base 3.\r\n        // else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;\r\n\r\n        do {\r\n          n = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yc, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, n.\r\n\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // n is how many times the divisor goes into the current remainder.\r\n            n = mathfloor(rem0 / yc0);\r\n\r\n            //  Algorithm:\r\n            //  product = divisor multiplied by trial digit (n).\r\n            //  Compare product and remainder.\r\n            //  If product is greater than remainder:\r\n            //    Subtract divisor from product, decrement trial digit.\r\n            //  Subtract product from remainder.\r\n            //  If product was less than remainder at the last compare:\r\n            //    Compare new remainder and divisor.\r\n            //    If remainder is greater than divisor:\r\n            //      Subtract divisor from remainder, increment trial digit.\r\n\r\n            if (n > 1) {\r\n\r\n              // n may be > base only when base is 3.\r\n              if (n >= base) n = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiply(yc, n, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              // If product > remainder then trial digit n too high.\r\n              // n is 1 too high about 5% of the time, and is not known to have\r\n              // ever been more than 1 too high.\r\n              while (compare(prod, rem, prodL, remL) == 1) {\r\n                n--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yc, prodL, base);\r\n                prodL = prod.length;\r\n                cmp = 1;\r\n              }\r\n            } else {\r\n\r\n              // n is 0 or 1, cmp is -1.\r\n              // If n is 0, there is no need to compare yc and rem again below,\r\n              // so change cmp to 1 to avoid it.\r\n              // If n is 1, leave cmp as -1, so yc and rem are compared again.\r\n              if (n == 0) {\r\n\r\n                // divisor < remainder, so n must be at least 1.\r\n                cmp = n = 1;\r\n              }\r\n\r\n              // product = divisor\r\n              prod = yc.slice();\r\n              prodL = prod.length;\r\n            }\r\n\r\n            if (prodL < remL) prod = [0].concat(prod);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n            remL = rem.length;\r\n\r\n             // If product was < remainder.\r\n            if (cmp == -1) {\r\n\r\n              // Compare divisor and new remainder.\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              // Trial digit n too low.\r\n              // n is 1 too low about 5% of the time, and very rarely 2 too low.\r\n              while (compare(yc, rem, yL, remL) < 1) {\r\n                n++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yc, remL, base);\r\n                remL = rem.length;\r\n              }\r\n            }\r\n          } else if (cmp === 0) {\r\n            n++;\r\n            rem = [0];\r\n          } // else cmp === 1 and n will be 0\r\n\r\n          // Add the next digit, n, to the result array.\r\n          qc[i++] = n;\r\n\r\n          // Update the remainder.\r\n          if (rem[0]) {\r\n            rem[remL++] = xc[xi] || 0;\r\n          } else {\r\n            rem = [xc[xi]];\r\n            remL = 1;\r\n          }\r\n        } while ((xi++ < xL || rem[0] != null) && s--);\r\n\r\n        more = rem[0] != null;\r\n\r\n        // Leading zero?\r\n        if (!qc[0]) qc.splice(0, 1);\r\n      }\r\n\r\n      if (base == BASE) {\r\n\r\n        // To calculate q.e, first get the number of digits of qc[0].\r\n        for (i = 1, s = qc[0]; s >= 10; s /= 10, i++);\r\n\r\n        round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);\r\n\r\n      // Caller is convertBase.\r\n      } else {\r\n        q.e = e;\r\n        q.r = +more;\r\n      }\r\n\r\n      return q;\r\n    };\r\n  })();\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of BigNumber n in fixed-point or exponential\r\n   * notation rounded to the specified decimal places or significant digits.\r\n   *\r\n   * n: a BigNumber.\r\n   * i: the index of the last digit required (i.e. the digit that may be rounded up).\r\n   * rm: the rounding mode.\r\n   * id: 1 (toExponential) or 2 (toPrecision).\r\n   */\r\n  function format(n, i, rm, id) {\r\n    var c0, e, ne, len, str;\r\n\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n\r\n    if (!n.c) return n.toString();\r\n\r\n    c0 = n.c[0];\r\n    ne = n.e;\r\n\r\n    if (i == null) {\r\n      str = coeffToString(n.c);\r\n      str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS)\r\n       ? toExponential(str, ne)\r\n       : toFixedPoint(str, ne, '0');\r\n    } else {\r\n      n = round(new BigNumber(n), i, rm);\r\n\r\n      // n.e may have changed if the value was rounded up.\r\n      e = n.e;\r\n\r\n      str = coeffToString(n.c);\r\n      len = str.length;\r\n\r\n      // toPrecision returns exponential notation if the number of significant digits\r\n      // specified is less than the number of digits necessary to represent the integer\r\n      // part of the value in fixed-point notation.\r\n\r\n      // Exponential notation.\r\n      if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {\r\n\r\n        // Append zeros?\r\n        for (; len < i; str += '0', len++);\r\n        str = toExponential(str, e);\r\n\r\n      // Fixed-point notation.\r\n      } else {\r\n        i -= ne;\r\n        str = toFixedPoint(str, e, '0');\r\n\r\n        // Append zeros?\r\n        if (e + 1 > len) {\r\n          if (--i > 0) for (str += '.'; i--; str += '0');\r\n        } else {\r\n          i += e - len;\r\n          if (i > 0) {\r\n            if (e + 1 == len) str += '.';\r\n            for (; i--; str += '0');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return n.s < 0 && c0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // Handle BigNumber.max and BigNumber.min.\r\n  // If any number is NaN, return NaN.\r\n  function maxOrMin(args, n) {\r\n    var k, y,\r\n      i = 1,\r\n      x = new BigNumber(args[0]);\r\n\r\n    for (; i < args.length; i++) {\r\n      y = new BigNumber(args[i]);\r\n      if (!y.s || (k = compare(x, y)) === n || k === 0 && x.s === n) {\r\n        x = y;\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.\r\n   * Called by minus, plus and times.\r\n   */\r\n  function normalise(n, c, e) {\r\n    var i = 1,\r\n      j = c.length;\r\n\r\n     // Remove trailing zeros.\r\n    for (; !c[--j]; c.pop());\r\n\r\n    // Calculate the base 10 exponent. First get the number of digits of c[0].\r\n    for (j = c[0]; j >= 10; j /= 10, i++);\r\n\r\n    // Overflow?\r\n    if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {\r\n\r\n      // Infinity.\r\n      n.c = n.e = null;\r\n\r\n    // Underflow?\r\n    } else if (e < MIN_EXP) {\r\n\r\n      // Zero.\r\n      n.c = [n.e = 0];\r\n    } else {\r\n      n.e = e;\r\n      n.c = c;\r\n    }\r\n\r\n    return n;\r\n  }\r\n\r\n\r\n  // Handle values that fail the validity test in BigNumber.\r\n  parseNumeric = (function () {\r\n    var basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i,\r\n      dotAfter = /^([^.]+)\\.$/,\r\n      dotBefore = /^\\.([^.]+)$/,\r\n      isInfinityOrNaN = /^-?(Infinity|NaN)$/,\r\n      whitespaceOrPlus = /^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;\r\n\r\n    return function (x, str, isNum, b) {\r\n      var base,\r\n        s = isNum ? str : str.replace(whitespaceOrPlus, '');\r\n\r\n      // No exception on Infinity or NaN.\r\n      if (isInfinityOrNaN.test(s)) {\r\n        x.s = isNaN(s) ? null : s < 0 ? -1 : 1;\r\n      } else {\r\n        if (!isNum) {\r\n\r\n          // basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i\r\n          s = s.replace(basePrefix, function (m, p1, p2) {\r\n            base = (p2 = p2.toLowerCase()) == 'x' ? 16 : p2 == 'b' ? 2 : 8;\r\n            return !b || b == base ? p1 : m;\r\n          });\r\n\r\n          if (b) {\r\n            base = b;\r\n\r\n            // E.g. '1.' to '1', '.1' to '0.1'\r\n            s = s.replace(dotAfter, '$1').replace(dotBefore, '0.$1');\r\n          }\r\n\r\n          if (str != s) return new BigNumber(s, base);\r\n        }\r\n\r\n        // '[BigNumber Error] Not a number: {n}'\r\n        // '[BigNumber Error] Not a base {b} number: {n}'\r\n        if (BigNumber.DEBUG) {\r\n          throw Error\r\n            (bignumberError + 'Not a' + (b ? ' base ' + b : '') + ' number: ' + str);\r\n        }\r\n\r\n        // NaN\r\n        x.s = null;\r\n      }\r\n\r\n      x.c = x.e = null;\r\n    }\r\n  })();\r\n\r\n\r\n  /*\r\n   * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.\r\n   * If r is truthy, it is known that there are more digits after the rounding digit.\r\n   */\r\n  function round(x, sd, rm, r) {\r\n    var d, i, j, k, n, ni, rd,\r\n      xc = x.c,\r\n      pows10 = POWS_TEN;\r\n\r\n    // if x is not Infinity or NaN...\r\n    if (xc) {\r\n\r\n      // rd is the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      // n is a base 1e14 number, the value of the element of array x.c containing rd.\r\n      // ni is the index of n within x.c.\r\n      // d is the number of digits of n.\r\n      // i is the index of rd within n including leading zeros.\r\n      // j is the actual index of rd within n (if < 0, rd is a leading zero).\r\n      out: {\r\n\r\n        // Get the number of digits of the first element of xc.\r\n        for (d = 1, k = xc[0]; k >= 10; k /= 10, d++);\r\n        i = sd - d;\r\n\r\n        // If the rounding digit is in the first element of xc...\r\n        if (i < 0) {\r\n          i += LOG_BASE;\r\n          j = sd;\r\n          n = xc[ni = 0];\r\n\r\n          // Get the rounding digit at index j of n.\r\n          rd = mathfloor(n / pows10[d - j - 1] % 10);\r\n        } else {\r\n          ni = mathceil((i + 1) / LOG_BASE);\r\n\r\n          if (ni >= xc.length) {\r\n\r\n            if (r) {\r\n\r\n              // Needed by sqrt.\r\n              for (; xc.length <= ni; xc.push(0));\r\n              n = rd = 0;\r\n              d = 1;\r\n              i %= LOG_BASE;\r\n              j = i - LOG_BASE + 1;\r\n            } else {\r\n              break out;\r\n            }\r\n          } else {\r\n            n = k = xc[ni];\r\n\r\n            // Get the number of digits of n.\r\n            for (d = 1; k >= 10; k /= 10, d++);\r\n\r\n            // Get the index of rd within n.\r\n            i %= LOG_BASE;\r\n\r\n            // Get the index of rd within n, adjusted for leading zeros.\r\n            // The number of leading zeros of n is given by LOG_BASE - d.\r\n            j = i - LOG_BASE + d;\r\n\r\n            // Get the rounding digit at index j of n.\r\n            rd = j < 0 ? 0 : mathfloor(n / pows10[d - j - 1] % 10);\r\n          }\r\n        }\r\n\r\n        r = r || sd < 0 ||\r\n\r\n        // Are there any non-zero digits after the rounding digit?\r\n        // The expression  n % pows10[d - j - 1]  returns all digits of n to the right\r\n        // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.\r\n         xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);\r\n\r\n        r = rm < 4\r\n         ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n         : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 &&\r\n\r\n          // Check whether the digit to the left of the rounding digit is odd.\r\n          ((i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10) & 1 ||\r\n           rm == (x.s < 0 ? 8 : 7));\r\n\r\n        if (sd < 1 || !xc[0]) {\r\n          xc.length = 0;\r\n\r\n          if (r) {\r\n\r\n            // Convert sd to decimal places.\r\n            sd -= x.e + 1;\r\n\r\n            // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n            xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];\r\n            x.e = -sd || 0;\r\n          } else {\r\n\r\n            // Zero.\r\n            xc[0] = x.e = 0;\r\n          }\r\n\r\n          return x;\r\n        }\r\n\r\n        // Remove excess digits.\r\n        if (i == 0) {\r\n          xc.length = ni;\r\n          k = 1;\r\n          ni--;\r\n        } else {\r\n          xc.length = ni + 1;\r\n          k = pows10[LOG_BASE - i];\r\n\r\n          // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n          // j > 0 means i > number of leading zeros of n.\r\n          xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;\r\n        }\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          for (; ;) {\r\n\r\n            // If the digit to be rounded up is in the first element of xc...\r\n            if (ni == 0) {\r\n\r\n              // i will be the length of xc[0] before k is added.\r\n              for (i = 1, j = xc[0]; j >= 10; j /= 10, i++);\r\n              j = xc[0] += k;\r\n              for (k = 1; j >= 10; j /= 10, k++);\r\n\r\n              // if i != k the length has increased.\r\n              if (i != k) {\r\n                x.e++;\r\n                if (xc[0] == BASE) xc[0] = 1;\r\n              }\r\n\r\n              break;\r\n            } else {\r\n              xc[ni] += k;\r\n              if (xc[ni] != BASE) break;\r\n              xc[ni--] = 0;\r\n              k = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (i = xc.length; xc[--i] === 0; xc.pop());\r\n      }\r\n\r\n      // Overflow? Infinity.\r\n      if (x.e > MAX_EXP) {\r\n        x.c = x.e = null;\r\n\r\n      // Underflow? Zero.\r\n      } else if (x.e < MIN_EXP) {\r\n        x.c = [x.e = 0];\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  function valueOf(n) {\r\n    var str,\r\n      e = n.e;\r\n\r\n    if (e === null) return n.toString();\r\n\r\n    str = coeffToString(n.c);\r\n\r\n    str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n      ? toExponential(str, e)\r\n      : toFixedPoint(str, e, '0');\r\n\r\n    return n.s < 0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // PROTOTYPE/INSTANCE METHODS\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the absolute value of this BigNumber.\r\n   */\r\n  P.absoluteValue = P.abs = function () {\r\n    var x = new BigNumber(this);\r\n    if (x.s < 0) x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return\r\n   *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   *   0 if they have the same value,\r\n   *   or null if the value of either is NaN.\r\n   */\r\n  P.comparedTo = function (y, b) {\r\n    return compare(this, new BigNumber(y, b));\r\n  };\r\n\r\n\r\n  /*\r\n   * If dp is undefined or null or true or false, return the number of decimal places of the\r\n   * value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   *\r\n   * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [dp] {number} Decimal places: integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.decimalPlaces = P.dp = function (dp, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), dp + x.e + 1, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last number.\r\n    if (v = c[v]) for (; v % 10 == 0; v /= 10, n--);\r\n    if (n < 0) n = 0;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n / 0 = I\r\n   *  n / N = N\r\n   *  n / I = 0\r\n   *  0 / n = 0\r\n   *  0 / 0 = N\r\n   *  0 / N = N\r\n   *  0 / I = 0\r\n   *  N / n = N\r\n   *  N / 0 = N\r\n   *  N / N = N\r\n   *  N / I = N\r\n   *  I / n = I\r\n   *  I / 0 = I\r\n   *  I / N = N\r\n   *  I / I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber divided by the value of\r\n   * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.dividedBy = P.div = function (y, b) {\r\n    return div(this, new BigNumber(y, b), DECIMAL_PLACES, ROUNDING_MODE);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the integer part of dividing the value of this\r\n   * BigNumber by the value of BigNumber(y, b).\r\n   */\r\n  P.dividedToIntegerBy = P.idiv = function (y, b) {\r\n    return div(this, new BigNumber(y, b), 0, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.\r\n   *\r\n   * If m is present, return the result modulo m.\r\n   * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.\r\n   *\r\n   * The modular power operation works efficiently when x, n, and m are integers, otherwise it\r\n   * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.\r\n   *\r\n   * n {number|string|BigNumber} The exponent. An integer.\r\n   * [m] {number|string|BigNumber} The modulus.\r\n   *\r\n   * '[BigNumber Error] Exponent not an integer: {n}'\r\n   */\r\n  P.exponentiatedBy = P.pow = function (n, m) {\r\n    var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y,\r\n      x = this;\r\n\r\n    n = new BigNumber(n);\r\n\r\n    // Allow NaN and Infinity, but not other non-integers.\r\n    if (n.c && !n.isInteger()) {\r\n      throw Error\r\n        (bignumberError + 'Exponent not an integer: ' + valueOf(n));\r\n    }\r\n\r\n    if (m != null) m = new BigNumber(m);\r\n\r\n    // Exponent of MAX_SAFE_INTEGER is 15.\r\n    nIsBig = n.e > 14;\r\n\r\n    // If x is NaN, Infinity, 0 or 1, or n is Infinity, NaN or 0.\r\n    if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {\r\n\r\n      // The sign of the result of pow when x is negative depends on the evenness of n.\r\n      // If +n overflows to Infinity, the evenness of n would be not be known.\r\n      y = new BigNumber(Math.pow(+valueOf(x), nIsBig ? n.s * (2 - isOdd(n)) : +valueOf(n)));\r\n      return m ? y.mod(m) : y;\r\n    }\r\n\r\n    nIsNeg = n.s < 0;\r\n\r\n    if (m) {\r\n\r\n      // x % m returns NaN if abs(m) is zero, or m is NaN.\r\n      if (m.c ? !m.c[0] : !m.s) return new BigNumber(NaN);\r\n\r\n      isModExp = !nIsNeg && x.isInteger() && m.isInteger();\r\n\r\n      if (isModExp) x = x.mod(m);\r\n\r\n    // Overflow to Infinity: >=2**1e10 or >=1.0000024**1e15.\r\n    // Underflow to 0: <=0.79**1e10 or <=0.9999975**1e15.\r\n    } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0\r\n      // [1, 240000000]\r\n      ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7\r\n      // [80000000000000]  [99999750000000]\r\n      : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {\r\n\r\n      // If x is negative and n is odd, k = -0, else k = 0.\r\n      k = x.s < 0 && isOdd(n) ? -0 : 0;\r\n\r\n      // If x >= 1, k = Infinity.\r\n      if (x.e > -1) k = 1 / k;\r\n\r\n      // If n is negative return 0, else return Infinity.\r\n      return new BigNumber(nIsNeg ? 1 / k : k);\r\n\r\n    } else if (POW_PRECISION) {\r\n\r\n      // Truncating each coefficient array to a length of k after each multiplication\r\n      // equates to truncating significant digits to POW_PRECISION + [28, 41],\r\n      // i.e. there will be a minimum of 28 guard digits retained.\r\n      k = mathceil(POW_PRECISION / LOG_BASE + 2);\r\n    }\r\n\r\n    if (nIsBig) {\r\n      half = new BigNumber(0.5);\r\n      if (nIsNeg) n.s = 1;\r\n      nIsOdd = isOdd(n);\r\n    } else {\r\n      i = Math.abs(+valueOf(n));\r\n      nIsOdd = i % 2;\r\n    }\r\n\r\n    y = new BigNumber(ONE);\r\n\r\n    // Performs 54 loop iterations for n of 9007199254740991.\r\n    for (; ;) {\r\n\r\n      if (nIsOdd) {\r\n        y = y.times(x);\r\n        if (!y.c) break;\r\n\r\n        if (k) {\r\n          if (y.c.length > k) y.c.length = k;\r\n        } else if (isModExp) {\r\n          y = y.mod(m);    //y = y.minus(div(y, m, 0, MODULO_MODE).times(m));\r\n        }\r\n      }\r\n\r\n      if (i) {\r\n        i = mathfloor(i / 2);\r\n        if (i === 0) break;\r\n        nIsOdd = i % 2;\r\n      } else {\r\n        n = n.times(half);\r\n        round(n, n.e + 1, 1);\r\n\r\n        if (n.e > 14) {\r\n          nIsOdd = isOdd(n);\r\n        } else {\r\n          i = +valueOf(n);\r\n          if (i === 0) break;\r\n          nIsOdd = i % 2;\r\n        }\r\n      }\r\n\r\n      x = x.times(x);\r\n\r\n      if (k) {\r\n        if (x.c && x.c.length > k) x.c.length = k;\r\n      } else if (isModExp) {\r\n        x = x.mod(m);    //x = x.minus(div(x, m, 0, MODULO_MODE).times(m));\r\n      }\r\n    }\r\n\r\n    if (isModExp) return y;\r\n    if (nIsNeg) y = ONE.div(y);\r\n\r\n    return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer\r\n   * using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'\r\n   */\r\n  P.integerValue = function (rm) {\r\n    var n = new BigNumber(this);\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n    return round(n, n.e + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isEqualTo = P.eq = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is a finite number, otherwise return false.\r\n   */\r\n  P.isFinite = function () {\r\n    return !!this.c;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isGreaterThan = P.gt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isGreaterThanOrEqualTo = P.gte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === 1 || b === 0;\r\n\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is an integer, otherwise return false.\r\n   */\r\n  P.isInteger = function () {\r\n    return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isLessThan = P.lt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isLessThanOrEqualTo = P.lte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === -1 || b === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is NaN, otherwise return false.\r\n   */\r\n  P.isNaN = function () {\r\n    return !this.s;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is negative, otherwise return false.\r\n   */\r\n  P.isNegative = function () {\r\n    return this.s < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is positive, otherwise return false.\r\n   */\r\n  P.isPositive = function () {\r\n    return this.s > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is 0 or -0, otherwise return false.\r\n   */\r\n  P.isZero = function () {\r\n    return !!this.c && this.c[0] == 0;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n - 0 = n\r\n   *  n - N = N\r\n   *  n - I = -I\r\n   *  0 - n = -n\r\n   *  0 - 0 = 0\r\n   *  0 - N = N\r\n   *  0 - I = -I\r\n   *  N - n = N\r\n   *  N - 0 = N\r\n   *  N - N = N\r\n   *  N - I = N\r\n   *  I - n = I\r\n   *  I - 0 = I\r\n   *  I - N = N\r\n   *  I - I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber minus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.minus = function (y, b) {\r\n    var i, j, t, xLTy,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n    if (a != b) {\r\n      y.s = -b;\r\n      return x.plus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Either Infinity?\r\n      if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber(yc ? x : NaN);\r\n\r\n      // Either zero?\r\n      if (!xc[0] || !yc[0]) {\r\n\r\n        // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n        return yc[0] ? (y.s = -b, y) : new BigNumber(xc[0] ? x :\r\n\r\n         // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity\r\n         ROUNDING_MODE == 3 ? -0 : 0);\r\n      }\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Determine which is the bigger number.\r\n    if (a = xe - ye) {\r\n\r\n      if (xLTy = a < 0) {\r\n        a = -a;\r\n        t = xc;\r\n      } else {\r\n        ye = xe;\r\n        t = yc;\r\n      }\r\n\r\n      t.reverse();\r\n\r\n      // Prepend zeros to equalise exponents.\r\n      for (b = a; b--; t.push(0));\r\n      t.reverse();\r\n    } else {\r\n\r\n      // Exponents equal. Check digit by digit.\r\n      j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;\r\n\r\n      for (a = b = 0; b < j; b++) {\r\n\r\n        if (xc[b] != yc[b]) {\r\n          xLTy = xc[b] < yc[b];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // x < y? Point xc to the array of the bigger number.\r\n    if (xLTy) {\r\n      t = xc;\r\n      xc = yc;\r\n      yc = t;\r\n      y.s = -y.s;\r\n    }\r\n\r\n    b = (j = yc.length) - (i = xc.length);\r\n\r\n    // Append zeros to xc if shorter.\r\n    // No need to add zeros to yc if shorter as subtract only needs to start at yc.length.\r\n    if (b > 0) for (; b--; xc[i++] = 0);\r\n    b = BASE - 1;\r\n\r\n    // Subtract yc from xc.\r\n    for (; j > a;) {\r\n\r\n      if (xc[--j] < yc[j]) {\r\n        for (i = j; i && !xc[--i]; xc[i] = b);\r\n        --xc[i];\r\n        xc[j] += BASE;\r\n      }\r\n\r\n      xc[j] -= yc[j];\r\n    }\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xc[0] == 0; xc.splice(0, 1), --ye);\r\n\r\n    // Zero?\r\n    if (!xc[0]) {\r\n\r\n      // Following IEEE 754 (2008) 6.3,\r\n      // n - n = +0  but  n - n = -0  when rounding towards -Infinity.\r\n      y.s = ROUNDING_MODE == 3 ? -1 : 1;\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    // No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity\r\n    // for finite x and y.\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   *   n % 0 =  N\r\n   *   n % N =  N\r\n   *   n % I =  n\r\n   *   0 % n =  0\r\n   *  -0 % n = -0\r\n   *   0 % 0 =  N\r\n   *   0 % N =  N\r\n   *   0 % I =  0\r\n   *   N % n =  N\r\n   *   N % 0 =  N\r\n   *   N % N =  N\r\n   *   N % I =  N\r\n   *   I % n =  N\r\n   *   I % 0 =  N\r\n   *   I % N =  N\r\n   *   I % I =  N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber modulo the value of\r\n   * BigNumber(y, b). The result depends on the value of MODULO_MODE.\r\n   */\r\n  P.modulo = P.mod = function (y, b) {\r\n    var q, s,\r\n      x = this;\r\n\r\n    y = new BigNumber(y, b);\r\n\r\n    // Return NaN if x is Infinity or NaN, or y is NaN or zero.\r\n    if (!x.c || !y.s || y.c && !y.c[0]) {\r\n      return new BigNumber(NaN);\r\n\r\n    // Return x if y is Infinity or x is zero.\r\n    } else if (!y.c || x.c && !x.c[0]) {\r\n      return new BigNumber(x);\r\n    }\r\n\r\n    if (MODULO_MODE == 9) {\r\n\r\n      // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n      // r = x - qy    where  0 <= r < abs(y)\r\n      s = y.s;\r\n      y.s = 1;\r\n      q = div(x, y, 0, 3);\r\n      y.s = s;\r\n      q.s *= s;\r\n    } else {\r\n      q = div(x, y, 0, MODULO_MODE);\r\n    }\r\n\r\n    y = x.minus(q.times(y));\r\n\r\n    // To match JavaScript %, ensure sign of zero is sign of dividend.\r\n    if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n * 0 = 0\r\n   *  n * N = N\r\n   *  n * I = I\r\n   *  0 * n = 0\r\n   *  0 * 0 = 0\r\n   *  0 * N = N\r\n   *  0 * I = N\r\n   *  N * n = N\r\n   *  N * 0 = N\r\n   *  N * N = N\r\n   *  N * I = N\r\n   *  I * n = I\r\n   *  I * 0 = N\r\n   *  I * N = N\r\n   *  I * I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value\r\n   * of BigNumber(y, b).\r\n   */\r\n  P.multipliedBy = P.times = function (y, b) {\r\n    var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc,\r\n      base, sqrtBase,\r\n      x = this,\r\n      xc = x.c,\r\n      yc = (y = new BigNumber(y, b)).c;\r\n\r\n    // Either NaN, Infinity or 0?\r\n    if (!xc || !yc || !xc[0] || !yc[0]) {\r\n\r\n      // Return NaN if either is NaN, or one is 0 and the other is Infinity.\r\n      if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {\r\n        y.c = y.e = y.s = null;\r\n      } else {\r\n        y.s *= x.s;\r\n\r\n        // Return Infinity if either is Infinity.\r\n        if (!xc || !yc) {\r\n          y.c = y.e = null;\r\n\r\n        // Return 0 if either is 0.\r\n        } else {\r\n          y.c = [0];\r\n          y.e = 0;\r\n        }\r\n      }\r\n\r\n      return y;\r\n    }\r\n\r\n    e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);\r\n    y.s *= x.s;\r\n    xcL = xc.length;\r\n    ycL = yc.length;\r\n\r\n    // Ensure xc points to longer array and xcL to its length.\r\n    if (xcL < ycL) {\r\n      zc = xc;\r\n      xc = yc;\r\n      yc = zc;\r\n      i = xcL;\r\n      xcL = ycL;\r\n      ycL = i;\r\n    }\r\n\r\n    // Initialise the result array with zeros.\r\n    for (i = xcL + ycL, zc = []; i--; zc.push(0));\r\n\r\n    base = BASE;\r\n    sqrtBase = SQRT_BASE;\r\n\r\n    for (i = ycL; --i >= 0;) {\r\n      c = 0;\r\n      ylo = yc[i] % sqrtBase;\r\n      yhi = yc[i] / sqrtBase | 0;\r\n\r\n      for (k = xcL, j = i + k; j > i;) {\r\n        xlo = xc[--k] % sqrtBase;\r\n        xhi = xc[k] / sqrtBase | 0;\r\n        m = yhi * xlo + xhi * ylo;\r\n        xlo = ylo * xlo + ((m % sqrtBase) * sqrtBase) + zc[j] + c;\r\n        c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;\r\n        zc[j--] = xlo % base;\r\n      }\r\n\r\n      zc[j] = c;\r\n    }\r\n\r\n    if (c) {\r\n      ++e;\r\n    } else {\r\n      zc.splice(0, 1);\r\n    }\r\n\r\n    return normalise(y, zc, e);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber negated,\r\n   * i.e. multiplied by -1.\r\n   */\r\n  P.negated = function () {\r\n    var x = new BigNumber(this);\r\n    x.s = -x.s || null;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n + 0 = n\r\n   *  n + N = N\r\n   *  n + I = I\r\n   *  0 + n = n\r\n   *  0 + 0 = 0\r\n   *  0 + N = N\r\n   *  0 + I = I\r\n   *  N + n = N\r\n   *  N + 0 = N\r\n   *  N + N = N\r\n   *  N + I = N\r\n   *  I + n = I\r\n   *  I + 0 = I\r\n   *  I + N = N\r\n   *  I + I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber plus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.plus = function (y, b) {\r\n    var t,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n     if (a != b) {\r\n      y.s = -b;\r\n      return x.minus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Return Infinity if either Infinity.\r\n      if (!xc || !yc) return new BigNumber(a / 0);\r\n\r\n      // Either zero?\r\n      // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n      if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber(xc[0] ? x : a * 0);\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.\r\n    if (a = xe - ye) {\r\n      if (a > 0) {\r\n        ye = xe;\r\n        t = yc;\r\n      } else {\r\n        a = -a;\r\n        t = xc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (; a--; t.push(0));\r\n      t.reverse();\r\n    }\r\n\r\n    a = xc.length;\r\n    b = yc.length;\r\n\r\n    // Point xc to the longer array, and b to the shorter length.\r\n    if (a - b < 0) {\r\n      t = yc;\r\n      yc = xc;\r\n      xc = t;\r\n      b = a;\r\n    }\r\n\r\n    // Only start adding at yc.length - 1 as the further digits of xc can be ignored.\r\n    for (a = 0; b;) {\r\n      a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;\r\n      xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;\r\n    }\r\n\r\n    if (a) {\r\n      xc = [a].concat(xc);\r\n      ++ye;\r\n    }\r\n\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n    // ye = MAX_EXP + 1 possible\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   * If sd is undefined or null or true or false, return the number of significant digits of\r\n   * the value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   * If sd is true include integer-part trailing zeros in the count.\r\n   *\r\n   * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.\r\n   *                     boolean: whether to count integer-part trailing zeros: true or false.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.precision = P.sd = function (sd, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (sd != null && sd !== !!sd) {\r\n      intCheck(sd, 1, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), sd, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    v = c.length - 1;\r\n    n = v * LOG_BASE + 1;\r\n\r\n    if (v = c[v]) {\r\n\r\n      // Subtract the number of trailing zeros of the last element.\r\n      for (; v % 10 == 0; v /= 10, n--);\r\n\r\n      // Add the number of digits of the first element.\r\n      for (v = c[0]; v >= 10; v /= 10, n++);\r\n    }\r\n\r\n    if (sd && x.e + 1 > n) n = x.e + 1;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber shifted by k places\r\n   * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.\r\n   *\r\n   * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'\r\n   */\r\n  P.shiftedBy = function (k) {\r\n    intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\r\n    return this.times('1e' + k);\r\n  };\r\n\r\n\r\n  /*\r\n   *  sqrt(-n) =  N\r\n   *  sqrt(N) =  N\r\n   *  sqrt(-I) =  N\r\n   *  sqrt(I) =  I\r\n   *  sqrt(0) =  0\r\n   *  sqrt(-0) = -0\r\n   *\r\n   * Return a new BigNumber whose value is the square root of the value of this BigNumber,\r\n   * rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.squareRoot = P.sqrt = function () {\r\n    var m, n, r, rep, t,\r\n      x = this,\r\n      c = x.c,\r\n      s = x.s,\r\n      e = x.e,\r\n      dp = DECIMAL_PLACES + 4,\r\n      half = new BigNumber('0.5');\r\n\r\n    // Negative/NaN/Infinity/zero?\r\n    if (s !== 1 || !c || !c[0]) {\r\n      return new BigNumber(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);\r\n    }\r\n\r\n    // Initial estimate.\r\n    s = Math.sqrt(+valueOf(x));\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n    if (s == 0 || s == 1 / 0) {\r\n      n = coeffToString(c);\r\n      if ((n.length + e) % 2 == 0) n += '0';\r\n      s = Math.sqrt(+n);\r\n      e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n      if (s == 1 / 0) {\r\n        n = '5e' + e;\r\n      } else {\r\n        n = s.toExponential();\r\n        n = n.slice(0, n.indexOf('e') + 1) + e;\r\n      }\r\n\r\n      r = new BigNumber(n);\r\n    } else {\r\n      r = new BigNumber(s + '');\r\n    }\r\n\r\n    // Check for zero.\r\n    // r could be zero if MIN_EXP is changed after the this value was created.\r\n    // This would cause a division by zero (x/t) and hence Infinity below, which would cause\r\n    // coeffToString to throw.\r\n    if (r.c[0]) {\r\n      e = r.e;\r\n      s = e + dp;\r\n      if (s < 3) s = 0;\r\n\r\n      // Newton-Raphson iteration.\r\n      for (; ;) {\r\n        t = r;\r\n        r = half.times(t.plus(div(x, t, dp, 1)));\r\n\r\n        if (coeffToString(t.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {\r\n\r\n          // The exponent of r may here be one less than the final result exponent,\r\n          // e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits\r\n          // are indexed correctly.\r\n          if (r.e < e) --s;\r\n          n = n.slice(s - 3, s + 1);\r\n\r\n          // The 4th rounding digit may be in error by -1 so if the 4 rounding digits\r\n          // are 9999 or 4999 (i.e. approaching a rounding boundary) continue the\r\n          // iteration.\r\n          if (n == '9999' || !rep && n == '4999') {\r\n\r\n            // On the first iteration only, check to see if rounding up gives the\r\n            // exact result as the nines may infinitely repeat.\r\n            if (!rep) {\r\n              round(t, t.e + DECIMAL_PLACES + 2, 0);\r\n\r\n              if (t.times(t).eq(x)) {\r\n                r = t;\r\n                break;\r\n              }\r\n            }\r\n\r\n            dp += 4;\r\n            s += 4;\r\n            rep = 1;\r\n          } else {\r\n\r\n            // If rounding digits are null, 0{0,4} or 50{0,3}, check for exact\r\n            // result. If not, then there are further digits and m will be truthy.\r\n            if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n              // Truncate to the first rounding digit.\r\n              round(r, r.e + DECIMAL_PLACES + 2, 1);\r\n              m = !r.times(r).eq(x);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in exponential notation and\r\n   * rounded using ROUNDING_MODE to dp fixed decimal places.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp++;\r\n    }\r\n    return format(this, dp, rm, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounding\r\n   * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',\r\n   * but e.g. (-0.00001).toFixed(0) is '-0'.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp = dp + this.e + 1;\r\n    }\r\n    return format(this, dp, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounded\r\n   * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties\r\n   * of the format or FORMAT object (see BigNumber.set).\r\n   *\r\n   * The formatting object may contain some or all of the properties shown below.\r\n   *\r\n   * FORMAT = {\r\n   *   prefix: '',\r\n   *   groupSize: 3,\r\n   *   secondaryGroupSize: 0,\r\n   *   groupSeparator: ',',\r\n   *   decimalSeparator: '.',\r\n   *   fractionGroupSize: 0,\r\n   *   fractionGroupSeparator: '\\xA0',      // non-breaking space\r\n   *   suffix: ''\r\n   * };\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   * [format] {object} Formatting options. See FORMAT pbject above.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   * '[BigNumber Error] Argument not an object: {format}'\r\n   */\r\n  P.toFormat = function (dp, rm, format) {\r\n    var str,\r\n      x = this;\r\n\r\n    if (format == null) {\r\n      if (dp != null && rm && typeof rm == 'object') {\r\n        format = rm;\r\n        rm = null;\r\n      } else if (dp && typeof dp == 'object') {\r\n        format = dp;\r\n        dp = rm = null;\r\n      } else {\r\n        format = FORMAT;\r\n      }\r\n    } else if (typeof format != 'object') {\r\n      throw Error\r\n        (bignumberError + 'Argument not an object: ' + format);\r\n    }\r\n\r\n    str = x.toFixed(dp, rm);\r\n\r\n    if (x.c) {\r\n      var i,\r\n        arr = str.split('.'),\r\n        g1 = +format.groupSize,\r\n        g2 = +format.secondaryGroupSize,\r\n        groupSeparator = format.groupSeparator || '',\r\n        intPart = arr[0],\r\n        fractionPart = arr[1],\r\n        isNeg = x.s < 0,\r\n        intDigits = isNeg ? intPart.slice(1) : intPart,\r\n        len = intDigits.length;\r\n\r\n      if (g2) {\r\n        i = g1;\r\n        g1 = g2;\r\n        g2 = i;\r\n        len -= i;\r\n      }\r\n\r\n      if (g1 > 0 && len > 0) {\r\n        i = len % g1 || g1;\r\n        intPart = intDigits.substr(0, i);\r\n        for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);\r\n        if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);\r\n        if (isNeg) intPart = '-' + intPart;\r\n      }\r\n\r\n      str = fractionPart\r\n       ? intPart + (format.decimalSeparator || '') + ((g2 = +format.fractionGroupSize)\r\n        ? fractionPart.replace(new RegExp('\\\\d{' + g2 + '}\\\\B', 'g'),\r\n         '$&' + (format.fractionGroupSeparator || ''))\r\n        : fractionPart)\r\n       : intPart;\r\n    }\r\n\r\n    return (format.prefix || '') + str + (format.suffix || '');\r\n  };\r\n\r\n\r\n  /*\r\n   * Return an array of two BigNumbers representing the value of this BigNumber as a simple\r\n   * fraction with an integer numerator and an integer denominator.\r\n   * The denominator will be a positive non-zero value less than or equal to the specified\r\n   * maximum denominator. If a maximum denominator is not specified, the denominator will be\r\n   * the lowest value necessary to represent the number exactly.\r\n   *\r\n   * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.\r\n   *\r\n   * '[BigNumber Error] Argument {not an integer|out of range} : {md}'\r\n   */\r\n  P.toFraction = function (md) {\r\n    var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s,\r\n      x = this,\r\n      xc = x.c;\r\n\r\n    if (md != null) {\r\n      n = new BigNumber(md);\r\n\r\n      // Throw if md is less than one or is not an integer, unless it is Infinity.\r\n      if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {\r\n        throw Error\r\n          (bignumberError + 'Argument ' +\r\n            (n.isInteger() ? 'out of range: ' : 'not an integer: ') + valueOf(n));\r\n      }\r\n    }\r\n\r\n    if (!xc) return new BigNumber(x);\r\n\r\n    d = new BigNumber(ONE);\r\n    n1 = d0 = new BigNumber(ONE);\r\n    d1 = n0 = new BigNumber(ONE);\r\n    s = coeffToString(xc);\r\n\r\n    // Determine initial denominator.\r\n    // d is a power of 10 and the minimum max denominator that specifies the value exactly.\r\n    e = d.e = s.length - x.e - 1;\r\n    d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];\r\n    md = !md || n.comparedTo(d) > 0 ? (e > 0 ? d : n1) : n;\r\n\r\n    exp = MAX_EXP;\r\n    MAX_EXP = 1 / 0;\r\n    n = new BigNumber(s);\r\n\r\n    // n0 = d1 = 0\r\n    n0.c[0] = 0;\r\n\r\n    for (; ;)  {\r\n      q = div(n, d, 0, 1);\r\n      d2 = d0.plus(q.times(d1));\r\n      if (d2.comparedTo(md) == 1) break;\r\n      d0 = d1;\r\n      d1 = d2;\r\n      n1 = n0.plus(q.times(d2 = n1));\r\n      n0 = d2;\r\n      d = n.minus(q.times(d2 = d));\r\n      n = d2;\r\n    }\r\n\r\n    d2 = div(md.minus(d0), d1, 0, 1);\r\n    n0 = n0.plus(d2.times(n1));\r\n    d0 = d0.plus(d2.times(d1));\r\n    n0.s = n1.s = x.s;\r\n    e = e * 2;\r\n\r\n    // Determine which fraction is closer to x, n0/d0 or n1/d1\r\n    r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(\r\n        div(n0, d0, e, ROUNDING_MODE).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];\r\n\r\n    MAX_EXP = exp;\r\n\r\n    return r;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this BigNumber converted to a number primitive.\r\n   */\r\n  P.toNumber = function () {\r\n    return +valueOf(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber rounded to sd significant digits\r\n   * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits\r\n   * necessary to represent the integer part of the value in fixed-point notation, then use\r\n   * exponential notation.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    if (sd != null) intCheck(sd, 1, MAX);\r\n    return format(this, sd, rm, 2);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in base b, or base 10 if b is\r\n   * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and\r\n   * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent\r\n   * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than\r\n   * TO_EXP_NEG, return exponential notation.\r\n   *\r\n   * [b] {number} Integer, 2 to ALPHABET.length inclusive.\r\n   *\r\n   * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n   */\r\n  P.toString = function (b) {\r\n    var str,\r\n      n = this,\r\n      s = n.s,\r\n      e = n.e;\r\n\r\n    // Infinity or NaN?\r\n    if (e === null) {\r\n      if (s) {\r\n        str = 'Infinity';\r\n        if (s < 0) str = '-' + str;\r\n      } else {\r\n        str = 'NaN';\r\n      }\r\n    } else {\r\n      if (b == null) {\r\n        str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n         ? toExponential(coeffToString(n.c), e)\r\n         : toFixedPoint(coeffToString(n.c), e, '0');\r\n      } else if (b === 10 && alphabetHasNormalDecimalDigits) {\r\n        n = round(new BigNumber(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);\r\n        str = toFixedPoint(coeffToString(n.c), n.e, '0');\r\n      } else {\r\n        intCheck(b, 2, ALPHABET.length, 'Base');\r\n        str = convertBase(toFixedPoint(coeffToString(n.c), e, '0'), 10, b, s, true);\r\n      }\r\n\r\n      if (s < 0 && n.c[0]) str = '-' + str;\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return as toString, but do not accept a base argument, and include the minus sign for\r\n   * negative zero.\r\n   */\r\n  P.valueOf = P.toJSON = function () {\r\n    return valueOf(this);\r\n  };\r\n\r\n\r\n  P._isBigNumber = true;\r\n\r\n  P[Symbol.toStringTag] = 'BigNumber';\r\n\r\n  // Node.js v10.12.0+\r\n  P[Symbol.for('nodejs.util.inspect.custom')] = P.valueOf;\r\n\r\n  if (configObject != null) BigNumber.set(configObject);\r\n\r\n  return BigNumber;\r\n}\r\n\r\n\r\n// PRIVATE HELPER FUNCTIONS\r\n\r\n// These functions don't need access to variables,\r\n// e.g. DECIMAL_PLACES, in the scope of the `clone` function above.\r\n\r\n\r\nfunction bitFloor(n) {\r\n  var i = n | 0;\r\n  return n > 0 || n === i ? i : i - 1;\r\n}\r\n\r\n\r\n// Return a coefficient array as a string of base 10 digits.\r\nfunction coeffToString(a) {\r\n  var s, z,\r\n    i = 1,\r\n    j = a.length,\r\n    r = a[0] + '';\r\n\r\n  for (; i < j;) {\r\n    s = a[i++] + '';\r\n    z = LOG_BASE - s.length;\r\n    for (; z--; s = '0' + s);\r\n    r += s;\r\n  }\r\n\r\n  // Determine trailing zeros.\r\n  for (j = r.length; r.charCodeAt(--j) === 48;);\r\n\r\n  return r.slice(0, j + 1 || 1);\r\n}\r\n\r\n\r\n// Compare the value of BigNumbers x and y.\r\nfunction compare(x, y) {\r\n  var a, b,\r\n    xc = x.c,\r\n    yc = y.c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either NaN?\r\n  if (!i || !j) return null;\r\n\r\n  a = xc && !xc[0];\r\n  b = yc && !yc[0];\r\n\r\n  // Either zero?\r\n  if (a || b) return a ? b ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  a = i < 0;\r\n  b = k == l;\r\n\r\n  // Either Infinity?\r\n  if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;\r\n\r\n  // Compare exponents.\r\n  if (!b) return k > l ^ a ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ a ? 1 : -1;\r\n}\r\n\r\n\r\n/*\r\n * Check that n is a primitive number, an integer, and in range, otherwise throw.\r\n */\r\nfunction intCheck(n, min, max, name) {\r\n  if (n < min || n > max || n !== mathfloor(n)) {\r\n    throw Error\r\n     (bignumberError + (name || 'Argument') + (typeof n == 'number'\r\n       ? n < min || n > max ? ' out of range: ' : ' not an integer: '\r\n       : ' not a primitive number: ') + String(n));\r\n  }\r\n}\r\n\r\n\r\n// Assumes finite n.\r\nfunction isOdd(n) {\r\n  var k = n.c.length - 1;\r\n  return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;\r\n}\r\n\r\n\r\nfunction toExponential(str, e) {\r\n  return (str.length > 1 ? str.charAt(0) + '.' + str.slice(1) : str) +\r\n   (e < 0 ? 'e' : 'e+') + e;\r\n}\r\n\r\n\r\nfunction toFixedPoint(str, e, z) {\r\n  var len, zs;\r\n\r\n  // Negative exponent?\r\n  if (e < 0) {\r\n\r\n    // Prepend zeros.\r\n    for (zs = z + '.'; ++e; zs += z);\r\n    str = zs + str;\r\n\r\n  // Positive exponent\r\n  } else {\r\n    len = str.length;\r\n\r\n    // Append zeros.\r\n    if (++e > len) {\r\n      for (zs = z, e -= len; --e; zs += z);\r\n      str += zs;\r\n    } else if (e < len) {\r\n      str = str.slice(0, e) + '.' + str.slice(e);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// EXPORT\r\n\r\n\r\nexport var BigNumber = clone();\r\n\r\nexport default BigNumber;\r\n","// src/index.ts\nvar SplayTreeNode = class {\n  key;\n  left = null;\n  right = null;\n  constructor(key) {\n    this.key = key;\n  }\n};\nvar SplayTreeSetNode = class extends SplayTreeNode {\n  constructor(key) {\n    super(key);\n  }\n};\nvar SplayTreeMapNode = class _SplayTreeMapNode extends SplayTreeNode {\n  value;\n  constructor(key, value) {\n    super(key);\n    this.value = value;\n  }\n  replaceValue(value) {\n    const node = new _SplayTreeMapNode(this.key, value);\n    node.left = this.left;\n    node.right = this.right;\n    return node;\n  }\n};\nvar SplayTree = class {\n  size = 0;\n  modificationCount = 0;\n  splayCount = 0;\n  splay(key) {\n    const root = this.root;\n    if (root == null) {\n      this.compare(key, key);\n      return -1;\n    }\n    let right = null;\n    let newTreeRight = null;\n    let left = null;\n    let newTreeLeft = null;\n    let current = root;\n    const compare = this.compare;\n    let comp;\n    while (true) {\n      comp = compare(current.key, key);\n      if (comp > 0) {\n        let currentLeft = current.left;\n        if (currentLeft == null) break;\n        comp = compare(currentLeft.key, key);\n        if (comp > 0) {\n          current.left = currentLeft.right;\n          currentLeft.right = current;\n          current = currentLeft;\n          currentLeft = current.left;\n          if (currentLeft == null) break;\n        }\n        if (right == null) {\n          newTreeRight = current;\n        } else {\n          right.left = current;\n        }\n        right = current;\n        current = currentLeft;\n      } else if (comp < 0) {\n        let currentRight = current.right;\n        if (currentRight == null) break;\n        comp = compare(currentRight.key, key);\n        if (comp < 0) {\n          current.right = currentRight.left;\n          currentRight.left = current;\n          current = currentRight;\n          currentRight = current.right;\n          if (currentRight == null) break;\n        }\n        if (left == null) {\n          newTreeLeft = current;\n        } else {\n          left.right = current;\n        }\n        left = current;\n        current = currentRight;\n      } else {\n        break;\n      }\n    }\n    if (left != null) {\n      left.right = current.left;\n      current.left = newTreeLeft;\n    }\n    if (right != null) {\n      right.left = current.right;\n      current.right = newTreeRight;\n    }\n    if (this.root !== current) {\n      this.root = current;\n      this.splayCount++;\n    }\n    return comp;\n  }\n  splayMin(node) {\n    let current = node;\n    let nextLeft = current.left;\n    while (nextLeft != null) {\n      const left = nextLeft;\n      current.left = left.right;\n      left.right = current;\n      current = left;\n      nextLeft = current.left;\n    }\n    return current;\n  }\n  splayMax(node) {\n    let current = node;\n    let nextRight = current.right;\n    while (nextRight != null) {\n      const right = nextRight;\n      current.right = right.left;\n      right.left = current;\n      current = right;\n      nextRight = current.right;\n    }\n    return current;\n  }\n  _delete(key) {\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp != 0) return null;\n    let root = this.root;\n    const result = root;\n    const left = root.left;\n    this.size--;\n    if (left == null) {\n      this.root = root.right;\n    } else {\n      const right = root.right;\n      root = this.splayMax(left);\n      root.right = right;\n      this.root = root;\n    }\n    this.modificationCount++;\n    return result;\n  }\n  addNewRoot(node, comp) {\n    this.size++;\n    this.modificationCount++;\n    const root = this.root;\n    if (root == null) {\n      this.root = node;\n      return;\n    }\n    if (comp < 0) {\n      node.left = root;\n      node.right = root.right;\n      root.right = null;\n    } else {\n      node.right = root;\n      node.left = root.left;\n      root.left = null;\n    }\n    this.root = node;\n  }\n  _first() {\n    const root = this.root;\n    if (root == null) return null;\n    this.root = this.splayMin(root);\n    return this.root;\n  }\n  _last() {\n    const root = this.root;\n    if (root == null) return null;\n    this.root = this.splayMax(root);\n    return this.root;\n  }\n  clear() {\n    this.root = null;\n    this.size = 0;\n    this.modificationCount++;\n  }\n  has(key) {\n    return this.validKey(key) && this.splay(key) == 0;\n  }\n  defaultCompare() {\n    return (a, b) => a < b ? -1 : a > b ? 1 : 0;\n  }\n  wrap() {\n    return {\n      getRoot: () => {\n        return this.root;\n      },\n      setRoot: (root) => {\n        this.root = root;\n      },\n      getSize: () => {\n        return this.size;\n      },\n      getModificationCount: () => {\n        return this.modificationCount;\n      },\n      getSplayCount: () => {\n        return this.splayCount;\n      },\n      setSplayCount: (count) => {\n        this.splayCount = count;\n      },\n      splay: (key) => {\n        return this.splay(key);\n      },\n      has: (key) => {\n        return this.has(key);\n      }\n    };\n  }\n};\nvar SplayTreeMap = class extends SplayTree {\n  root = null;\n  compare;\n  validKey;\n  constructor(compare, isValidKey) {\n    super();\n    this.compare = compare ?? this.defaultCompare();\n    this.validKey = isValidKey ?? ((a) => a != null && a != void 0);\n  }\n  delete(key) {\n    if (!this.validKey(key)) return false;\n    return this._delete(key) != null;\n  }\n  forEach(f) {\n    const nodes = new SplayTreeMapEntryIterableIterator(this.wrap());\n    let result;\n    while (result = nodes.next(), !result.done) {\n      f(result.value[1], result.value[0], this);\n    }\n  }\n  get(key) {\n    if (!this.validKey(key)) return void 0;\n    if (this.root != null) {\n      const comp = this.splay(key);\n      if (comp == 0) {\n        return this.root.value;\n      }\n    }\n    return void 0;\n  }\n  hasValue(value) {\n    const initialSplayCount = this.splayCount;\n    const visit = (node) => {\n      while (node != null) {\n        if (node.value == value) return true;\n        if (initialSplayCount != this.splayCount) {\n          throw \"Concurrent modification during iteration.\";\n        }\n        if (node.right != null && visit(node.right)) {\n          return true;\n        }\n        node = node.left;\n      }\n      return false;\n    };\n    return visit(this.root);\n  }\n  set(key, value) {\n    const comp = this.splay(key);\n    if (comp == 0) {\n      this.root = this.root.replaceValue(value);\n      this.splayCount += 1;\n      return this;\n    }\n    this.addNewRoot(new SplayTreeMapNode(key, value), comp);\n    return this;\n  }\n  setAll(other) {\n    other.forEach((value, key) => {\n      this.set(key, value);\n    });\n  }\n  setIfAbsent(key, ifAbsent) {\n    let comp = this.splay(key);\n    if (comp == 0) {\n      return this.root.value;\n    }\n    const modificationCount = this.modificationCount;\n    const splayCount = this.splayCount;\n    const value = ifAbsent();\n    if (modificationCount != this.modificationCount) {\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (splayCount != this.splayCount) {\n      comp = this.splay(key);\n    }\n    this.addNewRoot(new SplayTreeMapNode(key, value), comp);\n    return value;\n  }\n  isEmpty() {\n    return this.root == null;\n  }\n  isNotEmpty() {\n    return !this.isEmpty();\n  }\n  firstKey() {\n    if (this.root == null) return null;\n    return this._first().key;\n  }\n  lastKey() {\n    if (this.root == null) return null;\n    return this._last().key;\n  }\n  lastKeyBefore(key) {\n    if (key == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp < 0) return this.root.key;\n    let node = this.root.left;\n    if (node == null) return null;\n    let nodeRight = node.right;\n    while (nodeRight != null) {\n      node = nodeRight;\n      nodeRight = node.right;\n    }\n    return node.key;\n  }\n  firstKeyAfter(key) {\n    if (key == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp > 0) return this.root.key;\n    let node = this.root.right;\n    if (node == null) return null;\n    let nodeLeft = node.left;\n    while (nodeLeft != null) {\n      node = nodeLeft;\n      nodeLeft = node.left;\n    }\n    return node.key;\n  }\n  update(key, update, ifAbsent) {\n    let comp = this.splay(key);\n    if (comp == 0) {\n      const modificationCount = this.modificationCount;\n      const splayCount = this.splayCount;\n      const newValue = update(this.root.value);\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (splayCount != this.splayCount) {\n        this.splay(key);\n      }\n      this.root = this.root.replaceValue(newValue);\n      this.splayCount += 1;\n      return newValue;\n    }\n    if (ifAbsent != null) {\n      const modificationCount = this.modificationCount;\n      const splayCount = this.splayCount;\n      const newValue = ifAbsent();\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (splayCount != this.splayCount) {\n        comp = this.splay(key);\n      }\n      this.addNewRoot(new SplayTreeMapNode(key, newValue), comp);\n      return newValue;\n    }\n    throw \"Invalid argument (key): Key not in map.\";\n  }\n  updateAll(update) {\n    const root = this.root;\n    if (root == null) return;\n    const iterator = new SplayTreeMapEntryIterableIterator(this.wrap());\n    let node;\n    while (node = iterator.next(), !node.done) {\n      const newValue = update(...node.value);\n      iterator.replaceValue(newValue);\n    }\n  }\n  keys() {\n    return new SplayTreeKeyIterableIterator(this.wrap());\n  }\n  values() {\n    return new SplayTreeValueIterableIterator(this.wrap());\n  }\n  entries() {\n    return this[Symbol.iterator]();\n  }\n  [Symbol.iterator]() {\n    return new SplayTreeMapEntryIterableIterator(this.wrap());\n  }\n  [Symbol.toStringTag] = \"[object Map]\";\n};\nvar SplayTreeSet = class _SplayTreeSet extends SplayTree {\n  root = null;\n  compare;\n  validKey;\n  constructor(compare, isValidKey) {\n    super();\n    this.compare = compare ?? this.defaultCompare();\n    this.validKey = isValidKey ?? ((v) => v != null && v != void 0);\n  }\n  delete(element) {\n    if (!this.validKey(element)) return false;\n    return this._delete(element) != null;\n  }\n  deleteAll(elements) {\n    for (const element of elements) {\n      this.delete(element);\n    }\n  }\n  forEach(f) {\n    const nodes = this[Symbol.iterator]();\n    let result;\n    while (result = nodes.next(), !result.done) {\n      f(result.value, result.value, this);\n    }\n  }\n  add(element) {\n    const compare = this.splay(element);\n    if (compare != 0) this.addNewRoot(new SplayTreeSetNode(element), compare);\n    return this;\n  }\n  addAndReturn(element) {\n    const compare = this.splay(element);\n    if (compare != 0) this.addNewRoot(new SplayTreeSetNode(element), compare);\n    return this.root.key;\n  }\n  addAll(elements) {\n    for (const element of elements) {\n      this.add(element);\n    }\n  }\n  isEmpty() {\n    return this.root == null;\n  }\n  isNotEmpty() {\n    return this.root != null;\n  }\n  single() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    if (this.size > 1) throw \"Bad state: Too many element\";\n    return this.root.key;\n  }\n  first() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    return this._first().key;\n  }\n  last() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    return this._last().key;\n  }\n  lastBefore(element) {\n    if (element == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(element);\n    if (comp < 0) return this.root.key;\n    let node = this.root.left;\n    if (node == null) return null;\n    let nodeRight = node.right;\n    while (nodeRight != null) {\n      node = nodeRight;\n      nodeRight = node.right;\n    }\n    return node.key;\n  }\n  firstAfter(element) {\n    if (element == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(element);\n    if (comp > 0) return this.root.key;\n    let node = this.root.right;\n    if (node == null) return null;\n    let nodeLeft = node.left;\n    while (nodeLeft != null) {\n      node = nodeLeft;\n      nodeLeft = node.left;\n    }\n    return node.key;\n  }\n  retainAll(elements) {\n    const retainSet = new _SplayTreeSet(this.compare, this.validKey);\n    const modificationCount = this.modificationCount;\n    for (const object of elements) {\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (this.validKey(object) && this.splay(object) == 0) {\n        retainSet.add(this.root.key);\n      }\n    }\n    if (retainSet.size != this.size) {\n      this.root = retainSet.root;\n      this.size = retainSet.size;\n      this.modificationCount++;\n    }\n  }\n  lookup(object) {\n    if (!this.validKey(object)) return null;\n    const comp = this.splay(object);\n    if (comp != 0) return null;\n    return this.root.key;\n  }\n  intersection(other) {\n    const result = new _SplayTreeSet(this.compare, this.validKey);\n    for (const element of this) {\n      if (other.has(element)) result.add(element);\n    }\n    return result;\n  }\n  difference(other) {\n    const result = new _SplayTreeSet(this.compare, this.validKey);\n    for (const element of this) {\n      if (!other.has(element)) result.add(element);\n    }\n    return result;\n  }\n  union(other) {\n    const u = this.clone();\n    u.addAll(other);\n    return u;\n  }\n  clone() {\n    const set = new _SplayTreeSet(this.compare, this.validKey);\n    set.size = this.size;\n    set.root = this.copyNode(this.root);\n    return set;\n  }\n  copyNode(node) {\n    if (node == null) return null;\n    function copyChildren(node2, dest) {\n      let left;\n      let right;\n      do {\n        left = node2.left;\n        right = node2.right;\n        if (left != null) {\n          const newLeft = new SplayTreeSetNode(left.key);\n          dest.left = newLeft;\n          copyChildren(left, newLeft);\n        }\n        if (right != null) {\n          const newRight = new SplayTreeSetNode(right.key);\n          dest.right = newRight;\n          node2 = right;\n          dest = newRight;\n        }\n      } while (right != null);\n    }\n    const result = new SplayTreeSetNode(node.key);\n    copyChildren(node, result);\n    return result;\n  }\n  toSet() {\n    return this.clone();\n  }\n  entries() {\n    return new SplayTreeSetEntryIterableIterator(this.wrap());\n  }\n  keys() {\n    return this[Symbol.iterator]();\n  }\n  values() {\n    return this[Symbol.iterator]();\n  }\n  [Symbol.iterator]() {\n    return new SplayTreeKeyIterableIterator(this.wrap());\n  }\n  [Symbol.toStringTag] = \"[object Set]\";\n};\nvar SplayTreeIterableIterator = class {\n  tree;\n  path = new Array();\n  modificationCount = null;\n  splayCount;\n  constructor(tree) {\n    this.tree = tree;\n    this.splayCount = tree.getSplayCount();\n  }\n  [Symbol.iterator]() {\n    return this;\n  }\n  next() {\n    if (this.moveNext()) return { done: false, value: this.current() };\n    return { done: true, value: null };\n  }\n  current() {\n    if (!this.path.length) return null;\n    const node = this.path[this.path.length - 1];\n    return this.getValue(node);\n  }\n  rebuildPath(key) {\n    this.path.splice(0, this.path.length);\n    this.tree.splay(key);\n    this.path.push(this.tree.getRoot());\n    this.splayCount = this.tree.getSplayCount();\n  }\n  findLeftMostDescendent(node) {\n    while (node != null) {\n      this.path.push(node);\n      node = node.left;\n    }\n  }\n  moveNext() {\n    if (this.modificationCount != this.tree.getModificationCount()) {\n      if (this.modificationCount == null) {\n        this.modificationCount = this.tree.getModificationCount();\n        let node2 = this.tree.getRoot();\n        while (node2 != null) {\n          this.path.push(node2);\n          node2 = node2.left;\n        }\n        return this.path.length > 0;\n      }\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (!this.path.length) return false;\n    if (this.splayCount != this.tree.getSplayCount()) {\n      this.rebuildPath(this.path[this.path.length - 1].key);\n    }\n    let node = this.path[this.path.length - 1];\n    let next = node.right;\n    if (next != null) {\n      while (next != null) {\n        this.path.push(next);\n        next = next.left;\n      }\n      return true;\n    }\n    this.path.pop();\n    while (this.path.length && this.path[this.path.length - 1].right === node) {\n      node = this.path.pop();\n    }\n    return this.path.length > 0;\n  }\n};\nvar SplayTreeKeyIterableIterator = class extends SplayTreeIterableIterator {\n  getValue(node) {\n    return node.key;\n  }\n};\nvar SplayTreeSetEntryIterableIterator = class extends SplayTreeIterableIterator {\n  getValue(node) {\n    return [node.key, node.key];\n  }\n};\nvar SplayTreeValueIterableIterator = class extends SplayTreeIterableIterator {\n  constructor(map) {\n    super(map);\n  }\n  getValue(node) {\n    return node.value;\n  }\n};\nvar SplayTreeMapEntryIterableIterator = class extends SplayTreeIterableIterator {\n  constructor(map) {\n    super(map);\n  }\n  getValue(node) {\n    return [node.key, node.value];\n  }\n  replaceValue(value) {\n    if (this.modificationCount != this.tree.getModificationCount()) {\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (this.splayCount != this.tree.getSplayCount()) {\n      this.rebuildPath(this.path[this.path.length - 1].key);\n    }\n    const last = this.path.pop();\n    const newLast = last.replaceValue(value);\n    if (!this.path.length) {\n      this.tree.setRoot(newLast);\n    } else {\n      const parent = this.path[this.path.length - 1];\n      if (last === parent.left) {\n        parent.left = newLast;\n      } else {\n        parent.right = newLast;\n      }\n    }\n    this.path.push(newLast);\n    const count = this.tree.getSplayCount() + 1;\n    this.tree.setSplayCount(count);\n    this.splayCount = count;\n  }\n};\nexport {\n  SplayTreeMap,\n  SplayTreeSet\n};\n//# sourceMappingURL=index.js.map","// src/geom-in.ts\nimport BigNumber2 from \"bignumber.js\";\n\n// src/constant.ts\nvar constant_default = (x) => {\n  return () => {\n    return x;\n  };\n};\n\n// src/compare.ts\nvar compare_default = (eps) => {\n  const almostEqual = eps ? (a, b) => b.minus(a).abs().isLessThanOrEqualTo(eps) : constant_default(false);\n  return (a, b) => {\n    if (almostEqual(a, b)) return 0;\n    return a.comparedTo(b);\n  };\n};\n\n// src/orient.ts\nfunction orient_default(eps) {\n  const almostCollinear = eps ? (area2, ax, ay, cx, cy) => area2.exponentiatedBy(2).isLessThanOrEqualTo(\n    cx.minus(ax).exponentiatedBy(2).plus(cy.minus(ay).exponentiatedBy(2)).times(eps)\n  ) : constant_default(false);\n  return (a, b, c) => {\n    const ax = a.x, ay = a.y, cx = c.x, cy = c.y;\n    const area2 = ay.minus(cy).times(b.x.minus(cx)).minus(ax.minus(cx).times(b.y.minus(cy)));\n    if (almostCollinear(area2, ax, ay, cx, cy)) return 0;\n    return area2.comparedTo(0);\n  };\n}\n\n// src/snap.ts\nimport BigNumber from \"bignumber.js\";\nimport { SplayTreeSet } from \"splaytree-ts\";\n\n// src/identity.ts\nvar identity_default = (x) => {\n  return x;\n};\n\n// src/snap.ts\nvar snap_default = (eps) => {\n  if (eps) {\n    const xTree = new SplayTreeSet(compare_default(eps));\n    const yTree = new SplayTreeSet(compare_default(eps));\n    const snapCoord = (coord, tree) => {\n      return tree.addAndReturn(coord);\n    };\n    const snap = (v) => {\n      return {\n        x: snapCoord(v.x, xTree),\n        y: snapCoord(v.y, yTree)\n      };\n    };\n    snap({ x: new BigNumber(0), y: new BigNumber(0) });\n    return snap;\n  }\n  return identity_default;\n};\n\n// src/precision.ts\nvar set = (eps) => {\n  return {\n    set: (eps2) => {\n      precision = set(eps2);\n    },\n    reset: () => set(eps),\n    compare: compare_default(eps),\n    snap: snap_default(eps),\n    orient: orient_default(eps)\n  };\n};\nvar precision = set();\n\n// src/bbox.ts\nvar isInBbox = (bbox, point) => {\n  return bbox.ll.x.isLessThanOrEqualTo(point.x) && point.x.isLessThanOrEqualTo(bbox.ur.x) && bbox.ll.y.isLessThanOrEqualTo(point.y) && point.y.isLessThanOrEqualTo(bbox.ur.y);\n};\nvar getBboxOverlap = (b1, b2) => {\n  if (b2.ur.x.isLessThan(b1.ll.x) || b1.ur.x.isLessThan(b2.ll.x) || b2.ur.y.isLessThan(b1.ll.y) || b1.ur.y.isLessThan(b2.ll.y))\n    return null;\n  const lowerX = b1.ll.x.isLessThan(b2.ll.x) ? b2.ll.x : b1.ll.x;\n  const upperX = b1.ur.x.isLessThan(b2.ur.x) ? b1.ur.x : b2.ur.x;\n  const lowerY = b1.ll.y.isLessThan(b2.ll.y) ? b2.ll.y : b1.ll.y;\n  const upperY = b1.ur.y.isLessThan(b2.ur.y) ? b1.ur.y : b2.ur.y;\n  return { ll: { x: lowerX, y: lowerY }, ur: { x: upperX, y: upperY } };\n};\n\n// src/operation.ts\nimport { SplayTreeSet as SplayTreeSet3 } from \"splaytree-ts\";\n\n// src/vector.ts\nvar crossProduct = (a, b) => a.x.times(b.y).minus(a.y.times(b.x));\nvar dotProduct = (a, b) => a.x.times(b.x).plus(a.y.times(b.y));\nvar length = (v) => dotProduct(v, v).sqrt();\nvar sineOfAngle = (pShared, pBase, pAngle) => {\n  const vBase = { x: pBase.x.minus(pShared.x), y: pBase.y.minus(pShared.y) };\n  const vAngle = { x: pAngle.x.minus(pShared.x), y: pAngle.y.minus(pShared.y) };\n  return crossProduct(vAngle, vBase).div(length(vAngle)).div(length(vBase));\n};\nvar cosineOfAngle = (pShared, pBase, pAngle) => {\n  const vBase = { x: pBase.x.minus(pShared.x), y: pBase.y.minus(pShared.y) };\n  const vAngle = { x: pAngle.x.minus(pShared.x), y: pAngle.y.minus(pShared.y) };\n  return dotProduct(vAngle, vBase).div(length(vAngle)).div(length(vBase));\n};\nvar horizontalIntersection = (pt, v, y) => {\n  if (v.y.isZero()) return null;\n  return { x: pt.x.plus(v.x.div(v.y).times(y.minus(pt.y))), y };\n};\nvar verticalIntersection = (pt, v, x) => {\n  if (v.x.isZero()) return null;\n  return { x, y: pt.y.plus(v.y.div(v.x).times(x.minus(pt.x))) };\n};\nvar intersection = (pt1, v1, pt2, v2) => {\n  if (v1.x.isZero()) return verticalIntersection(pt2, v2, pt1.x);\n  if (v2.x.isZero()) return verticalIntersection(pt1, v1, pt2.x);\n  if (v1.y.isZero()) return horizontalIntersection(pt2, v2, pt1.y);\n  if (v2.y.isZero()) return horizontalIntersection(pt1, v1, pt2.y);\n  const kross = crossProduct(v1, v2);\n  if (kross.isZero()) return null;\n  const ve = { x: pt2.x.minus(pt1.x), y: pt2.y.minus(pt1.y) };\n  const d1 = crossProduct(ve, v1).div(kross);\n  const d2 = crossProduct(ve, v2).div(kross);\n  const x1 = pt1.x.plus(d2.times(v1.x)), x2 = pt2.x.plus(d1.times(v2.x));\n  const y1 = pt1.y.plus(d2.times(v1.y)), y2 = pt2.y.plus(d1.times(v2.y));\n  const x = x1.plus(x2).div(2);\n  const y = y1.plus(y2).div(2);\n  return { x, y };\n};\n\n// src/sweep-event.ts\nvar SweepEvent = class _SweepEvent {\n  point;\n  isLeft;\n  segment;\n  otherSE;\n  consumedBy;\n  // for ordering sweep events in the sweep event queue\n  static compare(a, b) {\n    const ptCmp = _SweepEvent.comparePoints(a.point, b.point);\n    if (ptCmp !== 0) return ptCmp;\n    if (a.point !== b.point) a.link(b);\n    if (a.isLeft !== b.isLeft) return a.isLeft ? 1 : -1;\n    return Segment.compare(a.segment, b.segment);\n  }\n  // for ordering points in sweep line order\n  static comparePoints(aPt, bPt) {\n    if (aPt.x.isLessThan(bPt.x)) return -1;\n    if (aPt.x.isGreaterThan(bPt.x)) return 1;\n    if (aPt.y.isLessThan(bPt.y)) return -1;\n    if (aPt.y.isGreaterThan(bPt.y)) return 1;\n    return 0;\n  }\n  // Warning: 'point' input will be modified and re-used (for performance)\n  constructor(point, isLeft) {\n    if (point.events === void 0) point.events = [this];\n    else point.events.push(this);\n    this.point = point;\n    this.isLeft = isLeft;\n  }\n  link(other) {\n    if (other.point === this.point) {\n      throw new Error(\"Tried to link already linked events\");\n    }\n    const otherEvents = other.point.events;\n    for (let i = 0, iMax = otherEvents.length; i < iMax; i++) {\n      const evt = otherEvents[i];\n      this.point.events.push(evt);\n      evt.point = this.point;\n    }\n    this.checkForConsuming();\n  }\n  /* Do a pass over our linked events and check to see if any pair\n   * of segments match, and should be consumed. */\n  checkForConsuming() {\n    const numEvents = this.point.events.length;\n    for (let i = 0; i < numEvents; i++) {\n      const evt1 = this.point.events[i];\n      if (evt1.segment.consumedBy !== void 0) continue;\n      for (let j = i + 1; j < numEvents; j++) {\n        const evt2 = this.point.events[j];\n        if (evt2.consumedBy !== void 0) continue;\n        if (evt1.otherSE.point.events !== evt2.otherSE.point.events) continue;\n        evt1.segment.consume(evt2.segment);\n      }\n    }\n  }\n  getAvailableLinkedEvents() {\n    const events = [];\n    for (let i = 0, iMax = this.point.events.length; i < iMax; i++) {\n      const evt = this.point.events[i];\n      if (evt !== this && !evt.segment.ringOut && evt.segment.isInResult()) {\n        events.push(evt);\n      }\n    }\n    return events;\n  }\n  /**\n   * Returns a comparator function for sorting linked events that will\n   * favor the event that will give us the smallest left-side angle.\n   * All ring construction starts as low as possible heading to the right,\n   * so by always turning left as sharp as possible we'll get polygons\n   * without uncessary loops & holes.\n   *\n   * The comparator function has a compute cache such that it avoids\n   * re-computing already-computed values.\n   */\n  getLeftmostComparator(baseEvent) {\n    const cache = /* @__PURE__ */ new Map();\n    const fillCache = (linkedEvent) => {\n      const nextEvent = linkedEvent.otherSE;\n      cache.set(linkedEvent, {\n        sine: sineOfAngle(this.point, baseEvent.point, nextEvent.point),\n        cosine: cosineOfAngle(this.point, baseEvent.point, nextEvent.point)\n      });\n    };\n    return (a, b) => {\n      if (!cache.has(a)) fillCache(a);\n      if (!cache.has(b)) fillCache(b);\n      const { sine: asine, cosine: acosine } = cache.get(a);\n      const { sine: bsine, cosine: bcosine } = cache.get(b);\n      if (asine.isGreaterThanOrEqualTo(0) && bsine.isGreaterThanOrEqualTo(0)) {\n        if (acosine.isLessThan(bcosine)) return 1;\n        if (acosine.isGreaterThan(bcosine)) return -1;\n        return 0;\n      }\n      if (asine.isLessThan(0) && bsine.isLessThan(0)) {\n        if (acosine.isLessThan(bcosine)) return -1;\n        if (acosine.isGreaterThan(bcosine)) return 1;\n        return 0;\n      }\n      if (bsine.isLessThan(asine)) return -1;\n      if (bsine.isGreaterThan(asine)) return 1;\n      return 0;\n    };\n  }\n};\n\n// src/geom-out.ts\nvar RingOut = class _RingOut {\n  events;\n  poly;\n  _isExteriorRing;\n  _enclosingRing;\n  /* Given the segments from the sweep line pass, compute & return a series\n   * of closed rings from all the segments marked to be part of the result */\n  static factory(allSegments) {\n    const ringsOut = [];\n    for (let i = 0, iMax = allSegments.length; i < iMax; i++) {\n      const segment = allSegments[i];\n      if (!segment.isInResult() || segment.ringOut) continue;\n      let prevEvent = null;\n      let event = segment.leftSE;\n      let nextEvent = segment.rightSE;\n      const events = [event];\n      const startingPoint = event.point;\n      const intersectionLEs = [];\n      while (true) {\n        prevEvent = event;\n        event = nextEvent;\n        events.push(event);\n        if (event.point === startingPoint) break;\n        while (true) {\n          const availableLEs = event.getAvailableLinkedEvents();\n          if (availableLEs.length === 0) {\n            const firstPt = events[0].point;\n            const lastPt = events[events.length - 1].point;\n            throw new Error(\n              `Unable to complete output ring starting at [${firstPt.x}, ${firstPt.y}]. Last matching segment found ends at [${lastPt.x}, ${lastPt.y}].`\n            );\n          }\n          if (availableLEs.length === 1) {\n            nextEvent = availableLEs[0].otherSE;\n            break;\n          }\n          let indexLE = null;\n          for (let j = 0, jMax = intersectionLEs.length; j < jMax; j++) {\n            if (intersectionLEs[j].point === event.point) {\n              indexLE = j;\n              break;\n            }\n          }\n          if (indexLE !== null) {\n            const intersectionLE = intersectionLEs.splice(indexLE)[0];\n            const ringEvents = events.splice(intersectionLE.index);\n            ringEvents.unshift(ringEvents[0].otherSE);\n            ringsOut.push(new _RingOut(ringEvents.reverse()));\n            continue;\n          }\n          intersectionLEs.push({\n            index: events.length,\n            point: event.point\n          });\n          const comparator = event.getLeftmostComparator(prevEvent);\n          nextEvent = availableLEs.sort(comparator)[0].otherSE;\n          break;\n        }\n      }\n      ringsOut.push(new _RingOut(events));\n    }\n    return ringsOut;\n  }\n  constructor(events) {\n    this.events = events;\n    for (let i = 0, iMax = events.length; i < iMax; i++) {\n      events[i].segment.ringOut = this;\n    }\n    this.poly = null;\n  }\n  getGeom() {\n    let prevPt = this.events[0].point;\n    const points = [prevPt];\n    for (let i = 1, iMax = this.events.length - 1; i < iMax; i++) {\n      const pt2 = this.events[i].point;\n      const nextPt2 = this.events[i + 1].point;\n      if (precision.orient(pt2, prevPt, nextPt2) === 0) continue;\n      points.push(pt2);\n      prevPt = pt2;\n    }\n    if (points.length === 1) return null;\n    const pt = points[0];\n    const nextPt = points[1];\n    if (precision.orient(pt, prevPt, nextPt) === 0) points.shift();\n    points.push(points[0]);\n    const step = this.isExteriorRing() ? 1 : -1;\n    const iStart = this.isExteriorRing() ? 0 : points.length - 1;\n    const iEnd = this.isExteriorRing() ? points.length : -1;\n    const orderedPoints = [];\n    for (let i = iStart; i != iEnd; i += step)\n      orderedPoints.push([points[i].x.toNumber(), points[i].y.toNumber()]);\n    return orderedPoints;\n  }\n  isExteriorRing() {\n    if (this._isExteriorRing === void 0) {\n      const enclosing = this.enclosingRing();\n      this._isExteriorRing = enclosing ? !enclosing.isExteriorRing() : true;\n    }\n    return this._isExteriorRing;\n  }\n  enclosingRing() {\n    if (this._enclosingRing === void 0) {\n      this._enclosingRing = this._calcEnclosingRing();\n    }\n    return this._enclosingRing;\n  }\n  /* Returns the ring that encloses this one, if any */\n  _calcEnclosingRing() {\n    let leftMostEvt = this.events[0];\n    for (let i = 1, iMax = this.events.length; i < iMax; i++) {\n      const evt = this.events[i];\n      if (SweepEvent.compare(leftMostEvt, evt) > 0) leftMostEvt = evt;\n    }\n    let prevSeg = leftMostEvt.segment.prevInResult();\n    let prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n    while (true) {\n      if (!prevSeg) return null;\n      if (!prevPrevSeg) return prevSeg.ringOut;\n      if (prevPrevSeg.ringOut !== prevSeg.ringOut) {\n        if (prevPrevSeg.ringOut?.enclosingRing() !== prevSeg.ringOut) {\n          return prevSeg.ringOut;\n        } else return prevSeg.ringOut?.enclosingRing();\n      }\n      prevSeg = prevPrevSeg.prevInResult();\n      prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n    }\n  }\n};\nvar PolyOut = class {\n  exteriorRing;\n  interiorRings;\n  constructor(exteriorRing) {\n    this.exteriorRing = exteriorRing;\n    exteriorRing.poly = this;\n    this.interiorRings = [];\n  }\n  addInterior(ring) {\n    this.interiorRings.push(ring);\n    ring.poly = this;\n  }\n  getGeom() {\n    const geom0 = this.exteriorRing.getGeom();\n    if (geom0 === null) return null;\n    const geom = [geom0];\n    for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n      const ringGeom = this.interiorRings[i].getGeom();\n      if (ringGeom === null) continue;\n      geom.push(ringGeom);\n    }\n    return geom;\n  }\n};\nvar MultiPolyOut = class {\n  rings;\n  polys;\n  constructor(rings) {\n    this.rings = rings;\n    this.polys = this._composePolys(rings);\n  }\n  getGeom() {\n    const geom = [];\n    for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n      const polyGeom = this.polys[i].getGeom();\n      if (polyGeom === null) continue;\n      geom.push(polyGeom);\n    }\n    return geom;\n  }\n  _composePolys(rings) {\n    const polys = [];\n    for (let i = 0, iMax = rings.length; i < iMax; i++) {\n      const ring = rings[i];\n      if (ring.poly) continue;\n      if (ring.isExteriorRing()) polys.push(new PolyOut(ring));\n      else {\n        const enclosingRing = ring.enclosingRing();\n        if (!enclosingRing?.poly) polys.push(new PolyOut(enclosingRing));\n        enclosingRing?.poly?.addInterior(ring);\n      }\n    }\n    return polys;\n  }\n};\n\n// src/sweep-line.ts\nimport { SplayTreeSet as SplayTreeSet2 } from \"splaytree-ts\";\nvar SweepLine = class {\n  queue;\n  tree;\n  segments;\n  constructor(queue, comparator = Segment.compare) {\n    this.queue = queue;\n    this.tree = new SplayTreeSet2(comparator);\n    this.segments = [];\n  }\n  process(event) {\n    const segment = event.segment;\n    const newEvents = [];\n    if (event.consumedBy) {\n      if (event.isLeft) this.queue.delete(event.otherSE);\n      else this.tree.delete(segment);\n      return newEvents;\n    }\n    if (event.isLeft) this.tree.add(segment);\n    let prevSeg = segment;\n    let nextSeg = segment;\n    do {\n      prevSeg = this.tree.lastBefore(prevSeg);\n    } while (prevSeg != null && prevSeg.consumedBy != void 0);\n    do {\n      nextSeg = this.tree.firstAfter(nextSeg);\n    } while (nextSeg != null && nextSeg.consumedBy != void 0);\n    if (event.isLeft) {\n      let prevMySplitter = null;\n      if (prevSeg) {\n        const prevInter = prevSeg.getIntersection(segment);\n        if (prevInter !== null) {\n          if (!segment.isAnEndpoint(prevInter)) prevMySplitter = prevInter;\n          if (!prevSeg.isAnEndpoint(prevInter)) {\n            const newEventsFromSplit = this._splitSafely(prevSeg, prevInter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      let nextMySplitter = null;\n      if (nextSeg) {\n        const nextInter = nextSeg.getIntersection(segment);\n        if (nextInter !== null) {\n          if (!segment.isAnEndpoint(nextInter)) nextMySplitter = nextInter;\n          if (!nextSeg.isAnEndpoint(nextInter)) {\n            const newEventsFromSplit = this._splitSafely(nextSeg, nextInter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      if (prevMySplitter !== null || nextMySplitter !== null) {\n        let mySplitter = null;\n        if (prevMySplitter === null) mySplitter = nextMySplitter;\n        else if (nextMySplitter === null) mySplitter = prevMySplitter;\n        else {\n          const cmpSplitters = SweepEvent.comparePoints(\n            prevMySplitter,\n            nextMySplitter\n          );\n          mySplitter = cmpSplitters <= 0 ? prevMySplitter : nextMySplitter;\n        }\n        this.queue.delete(segment.rightSE);\n        newEvents.push(segment.rightSE);\n        const newEventsFromSplit = segment.split(mySplitter);\n        for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n          newEvents.push(newEventsFromSplit[i]);\n        }\n      }\n      if (newEvents.length > 0) {\n        this.tree.delete(segment);\n        newEvents.push(event);\n      } else {\n        this.segments.push(segment);\n        segment.prev = prevSeg;\n      }\n    } else {\n      if (prevSeg && nextSeg) {\n        const inter = prevSeg.getIntersection(nextSeg);\n        if (inter !== null) {\n          if (!prevSeg.isAnEndpoint(inter)) {\n            const newEventsFromSplit = this._splitSafely(prevSeg, inter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n          if (!nextSeg.isAnEndpoint(inter)) {\n            const newEventsFromSplit = this._splitSafely(nextSeg, inter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      this.tree.delete(segment);\n    }\n    return newEvents;\n  }\n  /* Safely split a segment that is currently in the datastructures\n   * IE - a segment other than the one that is currently being processed. */\n  _splitSafely(seg, pt) {\n    this.tree.delete(seg);\n    const rightSE = seg.rightSE;\n    this.queue.delete(rightSE);\n    const newEvents = seg.split(pt);\n    newEvents.push(rightSE);\n    if (seg.consumedBy === void 0) this.tree.add(seg);\n    return newEvents;\n  }\n};\n\n// src/operation.ts\nvar Operation = class {\n  type;\n  numMultiPolys;\n  run(type, geom, moreGeoms) {\n    operation.type = type;\n    const multipolys = [new MultiPolyIn(geom, true)];\n    for (let i = 0, iMax = moreGeoms.length; i < iMax; i++) {\n      multipolys.push(new MultiPolyIn(moreGeoms[i], false));\n    }\n    operation.numMultiPolys = multipolys.length;\n    if (operation.type === \"difference\") {\n      const subject = multipolys[0];\n      let i = 1;\n      while (i < multipolys.length) {\n        if (getBboxOverlap(multipolys[i].bbox, subject.bbox) !== null) i++;\n        else multipolys.splice(i, 1);\n      }\n    }\n    if (operation.type === \"intersection\") {\n      for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n        const mpA = multipolys[i];\n        for (let j = i + 1, jMax = multipolys.length; j < jMax; j++) {\n          if (getBboxOverlap(mpA.bbox, multipolys[j].bbox) === null) return [];\n        }\n      }\n    }\n    const queue = new SplayTreeSet3(SweepEvent.compare);\n    for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n      const sweepEvents = multipolys[i].getSweepEvents();\n      for (let j = 0, jMax = sweepEvents.length; j < jMax; j++) {\n        queue.add(sweepEvents[j]);\n      }\n    }\n    const sweepLine = new SweepLine(queue);\n    let evt = null;\n    if (queue.size != 0) {\n      evt = queue.first();\n      queue.delete(evt);\n    }\n    while (evt) {\n      const newEvents = sweepLine.process(evt);\n      for (let i = 0, iMax = newEvents.length; i < iMax; i++) {\n        const evt2 = newEvents[i];\n        if (evt2.consumedBy === void 0) queue.add(evt2);\n      }\n      if (queue.size != 0) {\n        evt = queue.first();\n        queue.delete(evt);\n      } else {\n        evt = null;\n      }\n    }\n    precision.reset();\n    const ringsOut = RingOut.factory(sweepLine.segments);\n    const result = new MultiPolyOut(ringsOut);\n    return result.getGeom();\n  }\n};\nvar operation = new Operation();\nvar operation_default = operation;\n\n// src/segment.ts\nvar segmentId = 0;\nvar Segment = class _Segment {\n  id;\n  leftSE;\n  rightSE;\n  rings;\n  windings;\n  ringOut;\n  consumedBy;\n  prev;\n  _prevInResult;\n  _beforeState;\n  _afterState;\n  _isInResult;\n  /* This compare() function is for ordering segments in the sweep\n   * line tree, and does so according to the following criteria:\n   *\n   * Consider the vertical line that lies an infinestimal step to the\n   * right of the right-more of the two left endpoints of the input\n   * segments. Imagine slowly moving a point up from negative infinity\n   * in the increasing y direction. Which of the two segments will that\n   * point intersect first? That segment comes 'before' the other one.\n   *\n   * If neither segment would be intersected by such a line, (if one\n   * or more of the segments are vertical) then the line to be considered\n   * is directly on the right-more of the two left inputs.\n   */\n  static compare(a, b) {\n    const alx = a.leftSE.point.x;\n    const blx = b.leftSE.point.x;\n    const arx = a.rightSE.point.x;\n    const brx = b.rightSE.point.x;\n    if (brx.isLessThan(alx)) return 1;\n    if (arx.isLessThan(blx)) return -1;\n    const aly = a.leftSE.point.y;\n    const bly = b.leftSE.point.y;\n    const ary = a.rightSE.point.y;\n    const bry = b.rightSE.point.y;\n    if (alx.isLessThan(blx)) {\n      if (bly.isLessThan(aly) && bly.isLessThan(ary)) return 1;\n      if (bly.isGreaterThan(aly) && bly.isGreaterThan(ary)) return -1;\n      const aCmpBLeft = a.comparePoint(b.leftSE.point);\n      if (aCmpBLeft < 0) return 1;\n      if (aCmpBLeft > 0) return -1;\n      const bCmpARight = b.comparePoint(a.rightSE.point);\n      if (bCmpARight !== 0) return bCmpARight;\n      return -1;\n    }\n    if (alx.isGreaterThan(blx)) {\n      if (aly.isLessThan(bly) && aly.isLessThan(bry)) return -1;\n      if (aly.isGreaterThan(bly) && aly.isGreaterThan(bry)) return 1;\n      const bCmpALeft = b.comparePoint(a.leftSE.point);\n      if (bCmpALeft !== 0) return bCmpALeft;\n      const aCmpBRight = a.comparePoint(b.rightSE.point);\n      if (aCmpBRight < 0) return 1;\n      if (aCmpBRight > 0) return -1;\n      return 1;\n    }\n    if (aly.isLessThan(bly)) return -1;\n    if (aly.isGreaterThan(bly)) return 1;\n    if (arx.isLessThan(brx)) {\n      const bCmpARight = b.comparePoint(a.rightSE.point);\n      if (bCmpARight !== 0) return bCmpARight;\n    }\n    if (arx.isGreaterThan(brx)) {\n      const aCmpBRight = a.comparePoint(b.rightSE.point);\n      if (aCmpBRight < 0) return 1;\n      if (aCmpBRight > 0) return -1;\n    }\n    if (!arx.eq(brx)) {\n      const ay = ary.minus(aly);\n      const ax = arx.minus(alx);\n      const by = bry.minus(bly);\n      const bx = brx.minus(blx);\n      if (ay.isGreaterThan(ax) && by.isLessThan(bx)) return 1;\n      if (ay.isLessThan(ax) && by.isGreaterThan(bx)) return -1;\n    }\n    if (arx.isGreaterThan(brx)) return 1;\n    if (arx.isLessThan(brx)) return -1;\n    if (ary.isLessThan(bry)) return -1;\n    if (ary.isGreaterThan(bry)) return 1;\n    if (a.id < b.id) return -1;\n    if (a.id > b.id) return 1;\n    return 0;\n  }\n  /* Warning: a reference to ringWindings input will be stored,\n   *  and possibly will be later modified */\n  constructor(leftSE, rightSE, rings, windings) {\n    this.id = ++segmentId;\n    this.leftSE = leftSE;\n    leftSE.segment = this;\n    leftSE.otherSE = rightSE;\n    this.rightSE = rightSE;\n    rightSE.segment = this;\n    rightSE.otherSE = leftSE;\n    this.rings = rings;\n    this.windings = windings;\n  }\n  static fromRing(pt1, pt2, ring) {\n    let leftPt, rightPt, winding;\n    const cmpPts = SweepEvent.comparePoints(pt1, pt2);\n    if (cmpPts < 0) {\n      leftPt = pt1;\n      rightPt = pt2;\n      winding = 1;\n    } else if (cmpPts > 0) {\n      leftPt = pt2;\n      rightPt = pt1;\n      winding = -1;\n    } else\n      throw new Error(\n        `Tried to create degenerate segment at [${pt1.x}, ${pt1.y}]`\n      );\n    const leftSE = new SweepEvent(leftPt, true);\n    const rightSE = new SweepEvent(rightPt, false);\n    return new _Segment(leftSE, rightSE, [ring], [winding]);\n  }\n  /* When a segment is split, the rightSE is replaced with a new sweep event */\n  replaceRightSE(newRightSE) {\n    this.rightSE = newRightSE;\n    this.rightSE.segment = this;\n    this.rightSE.otherSE = this.leftSE;\n    this.leftSE.otherSE = this.rightSE;\n  }\n  bbox() {\n    const y1 = this.leftSE.point.y;\n    const y2 = this.rightSE.point.y;\n    return {\n      ll: { x: this.leftSE.point.x, y: y1.isLessThan(y2) ? y1 : y2 },\n      ur: { x: this.rightSE.point.x, y: y1.isGreaterThan(y2) ? y1 : y2 }\n    };\n  }\n  /* A vector from the left point to the right */\n  vector() {\n    return {\n      x: this.rightSE.point.x.minus(this.leftSE.point.x),\n      y: this.rightSE.point.y.minus(this.leftSE.point.y)\n    };\n  }\n  isAnEndpoint(pt) {\n    return pt.x.eq(this.leftSE.point.x) && pt.y.eq(this.leftSE.point.y) || pt.x.eq(this.rightSE.point.x) && pt.y.eq(this.rightSE.point.y);\n  }\n  /* Compare this segment with a point.\n   *\n   * A point P is considered to be colinear to a segment if there\n   * exists a distance D such that if we travel along the segment\n   * from one * endpoint towards the other a distance D, we find\n   * ourselves at point P.\n   *\n   * Return value indicates:\n   *\n   *   1: point lies above the segment (to the left of vertical)\n   *   0: point is colinear to segment\n   *  -1: point lies below the segment (to the right of vertical)\n   */\n  comparePoint(point) {\n    return precision.orient(this.leftSE.point, point, this.rightSE.point);\n  }\n  /**\n   * Given another segment, returns the first non-trivial intersection\n   * between the two segments (in terms of sweep line ordering), if it exists.\n   *\n   * A 'non-trivial' intersection is one that will cause one or both of the\n   * segments to be split(). As such, 'trivial' vs. 'non-trivial' intersection:\n   *\n   *   * endpoint of segA with endpoint of segB --> trivial\n   *   * endpoint of segA with point along segB --> non-trivial\n   *   * endpoint of segB with point along segA --> non-trivial\n   *   * point along segA with point along segB --> non-trivial\n   *\n   * If no non-trivial intersection exists, return null\n   * Else, return null.\n   */\n  getIntersection(other) {\n    const tBbox = this.bbox();\n    const oBbox = other.bbox();\n    const bboxOverlap = getBboxOverlap(tBbox, oBbox);\n    if (bboxOverlap === null) return null;\n    const tlp = this.leftSE.point;\n    const trp = this.rightSE.point;\n    const olp = other.leftSE.point;\n    const orp = other.rightSE.point;\n    const touchesOtherLSE = isInBbox(tBbox, olp) && this.comparePoint(olp) === 0;\n    const touchesThisLSE = isInBbox(oBbox, tlp) && other.comparePoint(tlp) === 0;\n    const touchesOtherRSE = isInBbox(tBbox, orp) && this.comparePoint(orp) === 0;\n    const touchesThisRSE = isInBbox(oBbox, trp) && other.comparePoint(trp) === 0;\n    if (touchesThisLSE && touchesOtherLSE) {\n      if (touchesThisRSE && !touchesOtherRSE) return trp;\n      if (!touchesThisRSE && touchesOtherRSE) return orp;\n      return null;\n    }\n    if (touchesThisLSE) {\n      if (touchesOtherRSE) {\n        if (tlp.x.eq(orp.x) && tlp.y.eq(orp.y)) return null;\n      }\n      return tlp;\n    }\n    if (touchesOtherLSE) {\n      if (touchesThisRSE) {\n        if (trp.x.eq(olp.x) && trp.y.eq(olp.y)) return null;\n      }\n      return olp;\n    }\n    if (touchesThisRSE && touchesOtherRSE) return null;\n    if (touchesThisRSE) return trp;\n    if (touchesOtherRSE) return orp;\n    const pt = intersection(tlp, this.vector(), olp, other.vector());\n    if (pt === null) return null;\n    if (!isInBbox(bboxOverlap, pt)) return null;\n    return precision.snap(pt);\n  }\n  /**\n   * Split the given segment into multiple segments on the given points.\n   *  * Each existing segment will retain its leftSE and a new rightSE will be\n   *    generated for it.\n   *  * A new segment will be generated which will adopt the original segment's\n   *    rightSE, and a new leftSE will be generated for it.\n   *  * If there are more than two points given to split on, new segments\n   *    in the middle will be generated with new leftSE and rightSE's.\n   *  * An array of the newly generated SweepEvents will be returned.\n   *\n   * Warning: input array of points is modified\n   */\n  split(point) {\n    const newEvents = [];\n    const alreadyLinked = point.events !== void 0;\n    const newLeftSE = new SweepEvent(point, true);\n    const newRightSE = new SweepEvent(point, false);\n    const oldRightSE = this.rightSE;\n    this.replaceRightSE(newRightSE);\n    newEvents.push(newRightSE);\n    newEvents.push(newLeftSE);\n    const newSeg = new _Segment(\n      newLeftSE,\n      oldRightSE,\n      this.rings.slice(),\n      this.windings.slice()\n    );\n    if (SweepEvent.comparePoints(newSeg.leftSE.point, newSeg.rightSE.point) > 0) {\n      newSeg.swapEvents();\n    }\n    if (SweepEvent.comparePoints(this.leftSE.point, this.rightSE.point) > 0) {\n      this.swapEvents();\n    }\n    if (alreadyLinked) {\n      newLeftSE.checkForConsuming();\n      newRightSE.checkForConsuming();\n    }\n    return newEvents;\n  }\n  /* Swap which event is left and right */\n  swapEvents() {\n    const tmpEvt = this.rightSE;\n    this.rightSE = this.leftSE;\n    this.leftSE = tmpEvt;\n    this.leftSE.isLeft = true;\n    this.rightSE.isLeft = false;\n    for (let i = 0, iMax = this.windings.length; i < iMax; i++) {\n      this.windings[i] *= -1;\n    }\n  }\n  /* Consume another segment. We take their rings under our wing\n   * and mark them as consumed. Use for perfectly overlapping segments */\n  consume(other) {\n    let consumer = this;\n    let consumee = other;\n    while (consumer.consumedBy) consumer = consumer.consumedBy;\n    while (consumee.consumedBy) consumee = consumee.consumedBy;\n    const cmp = _Segment.compare(consumer, consumee);\n    if (cmp === 0) return;\n    if (cmp > 0) {\n      const tmp = consumer;\n      consumer = consumee;\n      consumee = tmp;\n    }\n    if (consumer.prev === consumee) {\n      const tmp = consumer;\n      consumer = consumee;\n      consumee = tmp;\n    }\n    for (let i = 0, iMax = consumee.rings.length; i < iMax; i++) {\n      const ring = consumee.rings[i];\n      const winding = consumee.windings[i];\n      const index = consumer.rings.indexOf(ring);\n      if (index === -1) {\n        consumer.rings.push(ring);\n        consumer.windings.push(winding);\n      } else consumer.windings[index] += winding;\n    }\n    consumee.rings = null;\n    consumee.windings = null;\n    consumee.consumedBy = consumer;\n    consumee.leftSE.consumedBy = consumer.leftSE;\n    consumee.rightSE.consumedBy = consumer.rightSE;\n  }\n  /* The first segment previous segment chain that is in the result */\n  prevInResult() {\n    if (this._prevInResult !== void 0) return this._prevInResult;\n    if (!this.prev) this._prevInResult = null;\n    else if (this.prev.isInResult()) this._prevInResult = this.prev;\n    else this._prevInResult = this.prev.prevInResult();\n    return this._prevInResult;\n  }\n  beforeState() {\n    if (this._beforeState !== void 0) return this._beforeState;\n    if (!this.prev)\n      this._beforeState = {\n        rings: [],\n        windings: [],\n        multiPolys: []\n      };\n    else {\n      const seg = this.prev.consumedBy || this.prev;\n      this._beforeState = seg.afterState();\n    }\n    return this._beforeState;\n  }\n  afterState() {\n    if (this._afterState !== void 0) return this._afterState;\n    const beforeState = this.beforeState();\n    this._afterState = {\n      rings: beforeState.rings.slice(0),\n      windings: beforeState.windings.slice(0),\n      multiPolys: []\n    };\n    const ringsAfter = this._afterState.rings;\n    const windingsAfter = this._afterState.windings;\n    const mpsAfter = this._afterState.multiPolys;\n    for (let i = 0, iMax = this.rings.length; i < iMax; i++) {\n      const ring = this.rings[i];\n      const winding = this.windings[i];\n      const index = ringsAfter.indexOf(ring);\n      if (index === -1) {\n        ringsAfter.push(ring);\n        windingsAfter.push(winding);\n      } else windingsAfter[index] += winding;\n    }\n    const polysAfter = [];\n    const polysExclude = [];\n    for (let i = 0, iMax = ringsAfter.length; i < iMax; i++) {\n      if (windingsAfter[i] === 0) continue;\n      const ring = ringsAfter[i];\n      const poly = ring.poly;\n      if (polysExclude.indexOf(poly) !== -1) continue;\n      if (ring.isExterior) polysAfter.push(poly);\n      else {\n        if (polysExclude.indexOf(poly) === -1) polysExclude.push(poly);\n        const index = polysAfter.indexOf(ring.poly);\n        if (index !== -1) polysAfter.splice(index, 1);\n      }\n    }\n    for (let i = 0, iMax = polysAfter.length; i < iMax; i++) {\n      const mp = polysAfter[i].multiPoly;\n      if (mpsAfter.indexOf(mp) === -1) mpsAfter.push(mp);\n    }\n    return this._afterState;\n  }\n  /* Is this segment part of the final result? */\n  isInResult() {\n    if (this.consumedBy) return false;\n    if (this._isInResult !== void 0) return this._isInResult;\n    const mpsBefore = this.beforeState().multiPolys;\n    const mpsAfter = this.afterState().multiPolys;\n    switch (operation_default.type) {\n      case \"union\": {\n        const noBefores = mpsBefore.length === 0;\n        const noAfters = mpsAfter.length === 0;\n        this._isInResult = noBefores !== noAfters;\n        break;\n      }\n      case \"intersection\": {\n        let least;\n        let most;\n        if (mpsBefore.length < mpsAfter.length) {\n          least = mpsBefore.length;\n          most = mpsAfter.length;\n        } else {\n          least = mpsAfter.length;\n          most = mpsBefore.length;\n        }\n        this._isInResult = most === operation_default.numMultiPolys && least < most;\n        break;\n      }\n      case \"xor\": {\n        const diff = Math.abs(mpsBefore.length - mpsAfter.length);\n        this._isInResult = diff % 2 === 1;\n        break;\n      }\n      case \"difference\": {\n        const isJustSubject = (mps) => mps.length === 1 && mps[0].isSubject;\n        this._isInResult = isJustSubject(mpsBefore) !== isJustSubject(mpsAfter);\n        break;\n      }\n    }\n    return this._isInResult;\n  }\n};\n\n// src/geom-in.ts\nvar RingIn = class {\n  poly;\n  isExterior;\n  segments;\n  bbox;\n  constructor(geomRing, poly, isExterior) {\n    if (!Array.isArray(geomRing) || geomRing.length === 0) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    this.poly = poly;\n    this.isExterior = isExterior;\n    this.segments = [];\n    if (typeof geomRing[0][0] !== \"number\" || typeof geomRing[0][1] !== \"number\") {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    const firstPoint = precision.snap({ x: new BigNumber2(geomRing[0][0]), y: new BigNumber2(geomRing[0][1]) });\n    this.bbox = {\n      ll: { x: firstPoint.x, y: firstPoint.y },\n      ur: { x: firstPoint.x, y: firstPoint.y }\n    };\n    let prevPoint = firstPoint;\n    for (let i = 1, iMax = geomRing.length; i < iMax; i++) {\n      if (typeof geomRing[i][0] !== \"number\" || typeof geomRing[i][1] !== \"number\") {\n        throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n      }\n      const point = precision.snap({ x: new BigNumber2(geomRing[i][0]), y: new BigNumber2(geomRing[i][1]) });\n      if (point.x.eq(prevPoint.x) && point.y.eq(prevPoint.y)) continue;\n      this.segments.push(Segment.fromRing(prevPoint, point, this));\n      if (point.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = point.x;\n      if (point.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = point.y;\n      if (point.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = point.x;\n      if (point.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = point.y;\n      prevPoint = point;\n    }\n    if (!firstPoint.x.eq(prevPoint.x) || !firstPoint.y.eq(prevPoint.y)) {\n      this.segments.push(Segment.fromRing(prevPoint, firstPoint, this));\n    }\n  }\n  getSweepEvents() {\n    const sweepEvents = [];\n    for (let i = 0, iMax = this.segments.length; i < iMax; i++) {\n      const segment = this.segments[i];\n      sweepEvents.push(segment.leftSE);\n      sweepEvents.push(segment.rightSE);\n    }\n    return sweepEvents;\n  }\n};\nvar PolyIn = class {\n  multiPoly;\n  exteriorRing;\n  interiorRings;\n  bbox;\n  constructor(geomPoly, multiPoly) {\n    if (!Array.isArray(geomPoly)) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    this.exteriorRing = new RingIn(geomPoly[0], this, true);\n    this.bbox = {\n      ll: { x: this.exteriorRing.bbox.ll.x, y: this.exteriorRing.bbox.ll.y },\n      ur: { x: this.exteriorRing.bbox.ur.x, y: this.exteriorRing.bbox.ur.y }\n    };\n    this.interiorRings = [];\n    for (let i = 1, iMax = geomPoly.length; i < iMax; i++) {\n      const ring = new RingIn(geomPoly[i], this, false);\n      if (ring.bbox.ll.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = ring.bbox.ll.x;\n      if (ring.bbox.ll.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = ring.bbox.ll.y;\n      if (ring.bbox.ur.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = ring.bbox.ur.x;\n      if (ring.bbox.ur.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = ring.bbox.ur.y;\n      this.interiorRings.push(ring);\n    }\n    this.multiPoly = multiPoly;\n  }\n  getSweepEvents() {\n    const sweepEvents = this.exteriorRing.getSweepEvents();\n    for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n      const ringSweepEvents = this.interiorRings[i].getSweepEvents();\n      for (let j = 0, jMax = ringSweepEvents.length; j < jMax; j++) {\n        sweepEvents.push(ringSweepEvents[j]);\n      }\n    }\n    return sweepEvents;\n  }\n};\nvar MultiPolyIn = class {\n  isSubject;\n  polys;\n  bbox;\n  constructor(geom, isSubject) {\n    if (!Array.isArray(geom)) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    try {\n      if (typeof geom[0][0][0] === \"number\") geom = [geom];\n    } catch (ex) {\n    }\n    this.polys = [];\n    this.bbox = {\n      ll: { x: new BigNumber2(Number.POSITIVE_INFINITY), y: new BigNumber2(Number.POSITIVE_INFINITY) },\n      ur: { x: new BigNumber2(Number.NEGATIVE_INFINITY), y: new BigNumber2(Number.NEGATIVE_INFINITY) }\n    };\n    for (let i = 0, iMax = geom.length; i < iMax; i++) {\n      const poly = new PolyIn(geom[i], this);\n      if (poly.bbox.ll.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = poly.bbox.ll.x;\n      if (poly.bbox.ll.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = poly.bbox.ll.y;\n      if (poly.bbox.ur.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = poly.bbox.ur.x;\n      if (poly.bbox.ur.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = poly.bbox.ur.y;\n      this.polys.push(poly);\n    }\n    this.isSubject = isSubject;\n  }\n  getSweepEvents() {\n    const sweepEvents = [];\n    for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n      const polySweepEvents = this.polys[i].getSweepEvents();\n      for (let j = 0, jMax = polySweepEvents.length; j < jMax; j++) {\n        sweepEvents.push(polySweepEvents[j]);\n      }\n    }\n    return sweepEvents;\n  }\n};\n\n// src/index.ts\nvar union = (geom, ...moreGeoms) => operation_default.run(\"union\", geom, moreGeoms);\nvar intersection2 = (geom, ...moreGeoms) => operation_default.run(\"intersection\", geom, moreGeoms);\nvar xor = (geom, ...moreGeoms) => operation_default.run(\"xor\", geom, moreGeoms);\nvar difference = (geom, ...moreGeoms) => operation_default.run(\"difference\", geom, moreGeoms);\nvar setPrecision = precision.set;\nexport {\n  difference,\n  intersection2 as intersection,\n  setPrecision,\n  union,\n  xor\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport * as polyclip from \"polyclip-ts\";\nimport { polygon, multiPolygon } from \"@turf/helpers\";\nimport { geomEach } from \"@turf/meta\";\nfunction difference2(features) {\n  const geoms = [];\n  geomEach(features, (geom) => {\n    geoms.push(geom.coordinates);\n  });\n  if (geoms.length < 2) {\n    throw new Error(\"Must have at least two features\");\n  }\n  const properties = features.features[0].properties || {};\n  const differenced = polyclip.difference(geoms[0], ...geoms.slice(1));\n  if (differenced.length === 0) return null;\n  if (differenced.length === 1) return polygon(differenced[0], properties);\n  return multiPolygon(differenced, properties);\n}\nvar turf_difference_default = difference2;\nexport {\n  turf_difference_default as default,\n  difference2 as difference\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { flattenEach } from \"@turf/meta\";\nimport { featureCollection } from \"@turf/helpers\";\nfunction flatten(geojson) {\n  if (!geojson) throw new Error(\"geojson is required\");\n  var results = [];\n  flattenEach(geojson, function(feature) {\n    results.push(feature);\n  });\n  return featureCollection(results);\n}\nvar turf_flatten_default = flatten;\nexport {\n  turf_flatten_default as default,\n  flatten\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport * as polyclip from \"polyclip-ts\";\nimport { multiPolygon, polygon } from \"@turf/helpers\";\nimport { geomEach } from \"@turf/meta\";\nfunction union2(features, options = {}) {\n  const geoms = [];\n  geomEach(features, (geom) => {\n    geoms.push(geom.coordinates);\n  });\n  if (geoms.length < 2) {\n    throw new Error(\"Must have at least 2 geometries\");\n  }\n  const unioned = polyclip.union(geoms[0], ...geoms.slice(1));\n  if (unioned.length === 0) return null;\n  if (unioned.length === 1) return polygon(unioned[0], options.properties);\n  else return multiPolygon(unioned, options.properties);\n}\nvar turf_union_default = union2;\nexport {\n  turf_union_default as default,\n  union2 as union\n};\n//# sourceMappingURL=index.js.map","import bbox from \"@turf/bbox\";\nimport difference from \"@turf/difference\";\nimport flatten from \"@turf/flatten\";\nimport { featureCollection, polygon } from \"@turf/helpers\";\nimport union from \"@turf/union\";\nimport type {\n  Feature,\n  FeatureCollection,\n  MultiPolygon,\n  Polygon,\n} from \"geojson\";\nimport { unwrapBbox } from \"./geoUtils\";\nimport type { BBox } from \"./types\";\n\nexport function setMask(\n  picked: Feature<Polygon | MultiPolygon>,\n  setData: (data?: FeatureCollection<Polygon | MultiPolygon>) => void,\n): void {\n  const diff = difference(\n    featureCollection([\n      polygon([\n        [\n          [180, 90],\n          [-180, 90],\n          [-180, -90],\n          [180, -90],\n          [180, 90],\n        ],\n      ]),\n      picked,\n    ]),\n  );\n\n  if (!diff) {\n    return;\n  }\n\n  diff.properties = { isMask: true };\n\n  const bb = unwrapBbox(bbox(picked) as BBox);\n\n  // bigger features (continents, oceans) have bigger tolerance\n  // because of the used source data simplification\n  const tolerance = (bb[2] - bb[0]) / 360 / 1_000;\n\n  const leaksLeft = bb[0] < -180;\n  const leaksRight = bb[2] > 180;\n\n  const flattened = flatten(picked);\n\n  if (flattened.features.length > 1 && (leaksLeft || leaksRight)) {\n    for (const poly of flattened.features) {\n      const bb = unwrapBbox(bbox(poly) as BBox);\n\n      if (leaksRight && bb[0] < -180 + tolerance) {\n        for (const ring of poly.geometry.coordinates) {\n          for (const position of ring) {\n            position[0] += 360 - tolerance;\n          }\n        }\n      }\n\n      if (leaksLeft && bb[2] > 180 - tolerance) {\n        for (const ring of poly.geometry.coordinates) {\n          for (const position of ring) {\n            position[0] -= 360 - tolerance;\n          }\n        }\n      }\n    }\n  }\n\n  setData(\n    featureCollection([\n      flattened.features.length < 2 ? picked : (union(flattened) ?? picked),\n      diff,\n    ]),\n  );\n}\n","import type { FeatureCollection, MultiPolygon, Polygon } from \"geojson\";\nimport { Feature as OlFeature, type MapBrowserEvent } from \"ol\";\nimport type { FeatureLike } from \"ol/Feature\";\nimport type Map from \"ol/Map\";\nimport type { AnimationOptions, FitOptions } from \"ol/View\";\nimport {\n  GeometryCollection as OlGeometryCollection,\n  LineString as OlLineString,\n  MultiLineString as OlMultiLineString,\n  MultiPolygon as OlMultiPolygon,\n  Point as OlPoint,\n  Polygon as OlPolygon,\n  type Geometry as OlGeometry,\n} from \"ol/geom\";\nimport VectorLayer from \"ol/layer/Vector\";\nimport {\n  fromLonLat,\n  getUserProjection,\n  toLonLat,\n  transformExtent,\n} from \"ol/proj\";\nimport VectorSource from \"ol/source/Vector\";\nimport Fill from \"ol/style/Fill\";\nimport Icon from \"ol/style/Icon\";\nimport Stroke from \"ol/style/Stroke\";\nimport Style, { type StyleLike } from \"ol/style/Style\";\nimport Text from \"ol/style/Text\";\nimport type { FlatStyleLike } from \"ol/style/flat\";\nimport { setMask } from \"./mask\";\nimport type {\n  BBox,\n  Feature as FeatureType,\n  MapController,\n  MapEvent,\n  Position,\n} from \"./types\";\n\nconst EPSG_4326 = \"EPSG:4326\";\n\nfunction defaultStyle(feature: FeatureLike) {\n  const properties = feature.getProperties();\n\n  const { isMask } = properties;\n\n  const type = feature.getGeometry()?.getType();\n\n  const weight = isMask\n    ? 0\n    : type === \"LineString\" || type === \"MultiLineString\"\n      ? 3\n      : 2;\n\n  return new Style({\n    stroke: isMask\n      ? undefined\n      : new Stroke({\n          color: \"#3170fe\",\n          lineDash: [weight, weight],\n          width: weight,\n          lineCap: \"butt\",\n        }),\n    fill: isMask\n      ? new Fill({\n          color: \"#00000020\",\n        })\n      : undefined,\n    image: new Icon({\n      src: `/icons/marker_${\n        properties.isReverse\n          ? \"reverse\"\n          : properties.isSelected\n            ? \"selected\"\n            : \"unselected\"\n      }.svg`,\n      anchor: [0.5, 1],\n    }),\n    zIndex: properties.isSelected ? 2 : properties.isReverse ? 0 : 1,\n    text:\n      properties.isSelected && properties.tooltip\n        ? new Text({\n            backgroundFill: new Fill({ color: \"white\" }),\n            text: properties.tooltip,\n            offsetY: -40,\n            backgroundStroke: new Stroke({\n              color: \"white\",\n              lineJoin: \"round\",\n              width: 3,\n            }),\n            padding: [2, 0, 0, 2],\n          })\n        : undefined,\n  });\n}\n\nexport function createOpenLayersMapController(\n  map: Map,\n  flyToOptions: AnimationOptions = {},\n  flyToBounds: FitOptions = {},\n  fullGeometryStyle: StyleLike | FlatStyleLike = defaultStyle,\n) {\n  let prevSelected = -1;\n\n  let prevHovered: string | undefined;\n\n  let eventHandler: ((e: MapEvent) => void) | undefined;\n\n  let reverseMarker: OlFeature | undefined;\n\n  let indicatingReverse = false;\n\n  const vectorLayer = new VectorLayer({\n    updateWhileAnimating: true,\n  });\n\n  map.addLayer(vectorLayer);\n\n  const source = new VectorSource({});\n\n  vectorLayer.setSource(source);\n\n  vectorLayer.setStyle(fullGeometryStyle);\n\n  map.on(\"click\", (e) => {\n    map.forEachFeatureAtPixel(e.pixel, (feature) => {\n      const id = feature.getId() as string;\n\n      if (!id) {\n        return;\n      }\n\n      e.stopPropagation();\n\n      eventHandler?.({ type: \"markerClick\", id });\n\n      return feature;\n    });\n  });\n\n  map.on(\"pointermove\", (e) => {\n    const featureId = map.forEachFeatureAtPixel(e.pixel, (feature) => {\n      return feature.getId() as string | undefined;\n    });\n\n    if (prevHovered === featureId) {\n      return;\n    }\n\n    if (prevHovered) {\n      eventHandler?.({\n        type: \"markerMouseLeave\",\n        id: prevHovered,\n      });\n    }\n\n    if (featureId) {\n      eventHandler?.({\n        type: \"markerMouseEnter\",\n        id: featureId,\n      });\n    }\n\n    map.getTargetElement().style.cursor = featureId\n      ? \"pointer\"\n      : indicatingReverse\n        ? \"crosshair\"\n        : \"\";\n\n    prevHovered = featureId;\n  });\n\n  function getProjection() {\n    return getUserProjection() ?? map.getView().getProjection();\n  }\n\n  function fromWgs84(geometry: OlGeometry) {\n    return geometry.transform(EPSG_4326, getProjection());\n  }\n\n  const handleMapClick = (e: MapBrowserEvent<PointerEvent>) => {\n    eventHandler?.({\n      type: \"mapClick\",\n      coordinates: toLonLat(e.coordinate, getProjection()) as [number, number],\n    });\n  };\n\n  return {\n    setEventHandler(handler: undefined | ((e: MapEvent) => void)): void {\n      if (handler) {\n        eventHandler = handler;\n        map.on(\"click\", handleMapClick);\n      } else {\n        eventHandler = undefined;\n        map.un(\"click\", handleMapClick);\n      }\n    },\n\n    flyTo(center: Position, zoom: number) {\n      map.getView().animate({\n        center: fromLonLat(center, getProjection()),\n        ...(zoom ? { zoom } : {}),\n        duration: 2000,\n        ...flyToOptions,\n      });\n    },\n\n    fitBounds(bbox: BBox, padding: number, maxZoom: number): void {\n      map.getView().fit(transformExtent(bbox, EPSG_4326, getProjection()), {\n        padding: [padding, padding, padding, padding],\n        ...(maxZoom ? { maxZoom } : {}),\n        duration: 2000,\n        ...flyToBounds,\n      });\n    },\n\n    indicateReverse(reverse: boolean): void {\n      indicatingReverse = reverse;\n\n      map.getTargetElement().style.cursor = reverse ? \"crosshair\" : \"\";\n    },\n\n    setReverseMarker(coordinates?: Position) {\n      if (reverseMarker) {\n        if (!coordinates) {\n          source.removeFeature(reverseMarker);\n\n          reverseMarker.dispose();\n\n          reverseMarker = undefined;\n        } else {\n          (reverseMarker.getGeometry() as OlPoint).setCoordinates(\n            fromLonLat(coordinates, getProjection()),\n          );\n        }\n      } else if (coordinates) {\n        reverseMarker = new OlFeature(\n          new OlPoint(fromLonLat(coordinates, getProjection())),\n        );\n\n        reverseMarker.setProperties({ isReverse: true });\n\n        source.addFeature(reverseMarker);\n      }\n    },\n\n    setFeatures(\n      markedFeatures: FeatureType[] | undefined,\n      picked: FeatureType | undefined,\n      showPolygonMarker: boolean,\n    ): void {\n      function setData(data?: FeatureCollection<Polygon | MultiPolygon>) {\n        if (!data) {\n          return;\n        }\n\n        for (const f of data.features) {\n          const geom =\n            f.geometry.type === \"Polygon\"\n              ? new OlPolygon(f.geometry.coordinates)\n              : f.geometry.type === \"MultiPolygon\"\n                ? new OlMultiPolygon(f.geometry.coordinates)\n                : null;\n\n          if (!geom) {\n            continue;\n          }\n\n          source.addFeature(\n            new OlFeature({\n              isMask: !!f.properties?.isMask,\n              geometry: fromWgs84(geom),\n            }),\n          );\n        }\n      }\n\n      source.clear();\n\n      if (reverseMarker) {\n        source.addFeature(reverseMarker);\n      }\n\n      block: if (picked) {\n        let handled = false;\n\n        if (picked.geometry.type === \"GeometryCollection\") {\n          const geoms = picked.geometry.geometries\n            .map((geometry) =>\n              geometry.type === \"Polygon\"\n                ? new OlPolygon(geometry.coordinates)\n                : geometry.type === \"MultiPolygon\"\n                  ? new OlMultiPolygon(geometry.coordinates)\n                  : null,\n            )\n            .filter(<T>(a: T | null): a is T => !!a);\n\n          if (geoms.length > 0) {\n            source.addFeature(\n              new OlFeature(fromWgs84(new OlGeometryCollection(geoms))),\n            );\n\n            handled = true;\n          } else {\n            for (const geometry of picked.geometry.geometries) {\n              if (geometry.type === \"LineString\") {\n                source.addFeature(\n                  new OlFeature(\n                    fromWgs84(new OlLineString(geometry.coordinates)),\n                  ),\n                );\n\n                handled = true;\n              } else if (geometry.type === \"MultiLineString\") {\n                source.addFeature(\n                  new OlFeature(\n                    fromWgs84(new OlMultiLineString(geometry.coordinates)),\n                  ),\n                );\n              }\n\n              handled = true;\n            }\n          }\n        }\n\n        if (handled) {\n          // nothing\n        } else if (picked.geometry.type === \"Polygon\") {\n          setMask(picked as FeatureType<Polygon>, setData);\n        } else if (picked.geometry.type === \"MultiPolygon\") {\n          setMask(picked as FeatureType<MultiPolygon>, setData);\n        } else if (picked.geometry.type === \"LineString\") {\n          source.addFeature(\n            new OlFeature(\n              fromWgs84(new OlLineString(picked.geometry.coordinates)),\n            ),\n          );\n\n          break block; // no pin for (multi)linestrings\n        } else if (picked.geometry.type === \"MultiLineString\") {\n          source.addFeature(\n            new OlFeature(\n              fromWgs84(new OlMultiLineString(picked.geometry.coordinates)),\n            ),\n          );\n\n          break block; // no pin for (multi)linestrings\n        }\n\n        if (!showPolygonMarker && !picked.geometry.type.endsWith(\"Point\")) {\n          break block;\n        }\n\n        source.addFeature(new OlFeature(fromWgs84(new OlPoint(picked.center))));\n      }\n\n      for (const feature of markedFeatures ?? []) {\n        if (feature === picked) {\n          continue;\n        }\n\n        const marker = new OlFeature(\n          new OlPoint(fromLonLat(feature.center, getProjection())),\n        );\n\n        marker.setId(feature.id);\n\n        marker.setProperties({\n          fuzzy: !!feature.matching_text,\n          tooltip:\n            feature.place_type[0] === \"reverse\"\n              ? feature.place_name\n              : feature.place_name.replace(/,.*/, \"\"),\n        });\n\n        source.addFeature(marker);\n      }\n    },\n\n    setSelectedMarker(index: number): void {\n      const features = source.getFeatures();\n\n      const offset = features[0]?.getProperties().isReverse ? 1 : 0;\n\n      if (prevSelected > -1) {\n        features[prevSelected + offset]?.setProperties({\n          isSelected: false,\n        });\n      }\n\n      if (index > -1) {\n        features[index + offset]?.setProperties({\n          isSelected: true,\n        });\n      }\n\n      prevSelected = index;\n    },\n\n    getCenterAndZoom() {\n      const view = map.getView();\n\n      const center = view.getCenter();\n\n      const zoom = view.getZoom();\n\n      if (!center || zoom === undefined) {\n        return undefined;\n      }\n\n      return [zoom, ...(toLonLat(center, getProjection()) as Position)];\n    },\n  } satisfies MapController;\n}\n","import type { Map } from \"ol\";\nimport type { ObjectEvent } from \"ol/Object\";\nimport type { CombinedOnSignature, EventTypes } from \"ol/Observable\";\nimport type { AnimationOptions, FitOptions } from \"ol/View\";\nimport { Control } from \"ol/control\";\nimport type { Options } from \"ol/control/Control\";\nimport type { EventsKey } from \"ol/events\";\nimport BaseEvent from \"ol/events/Event\";\nimport type { StyleLike } from \"ol/style/Style\";\nimport type { FlatStyleLike } from \"ol/style/flat\";\nimport GeocodingControlComponent from \"./GeocodingControl.svelte\";\nimport { createOpenLayersMapController } from \"./openlayers-controller\";\nimport type { ControlOptions, Feature, FeatureCollection } from \"./types\";\nexport { createOpenLayersMapController } from \"./openlayers-controller\";\n\ntype OpenLayersControlOptions = ControlOptions &\n  Options & {\n    flyTo?: boolean | (AnimationOptions & FitOptions);\n    fullGeometryStyle?: StyleLike | FlatStyleLike;\n  };\n\ntype CustomEventMap = {\n  select: SelectEvent;\n  featureslisted: FeaturesListedEvent;\n  featuresmarked: FeaturesMarkedEvent;\n  optionsvisibilitychange: OptionsVisibilityChangeEvent;\n  pick: PickEvent;\n  querychange: QueryChangeEvent;\n  response: ResponseEvent;\n  reversetoggle: ReverseToggleEvent;\n};\n\ntype CustomObjectOnSignature<ReturnType> = {\n  <K extends keyof CustomEventMap>(\n    type: K,\n    listener: (evt: CustomEventMap[K]) => void,\n  ): ReturnType;\n} & {\n  (type: \"propertychange\", listener: (evt: ObjectEvent) => void): ReturnType;\n} & CombinedOnSignature<\n    EventTypes | \"propertychange\" | keyof CustomEventMap,\n    ReturnType\n  >;\n\nexport class GeocodingControl extends Control {\n  #gc?: GeocodingControlComponent;\n\n  #options: OpenLayersControlOptions;\n\n  declare on: CustomObjectOnSignature<EventsKey>;\n  declare once: CustomObjectOnSignature<EventsKey>;\n  declare un: CustomObjectOnSignature<EventsKey>;\n\n  constructor(options: OpenLayersControlOptions) {\n    const div = document.createElement(\"div\");\n\n    div.className = \"ol-search\";\n\n    super({\n      element: div,\n      target: options.target,\n    });\n\n    const { flyTo, fullGeometryStyle, ...restOptions } = options;\n\n    this.#gc = new GeocodingControlComponent({\n      target: div,\n      props: {\n        flyTo: flyTo === undefined ? true : !!flyTo,\n        ...restOptions,\n      },\n    });\n\n    this.#gc.$on(\"select\", (event) => {\n      this.dispatchEvent(new SelectEvent(event.detail.feature));\n    });\n\n    this.#gc.$on(\"pick\", (event) => {\n      this.dispatchEvent(new PickEvent(event.detail.feature));\n    });\n\n    this.#gc.$on(\"featureslisted\", (event) => {\n      this.dispatchEvent(new FeaturesListedEvent(event.detail.features));\n    });\n\n    this.#gc.$on(\"featuresmarked\", (event) => {\n      this.dispatchEvent(new FeaturesMarkedEvent(event.detail.features));\n    });\n\n    this.#gc.$on(\"response\", (event) => {\n      this.dispatchEvent(\n        new ResponseEvent(event.detail.url, event.detail.featureCollection),\n      );\n    });\n\n    this.#gc.$on(\"optionsvisibilitychange\", (event) => {\n      this.dispatchEvent(\n        new OptionsVisibilityChangeEvent(event.detail.optionsVisible),\n      );\n    });\n\n    this.#gc.$on(\"reversetoggle\", (event) => {\n      this.dispatchEvent(new ReverseToggleEvent(event.detail.reverse));\n    });\n\n    this.#gc.$on(\"querychange\", (event) => {\n      this.dispatchEvent(new QueryChangeEvent(event.detail.query));\n    });\n\n    this.#options = options;\n  }\n\n  setMap(map: Map | null): void {\n    super.setMap(map);\n\n    if (map) {\n      const {\n        // marker,\n        // showResultMarkers,\n        flyTo,\n        fullGeometryStyle,\n      } = this.#options;\n\n      const mapController = createOpenLayersMapController(\n        map,\n        typeof flyTo === \"boolean\" ? undefined : flyTo,\n        typeof flyTo === \"boolean\" ? undefined : flyTo,\n        // marker,\n        // showResultMarkers,\n        fullGeometryStyle,\n      );\n\n      this.#gc?.$set({ mapController });\n    }\n  }\n\n  /**\n   * Update the control options.\n   *\n   * @param options options to update\n   */\n  setOptions(options: OpenLayersControlOptions) {\n    Object.assign(this.#options, options);\n\n    const { flyTo, fullGeometryStyle, ...restOptions } = this.#options;\n\n    this.#gc?.$set({\n      ...restOptions,\n      flyTo: flyTo === undefined ? true : !!flyTo,\n    });\n  }\n\n  /**\n   * Set the content of search input box.\n   *\n   * @param value text to set\n   * @param submit perform the search\n   */\n  setQuery(value: string, submit = true) {\n    this.#gc?.setQuery(value, submit);\n  }\n\n  /**\n   * Clear geocoding search results from the map.\n   */\n  clearMap() {\n    this.#gc?.clearMap();\n  }\n\n  /**\n   * Clear search result list.\n   */\n  clearList() {\n    this.#gc?.clearList();\n  }\n\n  /**\n   * Set reverse geocoding mode.\n   *\n   * @param reverseActive reverse geocoding active\n   */\n  setReverseMode(reverseActive: boolean) {\n    this.#gc?.$set({ reverseActive });\n  }\n\n  /**\n   * Focus the search input box.\n   *\n   * @param options [FocusOptions](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus#options)\n   */\n  focus(options?: FocusOptions) {\n    this.#gc?.focus(options);\n  }\n\n  /**\n   * Blur the search input box.\n   */\n  blur() {\n    this.#gc?.blur();\n  }\n\n  // onRemove() {\n  //   this.#gc?.$destroy();\n  // }\n}\n\nexport class SelectEvent extends BaseEvent {\n  feature: Feature | undefined;\n\n  constructor(feature: Feature | undefined) {\n    super(\"select\");\n\n    this.feature = feature;\n  }\n}\n\nexport class FeaturesListedEvent extends BaseEvent {\n  features: Feature[] | undefined;\n\n  constructor(features: Feature[] | undefined) {\n    super(\"featureslisted\");\n\n    this.features = features;\n  }\n}\n\nexport class FeaturesMarkedEvent extends BaseEvent {\n  features: Feature[] | undefined;\n\n  constructor(features: Feature[] | undefined) {\n    super(\"featuresmarked\");\n\n    this.features = features;\n  }\n}\n\nexport class OptionsVisibilityChangeEvent extends BaseEvent {\n  optionsVisible: boolean;\n\n  constructor(optionsVisible: boolean) {\n    super(\"optionsvisibilitychange\");\n\n    this.optionsVisible = optionsVisible;\n  }\n}\n\nexport class PickEvent extends BaseEvent {\n  feature: Feature | undefined;\n\n  constructor(feature: Feature | undefined) {\n    super(\"pick\");\n\n    this.feature = feature;\n  }\n}\n\nexport class QueryChangeEvent extends BaseEvent {\n  query: string;\n\n  constructor(query: string) {\n    super(\"querychange\");\n\n    this.query = query;\n  }\n}\n\nexport class ResponseEvent extends BaseEvent {\n  url: string;\n\n  featureCollection: FeatureCollection;\n\n  constructor(url: string, featureCollection: FeatureCollection) {\n    super(\"response\");\n\n    this.url = url;\n\n    this.featureCollection = featureCollection;\n  }\n}\n\nexport class ReverseToggleEvent extends BaseEvent {\n  reverse: boolean;\n\n  constructor(reverse: boolean) {\n    super(\"reversetoggle\");\n\n    this.reverse = reverse;\n  }\n}\n"],"names":["noop","assign","tar","src","k","run","fn","blank_object","run_all","fns","is_function","thing","safe_not_equal","a","b","src_url_equal_anchor","src_url_equal","element_src","url","is_empty","obj","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","get_slot_changes","dirty","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","get_all_dirty_from_scope","length","i","null_to_empty","value","append","target","node","insert","anchor","detach","element","name","svg_element","text","data","space","empty","listen","event","handler","options","prevent_default","attr","attribute","children","set_data","set_input_value","input","toggle_class","toggle","custom_event","type","detail","bubbles","cancelable","current_component","set_current_component","component","get_current_component","onDestroy","createEventDispatcher","callbacks","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","flush","add_render_callback","seen_callbacks","flushidx","saved_component","update","callback","$$","flush_render_callbacks","filtered","targets","c","outroing","outros","group_outros","check_outros","transition_in","block","local","transition_out","ensure_array_like","array_like_or_iterator","outro_and_destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","destroy","create_each_block","next","get_context","o","n","old_indexes","new_blocks","new_lookup","deltas","updates","child_ctx","key","will_move","did_move","new_block","old_block","new_key","old_key","create_component","mount_component","fragment","after_update","new_on_destroy","destroy_component","detaching","make_dirty","init","instance","create_fragment","not_equal","props","append_styles","parent_component","ready","ret","rest","nodes","SvelteComponent","__publicField","index","PUBLIC_VERSION","svg","path","img","img_src_value","scaleFactor","scaleUrl","sprites","div","span","create_if_block_1","create_if_block_2","create_if_block_3","show_if_1","show_if_2","show_if_3","show_if_4","create_if_block_8","li","li_aria_selected_value","li_aria_checked_value","span3","span1","span0","span2","t1","t1_value","t4","t4_value","hidpi","spritePromise","feature","$$props","style","showPlaceType","missingIconsCache","iconsBaseUrl","dispatch","category","imageUrl","spriteIcon","loadSprites","response","handleImgError","loadIcon","loadIcon2","categories","$$invalidate","ev","_a","isReverse","placeType","_c","_b","_e","_d","circle","wrapNum","x","range","includeMax","max","min","d","unwrapBbox","bbox0","bbox","cachedLocation","getProximity","mapController","proximity","ac","centerAndZoom","rule","cg","coords","resolve","reject","pos","err","dm_invalid","dm_numbers","dd_re","dms_periods","dms_abbr","coords_other","toCoordinateFormat","format","parts","decimalLatitude","decimalLongitude","absoluteLatitude","absoluteLongitude","latDir","longDir","result","degreesLatitude","degreesLongitude","minutesLatitudeNotTruncated","minutesLongitudeNotTruncated","dmMinsLatitude","round","dmMinsLongitude","latMinutes","longMinutes","latSeconds","longSeconds","latMinutesString","longMinutesString","num","places","converter","coordsString","decimalPlaces","ddLat","ddLng","latdir","lngdir","originalFormat","match","matchSuccess","checkMatch","patt","verbatimCoordinates","verbatimLat","verbatimLng","sepChars","seps","middle","splitIndex","currSepIndex","startSearchIndex","splitLat","splitLon","coordsCloseEnough","filteredMatch","numerictest","stringtest","halflen","leftside","rightside","bothAreNumbers","bothAreStrings","valuesAreEqual","decimalsCloseEnough","dec1","dec2","originaldiff","coordsToTest","to","coordsParserFormats","coordsParserDecimals","coordsRegexFormats","otherFormats","getAllTestFormats","arr1","item","testFormats","convert","button","ul","div1","div0","featureitem_changes","create_if_block_5","if_block2","create_if_block_4","form","button0","input_1","button1","ZOOM_DEFAULTS","className","apiKey","clearButtonTitle","clearOnBlur","clearListOnPick","keepListOpen","collapsed","country","debounceSearch","enableReverse","errorMessage","filter","flyTo","fuzzyMatch","language","limit","COPY_LIMIT","reverseGeocodingLimit","minLength","noResultsMessage","placeholder","reverseActive","reverseButtonTitle","searchValue","pickedResultStyle","showResultsWhileTyping","selectFirst","flyToSelected","markerOnSelected","types","COPY_TYPES","reverseGeocodingTypes","exhaustiveReverseGeocoding","excludeTypes","COPY_EXCLUDE_TYPES","reverseGeocodingExcludeTypes","zoom","apiUrl","fetchParameters","adjustUrlQuery","adjustUrl","focus","blur","setQuery","submit","reverse","selectedItemIndex","handleSubmit","handleInput","clearList","listFeatures","picked","clearMap","markedFeatures","lastSearchUrl","error","cachedFeatures","abortController","searchTimeoutRef","focusedDelayed","prevIdToFly","focused","zoomTo","isQueryReverse","search","zoomToResults","byId","exact","urlObj","sp","effTypes","typeRule","effExcludeTypes","effReverseGeocodingLimit","noTypes","selected","featureCollection","res","e","fuzzyOnly","allZoom","featZoom","computeZoom","goToPicked","handleReverse","coordinates","handleKeyDown","dir","listFeature","_","debounce","sv","pick","handleMouseEnter","handleMouseLeave","click_handler","$$value","focus_handler","blur_handler","click_handler_1","change_handler","click_handler_3","click_handler_4","mouseenter_handler","select_handler","showPolygonMarker","optionsVisible","geom","properties","feat","polygon","ring","j","features","fc","multiPolygon","coordEach","geojson","excludeWrapCoord","l","geometry","stopG","geometryMaybeCollection","wrapShrink","coordIndex","isGeometryCollection","isFeatureCollection","isFeature","stop","featureIndex","geomIndex","multiFeatureIndex","geometryIndex","geomType","geomEach","g","featureProperties","featureBBox","featureId","flattenEach","id","coordinate","coord","turf_bbox_default","isNumeric","mathceil","mathfloor","bignumberError","tooManyDigits","BASE","LOG_BASE","MAX_SAFE_INTEGER","POWS_TEN","SQRT_BASE","MAX","clone","configObject","convertBase","parseNumeric","P","BigNumber","ONE","DECIMAL_PLACES","ROUNDING_MODE","TO_EXP_NEG","TO_EXP_POS","MIN_EXP","MAX_EXP","CRYPTO","MODULO_MODE","POW_PRECISION","FORMAT","ALPHABET","alphabetHasNormalDecimalDigits","v","alphabet","caseChanged","isNum","len","str","intCheck","p","s","out","maxOrMin","pow2_53","random53bitInt","dp","rand","args","sum","decimal","toBaseOut","baseIn","baseOut","arr","arrL","sign","callerIsToString","r","xc","y","rm","toFixedPoint","coeffToString","multiply","base","m","temp","xlo","xhi","carry","klo","khi","compare","aL","bL","cmp","subtract","more","prod","prodL","q","qc","rem","remL","rem0","xi","xL","yc0","yL","yz","yc","bitFloor","c0","ne","toExponential","normalise","basePrefix","dotAfter","dotBefore","isInfinityOrNaN","whitespaceOrPlus","p1","p2","sd","ni","rd","pows10","valueOf","half","isModExp","nIsBig","nIsNeg","nIsOdd","isOdd","t","xLTy","xe","ye","xcL","ycL","ylo","yhi","zc","sqrtBase","rep","g1","g2","groupSeparator","intPart","fractionPart","isNeg","intDigits","md","d0","d1","d2","exp","n0","n1","z","zs","SplayTreeNode","SplayTreeSetNode","SplayTree","root","right","newTreeRight","left","newTreeLeft","current","comp","currentLeft","currentRight","nextLeft","nextRight","count","SplayTreeSet","_SplayTreeSet","isValidKey","elements","f","nodeRight","nodeLeft","retainSet","modificationCount","object","other","u","set","copyChildren","node2","dest","newLeft","newRight","SplayTreeSetEntryIterableIterator","SplayTreeKeyIterableIterator","SplayTreeIterableIterator","tree","constant_default","compare_default","eps","almostEqual","orient_default","almostCollinear","area2","ax","ay","cx","cy","identity_default","snap_default","xTree","yTree","snapCoord","snap","eps2","precision","isInBbox","point","getBboxOverlap","b1","b2","lowerX","upperX","lowerY","upperY","crossProduct","dotProduct","sineOfAngle","pShared","pBase","pAngle","vBase","vAngle","cosineOfAngle","horizontalIntersection","pt","verticalIntersection","intersection","pt1","v1","pt2","v2","kross","ve","x1","x2","y1","y2","SweepEvent","_SweepEvent","isLeft","ptCmp","Segment","aPt","bPt","otherEvents","iMax","evt","numEvents","evt1","evt2","events","baseEvent","cache","fillCache","linkedEvent","nextEvent","asine","acosine","bsine","bcosine","RingOut","_RingOut","allSegments","ringsOut","segment","prevEvent","startingPoint","intersectionLEs","availableLEs","firstPt","lastPt","indexLE","jMax","intersectionLE","ringEvents","comparator","prevPt","points","nextPt2","nextPt","step","iStart","iEnd","orderedPoints","enclosing","leftMostEvt","prevSeg","prevPrevSeg","PolyOut","exteriorRing","geom0","ringGeom","MultiPolyOut","rings","polyGeom","polys","enclosingRing","SweepLine","queue","SplayTreeSet2","newEvents","nextSeg","prevMySplitter","prevInter","newEventsFromSplit","nextMySplitter","nextInter","mySplitter","inter","seg","rightSE","Operation","moreGeoms","operation","multipolys","MultiPolyIn","subject","mpA","SplayTreeSet3","sweepEvents","sweepLine","operation_default","segmentId","_Segment","leftSE","windings","alx","blx","arx","brx","aly","bly","ary","bry","aCmpBLeft","bCmpARight","bCmpALeft","aCmpBRight","by","bx","leftPt","rightPt","winding","cmpPts","newRightSE","tBbox","oBbox","bboxOverlap","tlp","trp","olp","orp","touchesOtherLSE","touchesThisLSE","touchesOtherRSE","touchesThisRSE","alreadyLinked","newLeftSE","oldRightSE","newSeg","tmpEvt","consumer","consumee","tmp","beforeState","ringsAfter","windingsAfter","mpsAfter","polysAfter","polysExclude","poly","mp","mpsBefore","noBefores","noAfters","least","most","diff","isJustSubject","mps","RingIn","geomRing","isExterior","firstPoint","BigNumber2","prevPoint","PolyIn","geomPoly","multiPoly","ringSweepEvents","isSubject","polySweepEvents","union","difference","difference2","geoms","differenced","polyclip.difference","turf_difference_default","flatten","results","turf_flatten_default","union2","unioned","polyclip.union","turf_union_default","setMask","setData","bb","tolerance","leaksLeft","leaksRight","flattened","position","EPSG_4326","defaultStyle","isMask","weight","Style","Stroke","Fill","Icon","Text","createOpenLayersMapController","map","flyToOptions","flyToBounds","fullGeometryStyle","prevSelected","prevHovered","eventHandler","reverseMarker","indicatingReverse","vectorLayer","VectorLayer","source","VectorSource","getProjection","getUserProjection","fromWgs84","handleMapClick","toLonLat","center","fromLonLat","padding","maxZoom","transformExtent","OlFeature","OlPoint","OlPolygon","OlMultiPolygon","handled","OlGeometryCollection","OlLineString","OlMultiLineString","marker","offset","view","GeocodingControl","Control","__privateAdd","_gc","_options","restOptions","__privateSet","GeocodingControlComponent","__privateGet","SelectEvent","PickEvent","FeaturesListedEvent","FeaturesMarkedEvent","ResponseEvent","OptionsVisibilityChangeEvent","ReverseToggleEvent","QueryChangeEvent","BaseEvent","query"],"mappings":"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CACI,oBAAqB,6BACrB,iBAAkB,eAClB,kBAAmB,cACtB,EACD,CACI,oBAAqB,2BACrB,iBAAkB,cAClB,kBAAmB,aACtB,EACD,CACI,oBAAqB,2BACrB,iBAAkB,cAClB,kBAAmB,aACtB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,YAClB,kBAAmB,YACtB,EACD,CACI,oBAAqB,iBACrB,iBAAkB,SAClB,kBAAmB,SACtB,EACD,CACI,oBAAqB,mBACrB,iBAAkB,UAClB,kBAAmB,UACtB,EACD,CACI,oBAAqB,iBACrB,iBAAkB,UAClB,kBAAmB,SACtB,EACD,CACI,oBAAqB,mBACrB,iBAAkB,WAClB,kBAAmB,UACtB,EACD,CACI,oBAAqB,2BACrB,iBAAkB,cAClB,kBAAmB,aACtB,EACD,CACI,oBAAqB,qBACrB,iBAAkB,YAClB,kBAAmB,WACtB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,YAClB,kBAAmB,WACtB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,aAClB,kBAAmB,YACtB,EACD,CACI,oBAAqB,oBACrB,iBAAkB,WAClB,kBAAmB,WACnB,gBAAiB,cACjB,iBAAkB,cACrB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,YAClB,kBAAmB,YACnB,gBAAiB,cACjB,iBAAkB,kBACrB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,YAClB,kBAAmB,YACnB,gBAAiB,eACjB,iBAAkB,iBACrB,EACD,CACI,oBAAqB,qBACrB,iBAAkB,WAClB,kBAAmB,YACnB,gBAAiB,cACjB,iBAAkB,aACrB,EACD,CACI,oBAAqB,4BACrB,iBAAkB,eAClB,kBAAmB,eACnB,gBAAiB,cACjB,iBAAkB,aACrB,EACD,CACI,oBAAqB,kBACrB,iBAAkB,UAClB,kBAAmB,SACtB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,WAClB,kBAAmB,WACtB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,WAClB,kBAAmB,WACtB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,YAClB,kBAAmB,YAC3B,CACA,EACMC,GAAuB,CACzB,gBAAiB,OACjB,iBAAkB,OACtB,EAEMC,GAAqB,CACvB,CACI,oBAAqB,sCACrB,iBAAkB,oBAClB,kBAAmB,mBACnB,gBAAiB,mBACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,4BACrB,iBAAkB,eAClB,kBAAmB,eACnB,gBAAiB,mBACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,YAClB,kBAAmB,YACnB,gBAAiB,kBACjB,iBAAkB,iBACrB,EACD,CACI,oBAAqB,8BACrB,iBAAkB,gBAClB,kBAAmB,gBACnB,gBAAiB,UACjB,iBAAkB,kBACrB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,aAClB,kBAAmB,aACnB,gBAAiB,kBACjB,iBAAkB,kBACrB,EACD,CACI,oBAAqB,8BACrB,iBAAkB,gBAClB,kBAAmB,gBACnB,gBAAiB,kBACjB,iBAAkB,kBACrB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,aAClB,kBAAmB,aACnB,gBAAiB,UACjB,iBAAkB,UACrB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,aAClB,kBAAmB,aACnB,gBAAiB,UACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,6BACrB,iBAAkB,cAClB,kBAAmB,gBACnB,gBAAiB,UACjB,iBAAkB,UACrB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,YAClB,kBAAmB,aACnB,gBAAiB,UACjB,iBAAkB,UACrB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,YAClB,kBAAmB,aACnB,gBAAiB,UACjB,iBAAkB,UACrB,EACD,CACI,oBAAqB,gBACrB,iBAAkB,SAClB,kBAAmB,SACnB,gBAAiB,MACjB,iBAAkB,KAC1B,CACA,EAEMC,GAAe,CACjB,CACI,oBAAqB,yBACrB,iBAAkB,aAClB,kBAAmB,cACnB,gBAAiB,WACjB,iBAAkB,UACrB,EACD,CACI,oBAAqB,gBACrB,iBAAkB,SAClB,kBAAmB,SACnB,gBAAiB,IACjB,iBAAkB,EACrB,EACD,CACI,oBAAqB,gBACrB,iBAAkB,SAClB,kBAAmB,SACnB,gBAAiB,EACjB,iBAAkB,CACrB,EACD,CACI,oBAAqB,gBACrB,iBAAkB,SAClB,kBAAmB,SACnB,gBAAiB,MACjB,iBAAkB,KACrB,EACD,CACI,oBAAqB,8CACrB,iBAAkB,wBAClB,kBAAmB,wBACnB,gBAAiB,oBACjB,iBAAkB,QACrB,EACD,CACI,oBAAqB,2BACrB,iBAAkB,cAClB,kBAAmB,aACnB,gBAAiB,SACjB,iBAAkB,OACrB,EACD,CACI,oBAAqB,4BACrB,iBAAkB,cAClB,kBAAmB,gBACnB,gBAAiB,UACjB,iBAAkB,UACrB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,YAClB,kBAAmB,YACnB,gBAAiB,SACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,qBACrB,iBAAkB,YAClB,kBAAmB,WACnB,gBAAiB,SACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,0BACrB,iBAAkB,cAClB,kBAAmB,cACnB,gBAAiB,WACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,0BACrB,iBAAkB,cAClB,kBAAmB,cACnB,gBAAiB,WACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,2BACrB,iBAAkB,cAClB,kBAAmB,cACnB,gBAAiB,UACjB,iBAAkB,QACrB,EACD,CACI,oBAAqB,0BACrB,iBAAkB,cAClB,kBAAmB,cACnB,gBAAiB,UACjB,iBAAkB,QACrB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,aAClB,kBAAmB,aACnB,gBAAiB,WACjB,iBAAkB,WACrB,EACD,CACI,oBAAqB,wBACrB,iBAAkB,aAClB,kBAAmB,aACnB,gBAAiB,WACjB,iBAAkB,WACrB,EACD,CACI,oBAAqB,uBACrB,iBAAkB,aAClB,kBAAmB,YACnB,gBAAiB,UACjB,iBAAkB,OACrB,EACD,CACI,oBAAqB,sBACrB,iBAAkB,YAClB,kBAAmB,YACnB,gBAAiB,SACjB,iBAAkB,SACrB,EACD,CACI,oBAAqB,iCACrB,iBAAkB,iBAClB,kBAAmB,iBACnB,gBAAiB,SACjB,iBAAkB,QACrB,EACD,CACI,oBAAqB,oBACrB,iBAAkB,UAClB,kBAAm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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,17,18,19,20,21,23,24,25,26,27,28,29,30,31]}