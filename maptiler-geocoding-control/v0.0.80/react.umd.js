(function($,G){typeof exports=="object"&&typeof module<"u"?G(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],G):($=typeof globalThis<"u"?globalThis:$||self,G($.MaptilerGeocoder={},$.React))})(this,function($,G){"use strict";function z(){}function st(t,e){for(const n in e)t[n]=e[n];return t}function De(t){return t()}function Fe(){return Object.create(null)}function W(t){t.forEach(De)}function Ve(t){return typeof t=="function"}function de(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function at(t){return Object.keys(t).length===0}function dt(t,e,n,r){if(t){const c=qe(t,e,n,r);return t[0](c)}}function qe(t,e,n,r){return t[1]&&r?st(n.ctx.slice(),t[1](r(e))):n.ctx}function ht(t,e,n,r){if(t[2]&&r){const c=t[2](r(n));if(e.dirty===void 0)return c;if(typeof c=="object"){const u=[],i=Math.max(e.dirty.length,c.length);for(let d=0;d<i;d+=1)u[d]=e.dirty[d]|c[d];return u}return e.dirty|c}return e.dirty}function mt(t,e,n,r,c,u){if(c){const i=qe(e,n,r,u);t.p(i,c)}}function _t(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function He(t){return t??""}function b(t,e){t.appendChild(e)}function O(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode&&t.parentNode.removeChild(t)}function gt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function ie(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ee(t){return document.createTextNode(t)}function K(){return ee(" ")}function j(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function yt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function bt(t){return Array.from(t.childNodes)}function he(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ke(t,e){t.value=e??""}function Z(t,e,n){t.classList[n?"add":"remove"](e)}function wt(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n,r,e),c}let me;function _e(t){me=t}function Qe(){if(!me)throw new Error("Function called outside component initialization");return me}function kt(t){Qe().$$.on_destroy.push(t)}function vt(){const t=Qe();return(e,n,{cancelable:r=!1}={})=>{const c=t.$$.callbacks[e];if(c){const u=wt(e,n,{cancelable:r});return c.slice().forEach(i=>{i.call(t,u)}),!u.defaultPrevented}return!0}}const ce=[],Ce=[];let ue=[];const Ue=[],pt=Promise.resolve();let Se=!1;function Tt(){Se||(Se=!0,pt.then(We))}function Le(t){ue.push(t)}const Pe=new Set;let oe=0;function We(){if(oe!==0)return;const t=me;do{try{for(;oe<ce.length;){const e=ce[oe];oe++,_e(e),Mt(e.$$)}}catch(e){throw ce.length=0,oe=0,e}for(_e(null),ce.length=0,oe=0;Ce.length;)Ce.pop()();for(let e=0;e<ue.length;e+=1){const n=ue[e];Pe.has(n)||(Pe.add(n),n())}ue.length=0}while(ce.length);for(;Ue.length;)Ue.pop()();Se=!1,Pe.clear(),_e(t)}function Mt(t){if(t.fragment!==null){t.update(),W(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Le)}}function Rt(t){const e=[],n=[];ue.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ue=e}const pe=new Set;let te;function Ze(){te={r:0,c:[],p:te}}function Je(){te.r||W(te.c),te=te.p}function D(t,e){t&&t.i&&(pe.delete(t),t.i(e))}function Q(t,e,n,r){if(t&&t.o){if(pe.has(t))return;pe.add(t),te.c.push(()=>{pe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Te(t){t&&t.c()}function ge(t,e,n,r){const{fragment:c,after_update:u}=t.$$;c&&c.m(e,n),r||Le(()=>{const i=t.$$.on_mount.map(De).filter(Ve);t.$$.on_destroy?t.$$.on_destroy.push(...i):W(i),t.$$.on_mount=[]}),u.forEach(Le)}function ye(t,e){const n=t.$$;n.fragment!==null&&(Rt(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xt(t,e){t.$$.dirty[0]===-1&&(ce.push(t),Tt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function be(t,e,n,r,c,u,i,d=[-1]){const o=me;_e(t);const a=t.$$={fragment:null,ctx:[],props:u,update:z,not_equal:c,bound:Fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Fe(),dirty:d,skip_bound:!1,root:e.target||o.$$.root};i&&i(a.root);let R=!1;if(a.ctx=n?n(t,e.props||{},(E,B,...C)=>{const A=C.length?C[0]:B;return a.ctx&&c(a.ctx[E],a.ctx[E]=A)&&(!a.skip_bound&&a.bound[E]&&a.bound[E](A),R&&xt(t,E)),B}):[],a.update(),R=!0,W(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const E=bt(e.target);a.fragment&&a.fragment.l(E),E.forEach(N)}else a.fragment&&a.fragment.c();e.intro&&D(t.$$.fragment),ge(t,e.target,e.anchor,e.customElement),We()}_e(o)}class we{$destroy(){ye(this,1),this.$destroy=z}$on(e,n){if(!Ve(n))return z;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const c=r.indexOf(n);c!==-1&&r.splice(c,1)}}$set(e){this.$$set&&!at(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fn="";function Et(t){let e,n;return{c(){e=ie("svg"),n=ie("path"),f(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),f(e,"viewBox","0 0 60.006 21.412"),f(e,"width","14"),f(e,"height","20"),f(e,"class","svelte-en2qvf")},m(r,c){O(r,e,c),b(e,n)},p:z,i:z,o:z,d(r){r&&N(e)}}}class zt extends we{constructor(e){super(),be(this,e,null,Et,de,{})}}const sn="";function Bt(t){let e,n;return{c(){e=ie("svg"),n=ie("path"),f(n,"d","M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"),f(e,"viewBox","0 0 18 18"),f(e,"width","16"),f(e,"height","16"),f(e,"class","svelte-en2qvf")},m(r,c){O(r,e,c),b(e,n)},p:z,i:z,o:z,d(r){r&&N(e)}}}class Ct extends we{constructor(e){super(),be(this,e,null,Bt,de,{})}}const an="";function St(t){let e;return{c(){e=x("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',f(e,"class","svelte-7cmwmc")},m(n,r){O(n,e,r)},p:z,i:z,o:z,d(n){n&&N(e)}}}class Lt extends we{constructor(e){super(),be(this,e,null,St,de,{})}}const dn="",hn="";function Pt(t){let e,n;return{c(){e=ie("svg"),n=ie("path"),f(n,"d","M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"),f(e,"viewBox","0 0 18 18"),f(e,"xml:space","preserve"),f(e,"width","20"),f(e,"class","svelte-en2qvf")},m(r,c){O(r,e,c),b(e,n)},p:z,i:z,o:z,d(r){r&&N(e)}}}class At extends we{constructor(e){super(),be(this,e,null,Pt,de,{})}}const mn="";function Xe(t,e,n){const r=t.slice();return r[69]=e[n],r[71]=n,r}function Ye(t){let e,n;return e=new Lt({}),{c(){Te(e.$$.fragment)},m(r,c){ge(e,r,c),n=!0},i(r){n||(D(e.$$.fragment,r),n=!0)},o(r){Q(e.$$.fragment,r),n=!1},d(r){ye(e,r)}}}function $e(t){let e,n,r,c,u;return n=new zt({}),{c(){e=x("button"),Te(n.$$.fragment),f(e,"type","button"),f(e,"title",t[9]),f(e,"class","svelte-1xi1e9d"),Z(e,"active",t[0])},m(i,d){O(i,e,d),ge(n,e,null),r=!0,c||(u=j(e,"click",t[56]),c=!0)},p(i,d){(!r||d[0]&512)&&f(e,"title",i[9]),(!r||d[0]&1)&&Z(e,"active",i[0])},i(i){r||(D(n.$$.fragment,i),r=!0)},o(i){Q(n.$$.fragment,i),r=!1},d(i){i&&N(e),ye(n),c=!1,u()}}}function Nt(t){let e,n,r,c=t[12],u=[];for(let i=0;i<c.length;i+=1)u[i]=tt(Xe(t,c,i));return{c(){e=x("ul");for(let i=0;i<u.length;i+=1)u[i].c();f(e,"class","svelte-1xi1e9d")},m(i,d){O(i,e,d);for(let o=0;o<u.length;o+=1)u[o]&&u[o].m(e,null);n||(r=[j(e,"mouseleave",t[59]),j(e,"blur",t[60])],n=!0)},p(i,d){if(d[0]&2110464){c=i[12];let o;for(o=0;o<c.length;o+=1){const a=Xe(i,c,o);u[o]?u[o].p(a,d):(u[o]=tt(a),u[o].c(),u[o].m(e,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=c.length}},d(i){i&&N(e),gt(u,i),n=!1,W(r)}}}function jt(t){let e,n;return{c(){e=x("div"),n=ee(t[7]),f(e,"class","no-results svelte-1xi1e9d")},m(r,c){O(r,e,c),b(e,n)},p(r,c){c[0]&128&&he(n,r[7])},d(r){r&&N(e)}}}function It(t){let e="",n;return{c(){n=ee(e)},m(r,c){O(r,n,c)},p:z,d(r){r&&N(n)}}}function Gt(t){let e,n;return{c(){e=x("div"),n=ee(t[6]),f(e,"class","error svelte-1xi1e9d")},m(r,c){O(r,e,c),b(e,n)},p(r,c){c[0]&64&&he(n,r[6])},d(r){r&&N(e)}}}function et(t){var c,u;let e,n=(((u=(c=t[69].properties)==null?void 0:c.place_type_name)==null?void 0:u[0])??t[69].place_type[0])+"",r;return{c(){e=x("span"),r=ee(n),f(e,"class","line2 svelte-1xi1e9d")},m(i,d){O(i,e,d),b(e,r)},p(i,d){var o,a;d[0]&4096&&n!==(n=(((a=(o=i[69].properties)==null?void 0:o.place_type_name)==null?void 0:a[0])??i[69].place_type[0])+"")&&he(r,n)},d(i){i&&N(e)}}}function tt(t){let e,n,r,c,u=t[69].place_name.replace(/,.*/,"")+"",i,d,o,a=t[69].place_name.replace(/[^,]*,?\s*/,"")+"",R,E,B,C,A,F,h=t[10]&&et(t);function V(){return t[57](t[71])}function J(){return t[58](t[69])}return{c(){e=x("li"),n=x("span"),r=x("span"),c=x("span"),i=ee(u),d=K(),o=x("span"),R=ee(a),E=K(),h&&h.c(),B=K(),f(c,"class","primary svelte-1xi1e9d"),f(o,"class","secondary svelte-1xi1e9d"),f(r,"class","line1 svelte-1xi1e9d"),f(n,"class","texts svelte-1xi1e9d"),f(e,"tabindex","0"),f(e,"data-selected",C=t[13]===t[71]),f(e,"class","svelte-1xi1e9d"),Z(e,"selected",t[13]===t[71])},m(_,m){O(_,e,m),b(e,n),b(n,r),b(r,c),b(c,i),b(r,d),b(r,o),b(o,R),b(n,E),h&&h.m(n,null),b(e,B),A||(F=[j(e,"mouseenter",V),j(e,"focus",J)],A=!0)},p(_,m){t=_,m[0]&4096&&u!==(u=t[69].place_name.replace(/,.*/,"")+"")&&he(i,u),m[0]&4096&&a!==(a=t[69].place_name.replace(/[^,]*,?\s*/,"")+"")&&he(R,a),t[10]?h?h.p(t,m):(h=et(t),h.c(),h.m(n,null)):h&&(h.d(1),h=null),m[0]&8192&&C!==(C=t[13]===t[71])&&f(e,"data-selected",C),m[0]&8192&&Z(e,"selected",t[13]===t[71])},d(_){_&&N(e),h&&h.d(),A=!1,W(F)}}}function Ot(t){let e,n,r,c,u,i,d,o,a,R,E,B,C,A,F,h,V,J;c=new At({}),R=new Ct({});let _=t[17]&&Ye(),m=t[5]===!0&&$e(t);const g=t[48].default,S=dt(g,t,t[47],null);function ke(s,M){var v,fe;if(s[16])return Gt;if(!s[14])return It;if(((v=s[12])==null?void 0:v.length)===0)return jt;if(s[14]&&((fe=s[12])!=null&&fe.length))return Nt}let U=ke(t),k=U&&U(t);return{c(){e=x("form"),n=x("div"),r=x("button"),Te(c.$$.fragment),u=K(),i=x("input"),d=K(),o=x("div"),a=x("button"),Te(R.$$.fragment),E=K(),_&&_.c(),B=K(),m&&m.c(),C=K(),S&&S.c(),A=K(),k&&k.c(),f(r,"type","button"),f(r,"class","svelte-1xi1e9d"),f(i,"placeholder",t[8]),f(i,"aria-label",t[8]),f(i,"class","svelte-1xi1e9d"),f(a,"type","button"),f(a,"title",t[3]),f(a,"class","svelte-1xi1e9d"),Z(a,"displayable",t[1]!==""),f(o,"class","clear-button-container svelte-1xi1e9d"),f(n,"class","input-group svelte-1xi1e9d"),f(e,"tabindex","0"),f(e,"class",F=He(t[2])+" svelte-1xi1e9d"),Z(e,"can-collapse",t[4]&&t[1]==="")},m(s,M){O(s,e,M),b(e,n),b(n,r),ge(c,r,null),b(n,u),b(n,i),t[50](i),Ke(i,t[1]),b(n,d),b(n,o),b(o,a),ge(R,a,null),b(o,E),_&&_.m(o,null),b(n,B),m&&m.m(n,null),b(n,C),S&&S.m(n,null),b(e,A),k&&k.m(e,null),h=!0,V||(J=[j(r,"click",t[49]),j(i,"input",t[51]),j(i,"focus",t[52]),j(i,"blur",t[53]),j(i,"keydown",t[19]),j(i,"input",t[54]),j(a,"click",t[55]),j(e,"submit",yt(t[18]))],V=!0)},p(s,M){(!h||M[0]&256)&&f(i,"placeholder",s[8]),(!h||M[0]&256)&&f(i,"aria-label",s[8]),M[0]&2&&i.value!==s[1]&&Ke(i,s[1]),(!h||M[0]&8)&&f(a,"title",s[3]),(!h||M[0]&2)&&Z(a,"displayable",s[1]!==""),s[17]?_?M[0]&131072&&D(_,1):(_=Ye(),_.c(),D(_,1),_.m(o,null)):_&&(Ze(),Q(_,1,1,()=>{_=null}),Je()),s[5]===!0?m?(m.p(s,M),M[0]&32&&D(m,1)):(m=$e(s),m.c(),D(m,1),m.m(n,C)):m&&(Ze(),Q(m,1,1,()=>{m=null}),Je()),S&&S.p&&(!h||M[1]&65536)&&mt(S,g,s,s[47],h?ht(g,s[47],M,null):_t(s[47]),null),U===(U=ke(s))&&k?k.p(s,M):(k&&k.d(1),k=U&&U(s),k&&(k.c(),k.m(e,null))),(!h||M[0]&4&&F!==(F=He(s[2])+" svelte-1xi1e9d"))&&f(e,"class",F),(!h||M[0]&22)&&Z(e,"can-collapse",s[4]&&s[1]==="")},i(s){h||(D(c.$$.fragment,s),D(R.$$.fragment,s),D(_),D(m),D(S,s),h=!0)},o(s){Q(c.$$.fragment,s),Q(R.$$.fragment,s),Q(_),Q(m),Q(S,s),h=!1},d(s){s&&N(e),ye(c),t[50](null),ye(R),_&&_.d(),m&&m.d(),S&&S.d(s),k&&k.d(),V=!1,W(J)}}}function Dt(t,e,n){const r=e[1],c=e[0],u=r-c;return t===r&&n?t:((t-c)%u+u)%u+c}function nt(t){let e=[...t];return e[2]<e[0]&&(e[2]+=360),e}function Ft(t,e,n){let r,{$$slots:c={},$$scope:u}=e,{class:i=void 0}=e,{apiKey:d}=e,{bbox:o=void 0}=e,{clearButtonTitle:a="clear"}=e,{clearOnBlur:R=!1}=e,{collapsed:E=!1}=e,{country:B=void 0}=e,{debounceSearch:C=200}=e,{enableReverse:A=!1}=e,{errorMessage:F="Searching failed"}=e,{filter:h=()=>!0}=e,{flyTo:V=!0}=e,{fuzzyMatch:J=!0}=e,{language:_=void 0}=e,{limit:m=void 0}=e,{mapController:g=void 0}=e,{minLength:S=2}=e,{noResultsMessage:ke="No results found"}=e,{placeholder:U="Search"}=e,{proximity:k=void 0}=e,{reverseActive:s=A==="always"}=e,{reverseButtonTitle:M="toggle reverse geocoding"}=e,{searchValue:v=""}=e,{showFullGeometry:fe=!0}=e,{showPlaceType:it=!1}=e,{showResultsWhileTyping:Me=!0}=e,{trackProximity:Re=!0}=e,{types:xe=void 0}=e,{zoom:Ee=16}=e,{fetchParameters:Ae={}}=e;function Kt(){q.focus()}function Qt(){q.blur()}function ct(l,T=!0){n(1,v=l),T?(n(13,p=-1),ot()):(je(),setTimeout(()=>{q.focus(),q.select()}))}let se=!1,y,L,w,ut="",q,p=-1,X,ze=[],ne,ae,Be;const Y=vt();kt(()=>{g&&(g.setEventHandler(void 0),g.indicateReverse(!1),g.setSelectedMarker(-1),g.setMarkers(void 0,void 0))});function ot(l){if(ae&&(clearTimeout(ae),ae=void 0),p>-1&&y)n(45,w=y[p]),n(1,v=w.place_name.replace(/,.*/,"")),n(16,X=void 0),n(44,L=void 0),n(13,p=-1);else if(v){const T=l||!ft();Ne(v,{exact:!0}).then(()=>{n(44,L=y),n(45,w=void 0),T&&Ut()}).catch(H=>n(16,X=H))}}function ft(){return/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/.test(v)}async function Ne(l,{byId:T=!1,exact:H=!1}={}){n(16,X=void 0);const ve=ft(),I=new URLSearchParams;_!=null&&I.set("language",Array.isArray(_)?_.join(","):_),xe&&I.set("types",xe.join(",")),ve||(o&&I.set("bbox",o.map(le=>le.toFixed(6)).join(",")),B&&I.set("country",Array.isArray(B)?B.join(","):B)),T||(k&&I.set("proximity",k.map(le=>le.toFixed(6)).join(",")),(H||!Me)&&I.set("autocomplete","false"),I.set("fuzzyMatch",String(J))),m!==void 0&&I.set("limit",String(m)),I.set("key",d);const re="https://api.maptiler.com/geocoding/"+encodeURIComponent(l)+".json?"+I.toString();if(re===ut){T?(n(12,y=void 0),n(45,w=ze[0])):n(12,y=ze);return}ut=re,ne==null||ne.abort();const P=new AbortController;n(17,ne=P);let Ge;try{Ge=await fetch(re,{signal:P.signal,...Ae}).finally(()=>{P===ne&&n(17,ne=void 0)})}catch(le){if(le&&typeof le=="object"&&le.name==="AbortError")return;throw new Error}if(!Ge.ok)throw new Error;const Oe=await Ge.json();Y("response",{url:re,featureCollection:Oe}),T?(n(12,y=void 0),n(45,w=Oe.features[0]),ze=[w]):(n(12,y=Oe.features.filter(h)),ze=y,ve&&q.focus())}function Ut(){var H,ve,I,re;if(!(L!=null&&L.length)||!V)return;const l=[180,90,-180,-90],T=!L.some(P=>!P.matching_text);for(const P of L)(T||!P.matching_text)&&(l[0]=Math.min(l[0],((H=P.bbox)==null?void 0:H[0])??P.center[0]),l[1]=Math.min(l[1],((ve=P.bbox)==null?void 0:ve[1])??P.center[1]),l[2]=Math.max(l[2],((I=P.bbox)==null?void 0:I[2])??P.center[0]),l[3]=Math.max(l[3],((re=P.bbox)==null?void 0:re[3])??P.center[1]));g&&L.length>0&&(w&&l[0]===l[2]&&l[1]===l[3]?g.flyTo(w.center,Ee):g.fitBounds(nt(l),50))}function Wt(l){n(0,s=A==="always"),ct(Dt(l[0],[-180,180],!0).toFixed(6)+","+l[1].toFixed(6))}function Zt(l){if(!y)return;let T=l.key==="ArrowDown"?1:l.key==="ArrowUp"?-1:0;T?(p===-1&&T===-1&&n(13,p=y.length),n(13,p+=T),p>=y.length&&n(13,p=-1),l.preventDefault()):["ArrowLeft","ArrowRight","Home","End"].includes(l.key)&&n(13,p=-1)}function je(l=!0){if(Me&&v.length>S){ae&&clearTimeout(ae);const T=v;ae=window.setTimeout(()=>{Ne(T).catch(H=>n(16,X=H))},l?C:0)}else n(12,y=void 0),n(16,X=void 0)}function Ie(l){n(45,w=l),n(1,v=l.place_name),n(13,p=-1)}const Jt=()=>q.focus();function Xt(l){Ce[l?"unshift":"push"](()=>{q=l,n(15,q)})}function Yt(){v=this.value,n(1,v),n(11,se),n(25,R)}const $t=()=>n(11,se=!0),en=()=>n(11,se=!1),tn=()=>je(),nn=()=>{n(1,v=""),q.focus()},rn=()=>n(0,s=!s),ln=l=>n(13,p=l),cn=l=>Ie(l),un=()=>n(13,p=-1),on=()=>{};return t.$$set=l=>{"class"in l&&n(2,i=l.class),"apiKey"in l&&n(23,d=l.apiKey),"bbox"in l&&n(24,o=l.bbox),"clearButtonTitle"in l&&n(3,a=l.clearButtonTitle),"clearOnBlur"in l&&n(25,R=l.clearOnBlur),"collapsed"in l&&n(4,E=l.collapsed),"country"in l&&n(26,B=l.country),"debounceSearch"in l&&n(27,C=l.debounceSearch),"enableReverse"in l&&n(5,A=l.enableReverse),"errorMessage"in l&&n(6,F=l.errorMessage),"filter"in l&&n(28,h=l.filter),"flyTo"in l&&n(29,V=l.flyTo),"fuzzyMatch"in l&&n(30,J=l.fuzzyMatch),"language"in l&&n(31,_=l.language),"limit"in l&&n(32,m=l.limit),"mapController"in l&&n(33,g=l.mapController),"minLength"in l&&n(34,S=l.minLength),"noResultsMessage"in l&&n(7,ke=l.noResultsMessage),"placeholder"in l&&n(8,U=l.placeholder),"proximity"in l&&n(22,k=l.proximity),"reverseActive"in l&&n(0,s=l.reverseActive),"reverseButtonTitle"in l&&n(9,M=l.reverseButtonTitle),"searchValue"in l&&n(1,v=l.searchValue),"showFullGeometry"in l&&n(35,fe=l.showFullGeometry),"showPlaceType"in l&&n(10,it=l.showPlaceType),"showResultsWhileTyping"in l&&n(36,Me=l.showResultsWhileTyping),"trackProximity"in l&&n(37,Re=l.trackProximity),"types"in l&&n(38,xe=l.types),"zoom"in l&&n(39,Ee=l.zoom),"fetchParameters"in l&&n(40,Ae=l.fetchParameters),"$$scope"in l&&n(47,u=l.$$scope)},t.$$.update=()=>{if(t.$$.dirty[1]&64&&(Re||n(22,k=void 0)),t.$$.dirty[0]&33556480&&setTimeout(()=>{n(14,Be=se),R&&!se&&n(1,v="")}),t.$$.dirty[0]&4098&&(v||(n(45,w=void 0),n(12,y=void 0),n(16,X=void 0),n(44,L=y))),t.$$.dirty[1]&16400&&fe&&w&&!w.address&&w.geometry.type==="Point"&&Ne(w.id,{byId:!0}).catch(l=>n(16,X=l)),t.$$.dirty[0]&536870912|t.$$.dirty[1]&16644&&g&&w&&V&&(!w.bbox||w.bbox[0]===w.bbox[2]&&w.bbox[1]===w.bbox[3]?g.flyTo(w.center,Ee):g.fitBounds(nt(w.bbox),50),n(12,y=void 0),n(44,L=void 0),n(13,p=-1)),t.$$.dirty[0]&4096|t.$$.dirty[1]&8192&&L!==y&&n(44,L=void 0),t.$$.dirty[1]&24580&&g&&g.setMarkers(L,w),t.$$.dirty[0]&2&&n(13,p=-1),t.$$.dirty[0]&20481|t.$$.dirty[1]&68&&g&&g.setEventHandler(l=>{switch(l.type){case"mapClick":s&&Wt(l.coordinates);break;case"proximityChange":n(22,k=Re?l.proximity:void 0);break;case"markerClick":{const T=y==null?void 0:y.find(H=>H.id===l.id);T&&Ie(T)}break;case"markerMouseEnter":n(13,p=Be?(y==null?void 0:y.findIndex(T=>T.id===l.id))??-1:-1);break;case"markerMouseLeave":n(13,p=-1);break}}),t.$$.dirty[0]&8192|t.$$.dirty[1]&4&&(g==null||g.setSelectedMarker(p)),t.$$.dirty[0]&12288&&n(46,r=y==null?void 0:y[p]),t.$$.dirty[0]&2|t.$$.dirty[1]&4){const l=/^(-?\d+(?:\.\d*)?),(-?\d+(?:\.\d*)?)$/.exec(v);g==null||g.setReverseMarker(l?[Number(l[1]),Number(l[2])]:void 0)}t.$$.dirty[1]&32768&&Y("select",r),t.$$.dirty[1]&16384&&Y("pick",w),t.$$.dirty[0]&20480&&Y("optionsVisibilityChange",Be&&!!y),t.$$.dirty[0]&4096&&Y("featuresListed",y),t.$$.dirty[1]&8192&&Y("featuresMarked",L),t.$$.dirty[0]&1&&Y("reverseToggle",s),t.$$.dirty[0]&2&&Y("queryChange",v),t.$$.dirty[0]&1|t.$$.dirty[1]&4&&g&&g.indicateReverse(s)},[s,v,i,a,E,A,F,ke,U,M,it,se,y,p,Be,q,X,ne,ot,Zt,je,Ie,k,d,o,R,B,C,h,V,J,_,m,g,S,fe,Me,Re,xe,Ee,Ae,Kt,Qt,ct,L,w,r,u,c,Jt,Xt,Yt,$t,en,tn,nn,rn,ln,cn,un,on]}class Vt extends we{constructor(e){super(),be(this,e,Ft,Ot,de,{class:2,apiKey:23,bbox:24,clearButtonTitle:3,clearOnBlur:25,collapsed:4,country:26,debounceSearch:27,enableReverse:5,errorMessage:6,filter:28,flyTo:29,fuzzyMatch:30,language:31,limit:32,mapController:33,minLength:34,noResultsMessage:7,placeholder:8,proximity:22,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:35,showPlaceType:10,showResultsWhileTyping:36,trackProximity:37,types:38,zoom:39,fetchParameters:40,focus:41,blur:42,setQuery:43},null,[-1,-1,-1])}get focus(){return this.$$.ctx[41]}get blur(){return this.$$.ctx[42]}get setQuery(){return this.$$.ctx[43]}}const rt=["featuresListed","featuresMarked","optionsVisibilityChange","pick","querychange","response","reversetoggle","select"],qt=["apiKey","bbox","clearButtonTitle","clearOnBlur","collapsed","country","debounceSearch","enableReverse","errorMessage","filter","fuzzyMatch","language","limit","minLength","noResultsMessage","placeholder","proximity","reverseButtonTitle","showFullGeometry","showPlaceType","showResultsWhileTyping","trackProximity","types","zoom","mapController"];function lt(t){return"on"+t[0].toUpperCase()+t.slice(1)}const Ht=G.forwardRef(function(e,n){const r=G.useRef(),c=G.useRef(),u={...e};for(const i of rt)delete u[lt(i)];G.useEffect(()=>{if(!r.current)throw new Error;const i=new Vt({target:r.current,props:u});return c.current=i,()=>i.$destroy()},[]);for(const i of qt)G.useEffect(()=>{c.current&&e[i]!==void 0&&c.current.$set({[i]:e[i]})},[e[i]]);for(const i of rt){const d=e[lt(i)];G.useEffect(()=>{var o;(o=c.current)==null||o.$on(i,d?a=>{d(a.detail)}:void 0)},[d])}return G.useImperativeHandle(n,()=>({setQuery:(i,d=!0)=>{var o;return(o=c.current)==null?void 0:o.setQuery(i,d)},focus:()=>{var i;return(i=c.current)==null?void 0:i.focus()},blur:()=>{var i;return(i=c.current)==null?void 0:i.blur()}})),G.createElement("div",{ref:r})});$.GeocodingControl=Ht,Object.defineProperty($,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=react.umd.cjs.map
