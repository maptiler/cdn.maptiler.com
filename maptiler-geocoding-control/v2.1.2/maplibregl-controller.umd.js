(function(H,X){typeof exports=="object"&&typeof module<"u"?X(exports):typeof define=="function"&&define.amd?define(["exports"],X):(H=typeof globalThis<"u"?globalThis:H||self,X(H.maplibreglMaptilerGeocodingController={}))})(this,function(H){"use strict";var En=Object.defineProperty;var vn=(H,X,fe)=>X in H?En(H,X,{enumerable:!0,configurable:!0,writable:!0,value:fe}):H[X]=fe;var M=(H,X,fe)=>vn(H,typeof X!="symbol"?X+"":X,fe);var _t,bt;function X(n,e,t={}){const i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function fe(n,e,t={}){for(const r of n){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let u=0;u<r[r.length-1].length;u++)if(r[r.length-1][u]!==r[0][u])throw new Error("First and last Position are not equivalent.")}return X({type:"Polygon",coordinates:n},e,t)}function de(n,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function je(n,e,t={}){return X({type:"MultiPolygon",coordinates:n},e,t)}var Tt=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Be=Math.ceil,J=Math.floor,j="[BigNumber Error] ",We=j+"Number primitive has more than 15 significant digits: ",ne=1e14,C=14,He=9007199254740991,Ge=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ce=1e7,W=1e9;function Je(n){var e,t,i,r=S.prototype={constructor:S,toString:null,valueOf:null},u=new S(1),y=20,c=4,E=-7,h=21,b=-1e7,_=1e7,T=!1,O=1,G=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},L="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function S(s,o){var l,m,a,p,w,f,g,x,d=this;if(!(d instanceof S))return new S(s,o);if(o==null){if(s&&s._isBigNumber===!0){d.s=s.s,!s.c||s.e>_?d.c=d.e=null:s.e<b?d.c=[d.e=0]:(d.e=s.e,d.c=s.c.slice());return}if((f=typeof s=="number")&&s*0==0){if(d.s=1/s<0?(s=-s,-1):1,s===~~s){for(p=0,w=s;w>=10;w/=10,p++);p>_?d.c=d.e=null:(d.e=p,d.c=[s]);return}x=String(s)}else{if(!Tt.test(x=String(s)))return i(d,x,f);d.s=x.charCodeAt(0)==45?(x=x.slice(1),-1):1}(p=x.indexOf("."))>-1&&(x=x.replace(".","")),(w=x.search(/e/i))>0?(p<0&&(p=w),p+=+x.slice(w+1),x=x.substring(0,w)):p<0&&(p=x.length)}else{if(q(o,2,L.length,"Base"),o==10&&N)return d=new S(s),V(d,y+d.e+1,c);if(x=String(s),f=typeof s=="number"){if(s*0!=0)return i(d,x,f,o);if(d.s=1/s<0?(x=x.slice(1),-1):1,S.DEBUG&&x.replace(/^0\.0*|\./,"").length>15)throw Error(We+s)}else d.s=x.charCodeAt(0)===45?(x=x.slice(1),-1):1;for(l=L.slice(0,o),p=w=0,g=x.length;w<g;w++)if(l.indexOf(m=x.charAt(w))<0){if(m=="."){if(w>p){p=g;continue}}else if(!a&&(x==x.toUpperCase()&&(x=x.toLowerCase())||x==x.toLowerCase()&&(x=x.toUpperCase()))){a=!0,w=-1,p=0;continue}return i(d,String(s),f,o)}f=!1,x=t(x,o,10,d.s),(p=x.indexOf("."))>-1?x=x.replace(".",""):p=x.length}for(w=0;x.charCodeAt(w)===48;w++);for(g=x.length;x.charCodeAt(--g)===48;);if(x=x.slice(w,++g)){if(g-=w,f&&S.DEBUG&&g>15&&(s>He||s!==J(s)))throw Error(We+d.s*s);if((p=p-w-1)>_)d.c=d.e=null;else if(p<b)d.c=[d.e=0];else{if(d.e=p,d.c=[],w=(p+1)%C,p<0&&(w+=C),w<g){for(w&&d.c.push(+x.slice(0,w)),g-=C;w<g;)d.c.push(+x.slice(w,w+=C));w=C-(x=x.slice(w)).length}else w-=g;for(;w--;x+="0");d.c.push(+x)}}else d.c=[d.e=0]}S.clone=Je,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(s){var o,l;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(o="DECIMAL_PLACES")&&(l=s[o],q(l,0,W,o),y=l),s.hasOwnProperty(o="ROUNDING_MODE")&&(l=s[o],q(l,0,8,o),c=l),s.hasOwnProperty(o="EXPONENTIAL_AT")&&(l=s[o],l&&l.pop?(q(l[0],-1e9,0,o),q(l[1],0,W,o),E=l[0],h=l[1]):(q(l,-1e9,W,o),E=-(h=l<0?-l:l))),s.hasOwnProperty(o="RANGE"))if(l=s[o],l&&l.pop)q(l[0],-1e9,-1,o),q(l[1],1,W,o),b=l[0],_=l[1];else if(q(l,-1e9,W,o),l)b=-(_=l<0?-l:l);else throw Error(j+o+" cannot be zero: "+l);if(s.hasOwnProperty(o="CRYPTO"))if(l=s[o],l===!!l)if(l)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))T=l;else throw T=!l,Error(j+"crypto unavailable");else T=l;else throw Error(j+o+" not true or false: "+l);if(s.hasOwnProperty(o="MODULO_MODE")&&(l=s[o],q(l,0,9,o),O=l),s.hasOwnProperty(o="POW_PRECISION")&&(l=s[o],q(l,0,W,o),G=l),s.hasOwnProperty(o="FORMAT"))if(l=s[o],typeof l=="object")F=l;else throw Error(j+o+" not an object: "+l);if(s.hasOwnProperty(o="ALPHABET"))if(l=s[o],typeof l=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(l))N=l.slice(0,10)=="0123456789",L=l;else throw Error(j+o+" invalid: "+l)}else throw Error(j+"Object expected: "+s);return{DECIMAL_PLACES:y,ROUNDING_MODE:c,EXPONENTIAL_AT:[E,h],RANGE:[b,_],CRYPTO:T,MODULO_MODE:O,POW_PRECISION:G,FORMAT:F,ALPHABET:L}},S.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var o,l,m=s.c,a=s.e,p=s.s;e:if({}.toString.call(m)=="[object Array]"){if((p===1||p===-1)&&a>=-1e9&&a<=W&&a===J(a)){if(m[0]===0){if(a===0&&m.length===1)return!0;break e}if(o=(a+1)%C,o<1&&(o+=C),String(m[0]).length==o){for(o=0;o<m.length;o++)if(l=m[o],l<0||l>=ne||l!==J(l))break e;if(l!==0)return!0}}}else if(m===null&&a===null&&(p===null||p===1||p===-1))return!0;throw Error(j+"Invalid BigNumber: "+s)},S.maximum=S.max=function(){return $(arguments,-1)},S.minimum=S.min=function(){return $(arguments,1)},S.random=function(){var s=9007199254740992,o=Math.random()*s&2097151?function(){return J(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(l){var m,a,p,w,f,g=0,x=[],d=new S(u);if(l==null?l=y:q(l,0,W),w=Be(l/C),T)if(crypto.getRandomValues){for(m=crypto.getRandomValues(new Uint32Array(w*=2));g<w;)f=m[g]*131072+(m[g+1]>>>11),f>=9e15?(a=crypto.getRandomValues(new Uint32Array(2)),m[g]=a[0],m[g+1]=a[1]):(x.push(f%1e14),g+=2);g=w/2}else if(crypto.randomBytes){for(m=crypto.randomBytes(w*=7);g<w;)f=(m[g]&31)*281474976710656+m[g+1]*1099511627776+m[g+2]*4294967296+m[g+3]*16777216+(m[g+4]<<16)+(m[g+5]<<8)+m[g+6],f>=9e15?crypto.randomBytes(7).copy(m,g):(x.push(f%1e14),g+=7);g=w/7}else throw T=!1,Error(j+"crypto unavailable");if(!T)for(;g<w;)f=o(),f<9e15&&(x[g++]=f%1e14);for(w=x[--g],l%=C,w&&l&&(f=Ge[C-l],x[g]=J(w/f)*f);x[g]===0;x.pop(),g--);if(g<0)x=[p=0];else{for(p=-1;x[0]===0;x.splice(0,1),p-=C);for(g=1,f=x[0];f>=10;f/=10,g++);g<C&&(p-=C-g)}return d.e=p,d.c=x,d}}(),S.sum=function(){for(var s=1,o=arguments,l=new S(o[0]);s<o.length;)l=l.plus(o[s++]);return l},t=function(){var s="0123456789";function o(l,m,a,p){for(var w,f=[0],g,x=0,d=l.length;x<d;){for(g=f.length;g--;f[g]*=m);for(f[0]+=p.indexOf(l.charAt(x++)),w=0;w<f.length;w++)f[w]>a-1&&(f[w+1]==null&&(f[w+1]=0),f[w+1]+=f[w]/a|0,f[w]%=a)}return f.reverse()}return function(l,m,a,p,w){var f,g,x,d,v,P,R,I,U=l.indexOf("."),K=y,A=c;for(U>=0&&(d=G,G=0,l=l.replace(".",""),I=new S(m),P=I.pow(l.length-U),G=d,I.c=o(oe(ee(P.c),P.e,"0"),10,a,s),I.e=I.c.length),R=o(l,m,a,w?(f=L,s):(f=s,L)),x=d=R.length;R[--d]==0;R.pop());if(!R[0])return f.charAt(0);if(U<0?--x:(P.c=R,P.e=x,P.s=p,P=e(P,I,K,A,a),R=P.c,v=P.r,x=P.e),g=x+K+1,U=R[g],d=a/2,v=v||g<0||R[g+1]!=null,v=A<4?(U!=null||v)&&(A==0||A==(P.s<0?3:2)):U>d||U==d&&(A==4||v||A==6&&R[g-1]&1||A==(P.s<0?8:7)),g<1||!R[0])l=v?oe(f.charAt(1),-K,f.charAt(0)):f.charAt(0);else{if(R.length=g,v)for(--a;++R[--g]>a;)R[g]=0,g||(++x,R=[1].concat(R));for(d=R.length;!R[--d];);for(U=0,l="";U<=d;l+=f.charAt(R[U++]));l=oe(l,x,f.charAt(0))}return l}}(),e=function(){function s(m,a,p){var w,f,g,x,d=0,v=m.length,P=a%ce,R=a/ce|0;for(m=m.slice();v--;)g=m[v]%ce,x=m[v]/ce|0,w=R*g+x*P,f=P*g+w%ce*ce+d,d=(f/p|0)+(w/ce|0)+R*x,m[v]=f%p;return d&&(m=[d].concat(m)),m}function o(m,a,p,w){var f,g;if(p!=w)g=p>w?1:-1;else for(f=g=0;f<p;f++)if(m[f]!=a[f]){g=m[f]>a[f]?1:-1;break}return g}function l(m,a,p,w){for(var f=0;p--;)m[p]-=f,f=m[p]<a[p]?1:0,m[p]=f*w+m[p]-a[p];for(;!m[0]&&m.length>1;m.splice(0,1));}return function(m,a,p,w,f){var g,x,d,v,P,R,I,U,K,A,B,Y,Ie,Xe,Ye,se,Se,te=m.s==a.s?1:-1,Z=m.c,z=a.c;if(!Z||!Z[0]||!z||!z[0])return new S(!m.s||!a.s||(Z?z&&Z[0]==z[0]:!z)?NaN:Z&&Z[0]==0||!z?te*0:te/0);for(U=new S(te),K=U.c=[],x=m.e-a.e,te=p+x+1,f||(f=ne,x=Q(m.e/C)-Q(a.e/C),te=te/C|0),d=0;z[d]==(Z[d]||0);d++);if(z[d]>(Z[d]||0)&&x--,te<0)K.push(1),v=!0;else{for(Xe=Z.length,se=z.length,d=0,te+=2,P=J(f/(z[0]+1)),P>1&&(z=s(z,P,f),Z=s(Z,P,f),se=z.length,Xe=Z.length),Ie=se,A=Z.slice(0,se),B=A.length;B<se;A[B++]=0);Se=z.slice(),Se=[0].concat(Se),Ye=z[0],z[1]>=f/2&&Ye++;do{if(P=0,g=o(z,A,se,B),g<0){if(Y=A[0],se!=B&&(Y=Y*f+(A[1]||0)),P=J(Y/Ye),P>1)for(P>=f&&(P=f-1),R=s(z,P,f),I=R.length,B=A.length;o(R,A,I,B)==1;)P--,l(R,se<I?Se:z,I,f),I=R.length,g=1;else P==0&&(g=P=1),R=z.slice(),I=R.length;if(I<B&&(R=[0].concat(R)),l(A,R,B,f),B=A.length,g==-1)for(;o(z,A,se,B)<1;)P++,l(A,se<B?Se:z,B,f),B=A.length}else g===0&&(P++,A=[0]);K[d++]=P,A[0]?A[B++]=Z[Ie]||0:(A=[Z[Ie]],B=1)}while((Ie++<Xe||A[0]!=null)&&te--);v=A[0]!=null,K[0]||K.splice(0,1)}if(f==ne){for(d=1,te=K[0];te>=10;te/=10,d++);V(U,p+(U.e=d+x*C-1)+1,w,v)}else U.e=x,U.r=+v;return U}}();function k(s,o,l,m){var a,p,w,f,g;if(l==null?l=c:q(l,0,8),!s.c)return s.toString();if(a=s.c[0],w=s.e,o==null)g=ee(s.c),g=m==1||m==2&&(w<=E||w>=h)?Le(g,w):oe(g,w,"0");else if(s=V(new S(s),o,l),p=s.e,g=ee(s.c),f=g.length,m==1||m==2&&(o<=p||p<=E)){for(;f<o;g+="0",f++);g=Le(g,p)}else if(o-=w,g=oe(g,p,"0"),p+1>f){if(--o>0)for(g+=".";o--;g+="0");}else if(o+=p-f,o>0)for(p+1==f&&(g+=".");o--;g+="0");return s.s<0&&a?"-"+g:g}function $(s,o){for(var l,m,a=1,p=new S(s[0]);a<s.length;a++)m=new S(s[a]),(!m.s||(l=he(p,m))===o||l===0&&p.s===o)&&(p=m);return p}function D(s,o,l){for(var m=1,a=o.length;!o[--a];o.pop());for(a=o[0];a>=10;a/=10,m++);return(l=m+l*C-1)>_?s.c=s.e=null:l<b?s.c=[s.e=0]:(s.e=l,s.c=o),s}i=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,o=/^([^.]+)\.$/,l=/^\.([^.]+)$/,m=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(p,w,f,g){var x,d=f?w:w.replace(a,"");if(m.test(d))p.s=isNaN(d)?null:d<0?-1:1;else{if(!f&&(d=d.replace(s,function(v,P,R){return x=(R=R.toLowerCase())=="x"?16:R=="b"?2:8,!g||g==x?P:v}),g&&(x=g,d=d.replace(o,"$1").replace(l,"0.$1")),w!=d))return new S(d,x);if(S.DEBUG)throw Error(j+"Not a"+(g?" base "+g:"")+" number: "+w);p.s=null}p.c=p.e=null}}();function V(s,o,l,m){var a,p,w,f,g,x,d,v=s.c,P=Ge;if(v){e:{for(a=1,f=v[0];f>=10;f/=10,a++);if(p=o-a,p<0)p+=C,w=o,g=v[x=0],d=J(g/P[a-w-1]%10);else if(x=Be((p+1)/C),x>=v.length)if(m){for(;v.length<=x;v.push(0));g=d=0,a=1,p%=C,w=p-C+1}else break e;else{for(g=f=v[x],a=1;f>=10;f/=10,a++);p%=C,w=p-C+a,d=w<0?0:J(g/P[a-w-1]%10)}if(m=m||o<0||v[x+1]!=null||(w<0?g:g%P[a-w-1]),m=l<4?(d||m)&&(l==0||l==(s.s<0?3:2)):d>5||d==5&&(l==4||m||l==6&&(p>0?w>0?g/P[a-w]:0:v[x-1])%10&1||l==(s.s<0?8:7)),o<1||!v[0])return v.length=0,m?(o-=s.e+1,v[0]=P[(C-o%C)%C],s.e=-o||0):v[0]=s.e=0,s;if(p==0?(v.length=x,f=1,x--):(v.length=x+1,f=P[C-p],v[x]=w>0?J(g/P[a-w]%P[w])*f:0),m)for(;;)if(x==0){for(p=1,w=v[0];w>=10;w/=10,p++);for(w=v[0]+=f,f=1;w>=10;w/=10,f++);p!=f&&(s.e++,v[0]==ne&&(v[0]=1));break}else{if(v[x]+=f,v[x]!=ne)break;v[x--]=0,f=1}for(p=v.length;v[--p]===0;v.pop());}s.e>_?s.c=s.e=null:s.e<b&&(s.c=[s.e=0])}return s}function ue(s){var o,l=s.e;return l===null?s.toString():(o=ee(s.c),o=l<=E||l>=h?Le(o,l):oe(o,l,"0"),s.s<0?"-"+o:o)}return r.absoluteValue=r.abs=function(){var s=new S(this);return s.s<0&&(s.s=1),s},r.comparedTo=function(s,o){return he(this,new S(s,o))},r.decimalPlaces=r.dp=function(s,o){var l,m,a,p=this;if(s!=null)return q(s,0,W),o==null?o=c:q(o,0,8),V(new S(p),s+p.e+1,o);if(!(l=p.c))return null;if(m=((a=l.length-1)-Q(this.e/C))*C,a=l[a])for(;a%10==0;a/=10,m--);return m<0&&(m=0),m},r.dividedBy=r.div=function(s,o){return e(this,new S(s,o),y,c)},r.dividedToIntegerBy=r.idiv=function(s,o){return e(this,new S(s,o),0,1)},r.exponentiatedBy=r.pow=function(s,o){var l,m,a,p,w,f,g,x,d,v=this;if(s=new S(s),s.c&&!s.isInteger())throw Error(j+"Exponent not an integer: "+ue(s));if(o!=null&&(o=new S(o)),f=s.e>14,!v.c||!v.c[0]||v.c[0]==1&&!v.e&&v.c.length==1||!s.c||!s.c[0])return d=new S(Math.pow(+ue(v),f?s.s*(2-be(s)):+ue(s))),o?d.mod(o):d;if(g=s.s<0,o){if(o.c?!o.c[0]:!o.s)return new S(NaN);m=!g&&v.isInteger()&&o.isInteger(),m&&(v=v.mod(o))}else{if(s.e>9&&(v.e>0||v.e<-1||(v.e==0?v.c[0]>1||f&&v.c[1]>=24e7:v.c[0]<8e13||f&&v.c[0]<=9999975e7)))return p=v.s<0&&be(s)?-0:0,v.e>-1&&(p=1/p),new S(g?1/p:p);G&&(p=Be(G/C+2))}for(f?(l=new S(.5),g&&(s.s=1),x=be(s)):(a=Math.abs(+ue(s)),x=a%2),d=new S(u);;){if(x){if(d=d.times(v),!d.c)break;p?d.c.length>p&&(d.c.length=p):m&&(d=d.mod(o))}if(a){if(a=J(a/2),a===0)break;x=a%2}else if(s=s.times(l),V(s,s.e+1,1),s.e>14)x=be(s);else{if(a=+ue(s),a===0)break;x=a%2}v=v.times(v),p?v.c&&v.c.length>p&&(v.c.length=p):m&&(v=v.mod(o))}return m?d:(g&&(d=u.div(d)),o?d.mod(o):p?V(d,G,c,w):d)},r.integerValue=function(s){var o=new S(this);return s==null?s=c:q(s,0,8),V(o,o.e+1,s)},r.isEqualTo=r.eq=function(s,o){return he(this,new S(s,o))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(s,o){return he(this,new S(s,o))>0},r.isGreaterThanOrEqualTo=r.gte=function(s,o){return(o=he(this,new S(s,o)))===1||o===0},r.isInteger=function(){return!!this.c&&Q(this.e/C)>this.c.length-2},r.isLessThan=r.lt=function(s,o){return he(this,new S(s,o))<0},r.isLessThanOrEqualTo=r.lte=function(s,o){return(o=he(this,new S(s,o)))===-1||o===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(s,o){var l,m,a,p,w=this,f=w.s;if(s=new S(s,o),o=s.s,!f||!o)return new S(NaN);if(f!=o)return s.s=-o,w.plus(s);var g=w.e/C,x=s.e/C,d=w.c,v=s.c;if(!g||!x){if(!d||!v)return d?(s.s=-o,s):new S(v?w:NaN);if(!d[0]||!v[0])return v[0]?(s.s=-o,s):new S(d[0]?w:c==3?-0:0)}if(g=Q(g),x=Q(x),d=d.slice(),f=g-x){for((p=f<0)?(f=-f,a=d):(x=g,a=v),a.reverse(),o=f;o--;a.push(0));a.reverse()}else for(m=(p=(f=d.length)<(o=v.length))?f:o,f=o=0;o<m;o++)if(d[o]!=v[o]){p=d[o]<v[o];break}if(p&&(a=d,d=v,v=a,s.s=-s.s),o=(m=v.length)-(l=d.length),o>0)for(;o--;d[l++]=0);for(o=ne-1;m>f;){if(d[--m]<v[m]){for(l=m;l&&!d[--l];d[l]=o);--d[l],d[m]+=ne}d[m]-=v[m]}for(;d[0]==0;d.splice(0,1),--x);return d[0]?D(s,d,x):(s.s=c==3?-1:1,s.c=[s.e=0],s)},r.modulo=r.mod=function(s,o){var l,m,a=this;return s=new S(s,o),!a.c||!s.s||s.c&&!s.c[0]?new S(NaN):!s.c||a.c&&!a.c[0]?new S(a):(O==9?(m=s.s,s.s=1,l=e(a,s,0,3),s.s=m,l.s*=m):l=e(a,s,0,O),s=a.minus(l.times(s)),!s.c[0]&&O==1&&(s.s=a.s),s)},r.multipliedBy=r.times=function(s,o){var l,m,a,p,w,f,g,x,d,v,P,R,I,U,K,A=this,B=A.c,Y=(s=new S(s,o)).c;if(!B||!Y||!B[0]||!Y[0])return!A.s||!s.s||B&&!B[0]&&!Y||Y&&!Y[0]&&!B?s.c=s.e=s.s=null:(s.s*=A.s,!B||!Y?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(m=Q(A.e/C)+Q(s.e/C),s.s*=A.s,g=B.length,v=Y.length,g<v&&(I=B,B=Y,Y=I,a=g,g=v,v=a),a=g+v,I=[];a--;I.push(0));for(U=ne,K=ce,a=v;--a>=0;){for(l=0,P=Y[a]%K,R=Y[a]/K|0,w=g,p=a+w;p>a;)x=B[--w]%K,d=B[w]/K|0,f=R*x+d*P,x=P*x+f%K*K+I[p]+l,l=(x/U|0)+(f/K|0)+R*d,I[p--]=x%U;I[p]=l}return l?++m:I.splice(0,1),D(s,I,m)},r.negated=function(){var s=new S(this);return s.s=-s.s||null,s},r.plus=function(s,o){var l,m=this,a=m.s;if(s=new S(s,o),o=s.s,!a||!o)return new S(NaN);if(a!=o)return s.s=-o,m.minus(s);var p=m.e/C,w=s.e/C,f=m.c,g=s.c;if(!p||!w){if(!f||!g)return new S(a/0);if(!f[0]||!g[0])return g[0]?s:new S(f[0]?m:a*0)}if(p=Q(p),w=Q(w),f=f.slice(),a=p-w){for(a>0?(w=p,l=g):(a=-a,l=f),l.reverse();a--;l.push(0));l.reverse()}for(a=f.length,o=g.length,a-o<0&&(l=g,g=f,f=l,o=a),a=0;o;)a=(f[--o]=f[o]+g[o]+a)/ne|0,f[o]=ne===f[o]?0:f[o]%ne;return a&&(f=[a].concat(f),++w),D(s,f,w)},r.precision=r.sd=function(s,o){var l,m,a,p=this;if(s!=null&&s!==!!s)return q(s,1,W),o==null?o=c:q(o,0,8),V(new S(p),s,o);if(!(l=p.c))return null;if(a=l.length-1,m=a*C+1,a=l[a]){for(;a%10==0;a/=10,m--);for(a=l[0];a>=10;a/=10,m++);}return s&&p.e+1>m&&(m=p.e+1),m},r.shiftedBy=function(s){return q(s,-9007199254740991,He),this.times("1e"+s)},r.squareRoot=r.sqrt=function(){var s,o,l,m,a,p=this,w=p.c,f=p.s,g=p.e,x=y+4,d=new S("0.5");if(f!==1||!w||!w[0])return new S(!f||f<0&&(!w||w[0])?NaN:w?p:1/0);if(f=Math.sqrt(+ue(p)),f==0||f==1/0?(o=ee(w),(o.length+g)%2==0&&(o+="0"),f=Math.sqrt(+o),g=Q((g+1)/2)-(g<0||g%2),f==1/0?o="5e"+g:(o=f.toExponential(),o=o.slice(0,o.indexOf("e")+1)+g),l=new S(o)):l=new S(f+""),l.c[0]){for(g=l.e,f=g+x,f<3&&(f=0);;)if(a=l,l=d.times(a.plus(e(p,a,x,1))),ee(a.c).slice(0,f)===(o=ee(l.c)).slice(0,f))if(l.e<g&&--f,o=o.slice(f-3,f+1),o=="9999"||!m&&o=="4999"){if(!m&&(V(a,a.e+y+2,0),a.times(a).eq(p))){l=a;break}x+=4,f+=4,m=1}else{(!+o||!+o.slice(1)&&o.charAt(0)=="5")&&(V(l,l.e+y+2,1),s=!l.times(l).eq(p));break}}return V(l,l.e+y+1,c,s)},r.toExponential=function(s,o){return s!=null&&(q(s,0,W),s++),k(this,s,o,1)},r.toFixed=function(s,o){return s!=null&&(q(s,0,W),s=s+this.e+1),k(this,s,o)},r.toFormat=function(s,o,l){var m,a=this;if(l==null)s!=null&&o&&typeof o=="object"?(l=o,o=null):s&&typeof s=="object"?(l=s,s=o=null):l=F;else if(typeof l!="object")throw Error(j+"Argument not an object: "+l);if(m=a.toFixed(s,o),a.c){var p,w=m.split("."),f=+l.groupSize,g=+l.secondaryGroupSize,x=l.groupSeparator||"",d=w[0],v=w[1],P=a.s<0,R=P?d.slice(1):d,I=R.length;if(g&&(p=f,f=g,g=p,I-=p),f>0&&I>0){for(p=I%f||f,d=R.substr(0,p);p<I;p+=f)d+=x+R.substr(p,f);g>0&&(d+=x+R.slice(p)),P&&(d="-"+d)}m=v?d+(l.decimalSeparator||"")+((g=+l.fractionGroupSize)?v.replace(new RegExp("\\d{"+g+"}\\B","g"),"$&"+(l.fractionGroupSeparator||"")):v):d}return(l.prefix||"")+m+(l.suffix||"")},r.toFraction=function(s){var o,l,m,a,p,w,f,g,x,d,v,P,R=this,I=R.c;if(s!=null&&(f=new S(s),!f.isInteger()&&(f.c||f.s!==1)||f.lt(u)))throw Error(j+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+ue(f));if(!I)return new S(R);for(o=new S(u),x=l=new S(u),m=g=new S(u),P=ee(I),p=o.e=P.length-R.e-1,o.c[0]=Ge[(w=p%C)<0?C+w:w],s=!s||f.comparedTo(o)>0?p>0?o:x:f,w=_,_=1/0,f=new S(P),g.c[0]=0;d=e(f,o,0,1),a=l.plus(d.times(m)),a.comparedTo(s)!=1;)l=m,m=a,x=g.plus(d.times(a=x)),g=a,o=f.minus(d.times(a=o)),f=a;return a=e(s.minus(l),m,0,1),g=g.plus(a.times(x)),l=l.plus(a.times(m)),g.s=x.s=R.s,p=p*2,v=e(x,m,p,c).minus(R).abs().comparedTo(e(g,l,p,c).minus(R).abs())<1?[x,m]:[g,l],_=w,v},r.toNumber=function(){return+ue(this)},r.toPrecision=function(s,o){return s!=null&&q(s,1,W),k(this,s,o,2)},r.toString=function(s){var o,l=this,m=l.s,a=l.e;return a===null?m?(o="Infinity",m<0&&(o="-"+o)):o="NaN":(s==null?o=a<=E||a>=h?Le(ee(l.c),a):oe(ee(l.c),a,"0"):s===10&&N?(l=V(new S(l),y+a+1,c),o=oe(ee(l.c),l.e,"0")):(q(s,2,L.length,"Base"),o=t(oe(ee(l.c),a,"0"),10,s,m,!0)),m<0&&l.c[0]&&(o="-"+o)),o},r.valueOf=r.toJSON=function(){return ue(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,n!=null&&S.set(n),S}function Q(n){var e=n|0;return n>0||n===e?e:e-1}function ee(n){for(var e,t,i=1,r=n.length,u=n[0]+"";i<r;){for(e=n[i++]+"",t=C-e.length;t--;e="0"+e);u+=e}for(r=u.length;u.charCodeAt(--r)===48;);return u.slice(0,r+1||1)}function he(n,e){var t,i,r=n.c,u=e.c,y=n.s,c=e.s,E=n.e,h=e.e;if(!y||!c)return null;if(t=r&&!r[0],i=u&&!u[0],t||i)return t?i?0:-c:y;if(y!=c)return y;if(t=y<0,i=E==h,!r||!u)return i?0:!r^t?1:-1;if(!i)return E>h^t?1:-1;for(c=(E=r.length)<(h=u.length)?E:h,y=0;y<c;y++)if(r[y]!=u[y])return r[y]>u[y]^t?1:-1;return E==h?0:E>h^t?1:-1}function q(n,e,t,i){if(n<e||n>t||n!==J(n))throw Error(j+(i||"Argument")+(typeof n=="number"?n<e||n>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function be(n){var e=n.c.length-1;return Q(n.e/C)==e&&n.c[e]%2!=0}function Le(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function oe(n,e,t){var i,r;if(e<0){for(r=t+".";++e;r+=t);n=r+n}else if(i=n.length,++e>i){for(r=t,e-=i;--e;r+=t);n+=r}else e<i&&(n=n.slice(0,e)+"."+n.slice(e));return n}var ie=Je(),Mt=class{constructor(n){M(this,"key");M(this,"left",null);M(this,"right",null);this.key=n}},me=class extends Mt{constructor(n){super(n)}},Pt=class{constructor(){M(this,"size",0);M(this,"modificationCount",0);M(this,"splayCount",0)}splay(n){const e=this.root;if(e==null)return this.compare(n,n),-1;let t=null,i=null,r=null,u=null,y=e;const c=this.compare;let E;for(;;)if(E=c(y.key,n),E>0){let h=y.left;if(h==null||(E=c(h.key,n),E>0&&(y.left=h.right,h.right=y,y=h,h=y.left,h==null)))break;t==null?i=y:t.left=y,t=y,y=h}else if(E<0){let h=y.right;if(h==null||(E=c(h.key,n),E<0&&(y.right=h.left,h.left=y,y=h,h=y.right,h==null)))break;r==null?u=y:r.right=y,r=y,y=h}else break;return r!=null&&(r.right=y.left,y.left=u),t!=null&&(t.left=y.right,y.right=i),this.root!==y&&(this.root=y,this.splayCount++),E}splayMin(n){let e=n,t=e.left;for(;t!=null;){const i=t;e.left=i.right,i.right=e,e=i,t=e.left}return e}splayMax(n){let e=n,t=e.right;for(;t!=null;){const i=t;e.right=i.left,i.left=e,e=i,t=e.right}return e}_delete(n){if(this.root==null||this.splay(n)!=0)return null;let t=this.root;const i=t,r=t.left;if(this.size--,r==null)this.root=t.right;else{const u=t.right;t=this.splayMax(r),t.right=u,this.root=t}return this.modificationCount++,i}addNewRoot(n,e){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=n;return}e<0?(n.left=t,n.right=t.right,t.right=null):(n.right=t,n.left=t.left,t.left=null),this.root=n}_first(){const n=this.root;return n==null?null:(this.root=this.splayMin(n),this.root)}_last(){const n=this.root;return n==null?null:(this.root=this.splayMax(n),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(n){return this.validKey(n)&&this.splay(n)==0}defaultCompare(){return(n,e)=>n<e?-1:n>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:n=>{this.root=n},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:n=>{this.splayCount=n},splay:n=>this.splay(n),has:n=>this.has(n)}}},Te=class _e extends Pt{constructor(t,i){super();M(this,"root",null);M(this,"compare");M(this,"validKey");M(this,_t,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=i??(r=>r!=null&&r!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const i of t)this.delete(i)}forEach(t){const i=this[Symbol.iterator]();let r;for(;r=i.next(),!r.done;)t(r.value,r.value,this)}add(t){const i=this.splay(t);return i!=0&&this.addNewRoot(new me(t),i),this}addAndReturn(t){const i=this.splay(t);return i!=0&&this.addNewRoot(new me(t),i),this.root.key}addAll(t){for(const i of t)this.add(i)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let r=this.root.left;if(r==null)return null;let u=r.right;for(;u!=null;)r=u,u=r.right;return r.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let r=this.root.right;if(r==null)return null;let u=r.left;for(;u!=null;)r=u,u=r.left;return r.key}retainAll(t){const i=new _e(this.compare,this.validKey),r=this.modificationCount;for(const u of t){if(r!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(u)&&this.splay(u)==0&&i.add(this.root.key)}i.size!=this.size&&(this.root=i.root,this.size=i.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const i=new _e(this.compare,this.validKey);for(const r of this)t.has(r)&&i.add(r);return i}difference(t){const i=new _e(this.compare,this.validKey);for(const r of this)t.has(r)||i.add(r);return i}union(t){const i=this.clone();return i.addAll(t),i}clone(){const t=new _e(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function i(u,y){let c,E;do{if(c=u.left,E=u.right,c!=null){const h=new me(c.key);y.left=h,i(c,h)}if(E!=null){const h=new me(E.key);y.right=h,u=E,y=h}}while(E!=null)}const r=new me(t.key);return i(t,r),r}toSet(){return this.clone()}entries(){return new Ct(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(bt=Symbol.iterator,_t=Symbol.toStringTag,bt)](){return new Rt(this.wrap())}},Qe=class{constructor(n){M(this,"tree");M(this,"path",new Array);M(this,"modificationCount",null);M(this,"splayCount");this.tree=n,this.splayCount=n.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const n=this.path[this.path.length-1];return this.getValue(n)}rebuildPath(n){this.path.splice(0,this.path.length),this.tree.splay(n),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(n){for(;n!=null;)this.path.push(n),n=n.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let n=this.path[this.path.length-1],e=n.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===n;)n=this.path.pop();return this.path.length>0}},Rt=class extends Qe{getValue(n){return n.key}},Ct=class extends Qe{getValue(n){return[n.key,n.key]}},et=n=>()=>n,$e=n=>{const e=n?(t,i)=>i.minus(t).abs().isLessThanOrEqualTo(n):et(!1);return(t,i)=>e(t,i)?0:t.comparedTo(i)};function Ot(n){const e=n?(t,i,r,u,y)=>t.exponentiatedBy(2).isLessThanOrEqualTo(u.minus(i).exponentiatedBy(2).plus(y.minus(r).exponentiatedBy(2)).times(n)):et(!1);return(t,i,r)=>{const u=t.x,y=t.y,c=r.x,E=r.y,h=y.minus(E).times(i.x.minus(c)).minus(u.minus(c).times(i.y.minus(E)));return e(h,u,y,c,E)?0:h.comparedTo(0)}}var Nt=n=>n,At=n=>{if(n){const e=new Te($e(n)),t=new Te($e(n)),i=(u,y)=>y.addAndReturn(u),r=u=>({x:i(u.x,e),y:i(u.y,t)});return r({x:new ie(0),y:new ie(0)}),r}return Nt},qe=n=>({set:e=>{le=qe(e)},reset:()=>qe(n),compare:$e(n),snap:At(n),orient:Ot(n)}),le=qe(),xe=(n,e)=>n.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(n.ur.x)&&n.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(n.ur.y),De=(n,e)=>{if(e.ur.x.isLessThan(n.ll.x)||n.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(n.ll.y)||n.ur.y.isLessThan(e.ll.y))return null;const t=n.ll.x.isLessThan(e.ll.x)?e.ll.x:n.ll.x,i=n.ur.x.isLessThan(e.ur.x)?n.ur.x:e.ur.x,r=n.ll.y.isLessThan(e.ll.y)?e.ll.y:n.ll.y,u=n.ur.y.isLessThan(e.ur.y)?n.ur.y:e.ur.y;return{ll:{x:t,y:r},ur:{x:i,y:u}}},Me=(n,e)=>n.x.times(e.y).minus(n.y.times(e.x)),tt=(n,e)=>n.x.times(e.x).plus(n.y.times(e.y)),Pe=n=>tt(n,n).sqrt(),It=(n,e,t)=>{const i={x:e.x.minus(n.x),y:e.y.minus(n.y)},r={x:t.x.minus(n.x),y:t.y.minus(n.y)};return Me(r,i).div(Pe(r)).div(Pe(i))},kt=(n,e,t)=>{const i={x:e.x.minus(n.x),y:e.y.minus(n.y)},r={x:t.x.minus(n.x),y:t.y.minus(n.y)};return tt(r,i).div(Pe(r)).div(Pe(i))},nt=(n,e,t)=>e.y.isZero()?null:{x:n.x.plus(e.x.div(e.y).times(t.minus(n.y))),y:t},it=(n,e,t)=>e.x.isZero()?null:{x:t,y:n.y.plus(e.y.div(e.x).times(t.minus(n.x)))},Bt=(n,e,t,i)=>{if(e.x.isZero())return it(t,i,n.x);if(i.x.isZero())return it(n,e,t.x);if(e.y.isZero())return nt(t,i,n.y);if(i.y.isZero())return nt(n,e,t.y);const r=Me(e,i);if(r.isZero())return null;const u={x:t.x.minus(n.x),y:t.y.minus(n.y)},y=Me(u,e).div(r),c=Me(u,i).div(r),E=n.x.plus(c.times(e.x)),h=t.x.plus(y.times(i.x)),b=n.y.plus(c.times(e.y)),_=t.y.plus(y.times(i.y)),T=E.plus(h).div(2),O=b.plus(_).div(2);return{x:T,y:O}},re=class Lt{constructor(e,t){M(this,"point");M(this,"isLeft");M(this,"segment");M(this,"otherSE");M(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}static compare(e,t){const i=Lt.comparePoints(e.point,t.point);return i!==0?i:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:Ce.compare(e.segment,t.segment))}static comparePoints(e,t){return e.x.isLessThan(t.x)?-1:e.x.isGreaterThan(t.x)?1:e.y.isLessThan(t.y)?-1:e.y.isGreaterThan(t.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const t=e.point.events;for(let i=0,r=t.length;i<r;i++){const u=t[i];this.point.events.push(u),u.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let t=0;t<e;t++){const i=this.point.events[t];if(i.segment.consumedBy===void 0)for(let r=t+1;r<e;r++){const u=this.point.events[r];u.consumedBy===void 0&&i.otherSE.point.events===u.otherSE.point.events&&i.segment.consume(u.segment)}}}getAvailableLinkedEvents(){const e=[];for(let t=0,i=this.point.events.length;t<i;t++){const r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}getLeftmostComparator(e){const t=new Map,i=r=>{const u=r.otherSE;t.set(r,{sine:It(this.point,e.point,u.point),cosine:kt(this.point,e.point,u.point)})};return(r,u)=>{t.has(r)||i(r),t.has(u)||i(u);const{sine:y,cosine:c}=t.get(r),{sine:E,cosine:h}=t.get(u);return y.isGreaterThanOrEqualTo(0)&&E.isGreaterThanOrEqualTo(0)?c.isLessThan(h)?1:c.isGreaterThan(h)?-1:0:y.isLessThan(0)&&E.isLessThan(0)?c.isLessThan(h)?-1:c.isGreaterThan(h)?1:0:E.isLessThan(y)?-1:E.isGreaterThan(y)?1:0}}},Gt=class Ze{constructor(e){M(this,"events");M(this,"poly");M(this,"_isExteriorRing");M(this,"_enclosingRing");this.events=e;for(let t=0,i=e.length;t<i;t++)e[t].segment.ringOut=this;this.poly=null}static factory(e){const t=[];for(let i=0,r=e.length;i<r;i++){const u=e[i];if(!u.isInResult()||u.ringOut)continue;let y=null,c=u.leftSE,E=u.rightSE;const h=[c],b=c.point,_=[];for(;y=c,c=E,h.push(c),c.point!==b;)for(;;){const T=c.getAvailableLinkedEvents();if(T.length===0){const F=h[0].point,L=h[h.length-1].point;throw new Error(`Unable to complete output ring starting at [${F.x}, ${F.y}]. Last matching segment found ends at [${L.x}, ${L.y}].`)}if(T.length===1){E=T[0].otherSE;break}let O=null;for(let F=0,L=_.length;F<L;F++)if(_[F].point===c.point){O=F;break}if(O!==null){const F=_.splice(O)[0],L=h.splice(F.index);L.unshift(L[0].otherSE),t.push(new Ze(L.reverse()));continue}_.push({index:h.length,point:c.point});const G=c.getLeftmostComparator(y);E=T.sort(G)[0].otherSE;break}t.push(new Ze(h))}return t}getGeom(){let e=this.events[0].point;const t=[e];for(let h=1,b=this.events.length-1;h<b;h++){const _=this.events[h].point,T=this.events[h+1].point;le.orient(_,e,T)!==0&&(t.push(_),e=_)}if(t.length===1)return null;const i=t[0],r=t[1];le.orient(i,e,r)===0&&t.shift(),t.push(t[0]);const u=this.isExteriorRing()?1:-1,y=this.isExteriorRing()?0:t.length-1,c=this.isExteriorRing()?t.length:-1,E=[];for(let h=y;h!=c;h+=u)E.push([t[h].x.toNumber(),t[h].y.toNumber()]);return E}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var r,u;let e=this.events[0];for(let y=1,c=this.events.length;y<c;y++){const E=this.events[y];re.compare(e,E)>0&&(e=E)}let t=e.segment.prevInResult(),i=t?t.prevInResult():null;for(;;){if(!t)return null;if(!i)return t.ringOut;if(i.ringOut!==t.ringOut)return((r=i.ringOut)==null?void 0:r.enclosingRing())!==t.ringOut?t.ringOut:(u=t.ringOut)==null?void 0:u.enclosingRing();t=i.prevInResult(),i=t?t.prevInResult():null}}},rt=class{constructor(n){M(this,"exteriorRing");M(this,"interiorRings");this.exteriorRing=n,n.poly=this,this.interiorRings=[]}addInterior(n){this.interiorRings.push(n),n.poly=this}getGeom(){const n=this.exteriorRing.getGeom();if(n===null)return null;const e=[n];for(let t=0,i=this.interiorRings.length;t<i;t++){const r=this.interiorRings[t].getGeom();r!==null&&e.push(r)}return e}},$t=class{constructor(n){M(this,"rings");M(this,"polys");this.rings=n,this.polys=this._composePolys(n)}getGeom(){const n=[];for(let e=0,t=this.polys.length;e<t;e++){const i=this.polys[e].getGeom();i!==null&&n.push(i)}return n}_composePolys(n){var t;const e=[];for(let i=0,r=n.length;i<r;i++){const u=n[i];if(!u.poly)if(u.isExteriorRing())e.push(new rt(u));else{const y=u.enclosingRing();y!=null&&y.poly||e.push(new rt(y)),(t=y==null?void 0:y.poly)==null||t.addInterior(u)}}return e}},qt=class{constructor(n,e=Ce.compare){M(this,"queue");M(this,"tree");M(this,"segments");this.queue=n,this.tree=new Te(e),this.segments=[]}process(n){const e=n.segment,t=[];if(n.consumedBy)return n.isLeft?this.queue.delete(n.otherSE):this.tree.delete(e),t;n.isLeft&&this.tree.add(e);let i=e,r=e;do i=this.tree.lastBefore(i);while(i!=null&&i.consumedBy!=null);do r=this.tree.firstAfter(r);while(r!=null&&r.consumedBy!=null);if(n.isLeft){let u=null;if(i){const c=i.getIntersection(e);if(c!==null&&(e.isAnEndpoint(c)||(u=c),!i.isAnEndpoint(c))){const E=this._splitSafely(i,c);for(let h=0,b=E.length;h<b;h++)t.push(E[h])}}let y=null;if(r){const c=r.getIntersection(e);if(c!==null&&(e.isAnEndpoint(c)||(y=c),!r.isAnEndpoint(c))){const E=this._splitSafely(r,c);for(let h=0,b=E.length;h<b;h++)t.push(E[h])}}if(u!==null||y!==null){let c=null;u===null?c=y:y===null?c=u:c=re.comparePoints(u,y)<=0?u:y,this.queue.delete(e.rightSE),t.push(e.rightSE);const E=e.split(c);for(let h=0,b=E.length;h<b;h++)t.push(E[h])}t.length>0?(this.tree.delete(e),t.push(n)):(this.segments.push(e),e.prev=i)}else{if(i&&r){const u=i.getIntersection(r);if(u!==null){if(!i.isAnEndpoint(u)){const y=this._splitSafely(i,u);for(let c=0,E=y.length;c<E;c++)t.push(y[c])}if(!r.isAnEndpoint(u)){const y=this._splitSafely(r,u);for(let c=0,E=y.length;c<E;c++)t.push(y[c])}}}this.tree.delete(e)}return t}_splitSafely(n,e){this.tree.delete(n);const t=n.rightSE;this.queue.delete(t);const i=n.split(e);return i.push(t),n.consumedBy===void 0&&this.tree.add(n),i}},Dt=class{constructor(){M(this,"type");M(this,"numMultiPolys")}run(n,e,t){we.type=n;const i=[new ot(e,!0)];for(let h=0,b=t.length;h<b;h++)i.push(new ot(t[h],!1));if(we.numMultiPolys=i.length,we.type==="difference"){const h=i[0];let b=1;for(;b<i.length;)De(i[b].bbox,h.bbox)!==null?b++:i.splice(b,1)}if(we.type==="intersection")for(let h=0,b=i.length;h<b;h++){const _=i[h];for(let T=h+1,O=i.length;T<O;T++)if(De(_.bbox,i[T].bbox)===null)return[]}const r=new Te(re.compare);for(let h=0,b=i.length;h<b;h++){const _=i[h].getSweepEvents();for(let T=0,O=_.length;T<O;T++)r.add(_[T])}const u=new qt(r);let y=null;for(r.size!=0&&(y=r.first(),r.delete(y));y;){const h=u.process(y);for(let b=0,_=h.length;b<_;b++){const T=h[b];T.consumedBy===void 0&&r.add(T)}r.size!=0?(y=r.first(),r.delete(y)):y=null}le.reset();const c=Gt.factory(u.segments);return new $t(c).getGeom()}},we=new Dt,Re=we,Ut=0,Ce=class ke{constructor(e,t,i,r){M(this,"id");M(this,"leftSE");M(this,"rightSE");M(this,"rings");M(this,"windings");M(this,"ringOut");M(this,"consumedBy");M(this,"prev");M(this,"_prevInResult");M(this,"_beforeState");M(this,"_afterState");M(this,"_isInResult");this.id=++Ut,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=i,this.windings=r}static compare(e,t){const i=e.leftSE.point.x,r=t.leftSE.point.x,u=e.rightSE.point.x,y=t.rightSE.point.x;if(y.isLessThan(i))return 1;if(u.isLessThan(r))return-1;const c=e.leftSE.point.y,E=t.leftSE.point.y,h=e.rightSE.point.y,b=t.rightSE.point.y;if(i.isLessThan(r)){if(E.isLessThan(c)&&E.isLessThan(h))return 1;if(E.isGreaterThan(c)&&E.isGreaterThan(h))return-1;const _=e.comparePoint(t.leftSE.point);if(_<0)return 1;if(_>0)return-1;const T=t.comparePoint(e.rightSE.point);return T!==0?T:-1}if(i.isGreaterThan(r)){if(c.isLessThan(E)&&c.isLessThan(b))return-1;if(c.isGreaterThan(E)&&c.isGreaterThan(b))return 1;const _=t.comparePoint(e.leftSE.point);if(_!==0)return _;const T=e.comparePoint(t.rightSE.point);return T<0?1:T>0?-1:1}if(c.isLessThan(E))return-1;if(c.isGreaterThan(E))return 1;if(u.isLessThan(y)){const _=t.comparePoint(e.rightSE.point);if(_!==0)return _}if(u.isGreaterThan(y)){const _=e.comparePoint(t.rightSE.point);if(_<0)return 1;if(_>0)return-1}if(!u.eq(y)){const _=h.minus(c),T=u.minus(i),O=b.minus(E),G=y.minus(r);if(_.isGreaterThan(T)&&O.isLessThan(G))return 1;if(_.isLessThan(T)&&O.isGreaterThan(G))return-1}return u.isGreaterThan(y)?1:u.isLessThan(y)||h.isLessThan(b)?-1:h.isGreaterThan(b)?1:e.id<t.id?-1:e.id>t.id?1:0}static fromRing(e,t,i){let r,u,y;const c=re.comparePoints(e,t);if(c<0)r=e,u=t,y=1;else if(c>0)r=t,u=e,y=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const E=new re(r,!0),h=new re(u,!1);return new ke(E,h,[i],[y])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(t)?e:t},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(t)?e:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return le.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const t=this.bbox(),i=e.bbox(),r=De(t,i);if(r===null)return null;const u=this.leftSE.point,y=this.rightSE.point,c=e.leftSE.point,E=e.rightSE.point,h=xe(t,c)&&this.comparePoint(c)===0,b=xe(i,u)&&e.comparePoint(u)===0,_=xe(t,E)&&this.comparePoint(E)===0,T=xe(i,y)&&e.comparePoint(y)===0;if(b&&h)return T&&!_?y:!T&&_?E:null;if(b)return _&&u.x.eq(E.x)&&u.y.eq(E.y)?null:u;if(h)return T&&y.x.eq(c.x)&&y.y.eq(c.y)?null:c;if(T&&_)return null;if(T)return y;if(_)return E;const O=Bt(u,this.vector(),c,e.vector());return O===null||!xe(r,O)?null:le.snap(O)}split(e){const t=[],i=e.events!==void 0,r=new re(e,!0),u=new re(e,!1),y=this.rightSE;this.replaceRightSE(u),t.push(u),t.push(r);const c=new ke(r,y,this.rings.slice(),this.windings.slice());return re.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),re.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),u.checkForConsuming()),t}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,i=this.windings.length;t<i;t++)this.windings[t]*=-1}consume(e){let t=this,i=e;for(;t.consumedBy;)t=t.consumedBy;for(;i.consumedBy;)i=i.consumedBy;const r=ke.compare(t,i);if(r!==0){if(r>0){const u=t;t=i,i=u}if(t.prev===i){const u=t;t=i,i=u}for(let u=0,y=i.rings.length;u<y;u++){const c=i.rings[u],E=i.windings[u],h=t.rings.indexOf(c);h===-1?(t.rings.push(c),t.windings.push(E)):t.windings[h]+=E}i.rings=null,i.windings=null,i.consumedBy=t,i.leftSE.consumedBy=t.leftSE,i.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,i=this._afterState.windings,r=this._afterState.multiPolys;for(let c=0,E=this.rings.length;c<E;c++){const h=this.rings[c],b=this.windings[c],_=t.indexOf(h);_===-1?(t.push(h),i.push(b)):i[_]+=b}const u=[],y=[];for(let c=0,E=t.length;c<E;c++){if(i[c]===0)continue;const h=t[c],b=h.poly;if(y.indexOf(b)===-1)if(h.isExterior)u.push(b);else{y.indexOf(b)===-1&&y.push(b);const _=u.indexOf(h.poly);_!==-1&&u.splice(_,1)}}for(let c=0,E=u.length;c<E;c++){const h=u[c].multiPoly;r.indexOf(h)===-1&&r.push(h)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Re.type){case"union":{const i=e.length===0,r=t.length===0;this._isInResult=i!==r;break}case"intersection":{let i,r;e.length<t.length?(i=e.length,r=t.length):(i=t.length,r=e.length),this._isInResult=r===Re.numMultiPolys&&i<r;break}case"xor":{const i=Math.abs(e.length-t.length);this._isInResult=i%2===1;break}case"difference":{const i=r=>r.length===1&&r[0].isSubject;this._isInResult=i(e)!==i(t);break}}return this._isInResult}},st=class{constructor(n,e,t){M(this,"poly");M(this,"isExterior");M(this,"segments");M(this,"bbox");if(!Array.isArray(n)||n.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=t,this.segments=[],typeof n[0][0]!="number"||typeof n[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=le.snap({x:new ie(n[0][0]),y:new ie(n[0][1])});this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let r=i;for(let u=1,y=n.length;u<y;u++){if(typeof n[u][0]!="number"||typeof n[u][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const c=le.snap({x:new ie(n[u][0]),y:new ie(n[u][1])});c.x.eq(r.x)&&c.y.eq(r.y)||(this.segments.push(Ce.fromRing(r,c,this)),c.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=c.x),c.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=c.y),c.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=c.x),c.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=c.y),r=c)}(!i.x.eq(r.x)||!i.y.eq(r.y))&&this.segments.push(Ce.fromRing(r,i,this))}getSweepEvents(){const n=[];for(let e=0,t=this.segments.length;e<t;e++){const i=this.segments[e];n.push(i.leftSE),n.push(i.rightSE)}return n}},zt=class{constructor(n,e){M(this,"multiPoly");M(this,"exteriorRing");M(this,"interiorRings");M(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new st(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,i=n.length;t<i;t++){const r=new st(n[t],this,!1);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=e}getSweepEvents(){const n=this.exteriorRing.getSweepEvents();for(let e=0,t=this.interiorRings.length;e<t;e++){const i=this.interiorRings[e].getSweepEvents();for(let r=0,u=i.length;r<u;r++)n.push(i[r])}return n}},ot=class{constructor(n,e){M(this,"isSubject");M(this,"polys");M(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof n[0][0][0]=="number"&&(n=[n])}catch{}this.polys=[],this.bbox={ll:{x:new ie(Number.POSITIVE_INFINITY),y:new ie(Number.POSITIVE_INFINITY)},ur:{x:new ie(Number.NEGATIVE_INFINITY),y:new ie(Number.NEGATIVE_INFINITY)}};for(let t=0,i=n.length;t<i;t++){const r=new zt(n[t],this);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=e}getSweepEvents(){const n=[];for(let e=0,t=this.polys.length;e<t;e++){const i=this.polys[e].getSweepEvents();for(let r=0,u=i.length;r<u;r++)n.push(i[r])}return n}},Ft=(n,...e)=>Re.run("union",n,e),Vt=(n,...e)=>Re.run("difference",n,e);le.set;function lt(n,e,t){if(n!==null)for(var i,r,u,y,c,E,h,b=0,_=0,T,O=n.type,G=O==="FeatureCollection",F=O==="Feature",L=G?n.features.length:1,N=0;N<L;N++){h=G?n.features[N].geometry:F?n.geometry:n,T=h?h.type==="GeometryCollection":!1,c=T?h.geometries.length:1;for(var S=0;S<c;S++){var k=0,$=0;if(y=T?h.geometries[S]:h,y!==null){E=y.coordinates;var D=y.type;switch(b=0,D){case null:break;case"Point":if(e(E,_,N,k,$)===!1)return!1;_++,k++;break;case"LineString":case"MultiPoint":for(i=0;i<E.length;i++){if(e(E[i],_,N,k,$)===!1)return!1;_++,D==="MultiPoint"&&k++}D==="LineString"&&k++;break;case"Polygon":case"MultiLineString":for(i=0;i<E.length;i++){for(r=0;r<E[i].length-b;r++){if(e(E[i][r],_,N,k,$)===!1)return!1;_++}D==="MultiLineString"&&k++,D==="Polygon"&&$++}D==="Polygon"&&k++;break;case"MultiPolygon":for(i=0;i<E.length;i++){for($=0,r=0;r<E[i].length;r++){for(u=0;u<E[i][r].length-b;u++){if(e(E[i][r][u],_,N,k,$)===!1)return!1;_++}$++}k++}break;case"GeometryCollection":for(i=0;i<y.geometries.length;i++)if(lt(y.geometries[i],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ue(n,e){var t,i,r,u,y,c,E,h,b,_,T=0,O=n.type==="FeatureCollection",G=n.type==="Feature",F=O?n.features.length:1;for(t=0;t<F;t++){for(c=O?n.features[t].geometry:G?n.geometry:n,h=O?n.features[t].properties:G?n.properties:{},b=O?n.features[t].bbox:G?n.bbox:void 0,_=O?n.features[t].id:G?n.id:void 0,E=c?c.type==="GeometryCollection":!1,y=E?c.geometries.length:1,r=0;r<y;r++){if(u=E?c.geometries[r]:c,u===null){if(e(null,T,h,b,_)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(u,T,h,b,_)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<u.geometries.length;i++)if(e(u.geometries[i],T,h,b,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}function Kt(n,e){Ue(n,function(t,i,r,u,y){var c=t===null?null:t.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return e(X(t,r,{bbox:u,id:y}),i,0)===!1?!1:void 0}var E;switch(c){case"MultiPoint":E="Point";break;case"MultiLineString":E="LineString";break;case"MultiPolygon":E="Polygon";break}for(var h=0;h<t.coordinates.length;h++){var b=t.coordinates[h],_={type:E,coordinates:b};if(e(X(_,r),i,h)===!1)return!1}})}function Xt(n,e={}){const t=[];if(Ue(n,r=>{t.push(r.coordinates)}),t.length<2)throw new Error("Must have at least 2 geometries");const i=Ft(t[0],...t.slice(1));return i.length===0?null:i.length===1?fe(i[0],e.properties):je(i,e.properties)}var ut=Xt;function Ee(){}function ft(n){return n()}function ct(){return Object.create(null)}function Oe(n){n.forEach(ft)}function at(n){return typeof n=="function"}function Yt(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Zt(n){return Object.keys(n).length===0}function jt(n,e){n.appendChild(e)}function Wt(n,e,t){n.insertBefore(e,t||null)}function ht(n){n.parentNode&&n.parentNode.removeChild(n)}function gt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ae(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Ht(n){return Array.from(n.childNodes)}function Ne(n,e,t){n.classList.toggle(e,!!t)}let ze;function ve(n){ze=n}const ge=[],pt=[];let pe=[];const yt=[],Jt=Promise.resolve();let Fe=!1;function Qt(){Fe||(Fe=!0,Jt.then(dt))}function Ve(n){pe.push(n)}const Ke=new Set;let ye=0;function dt(){if(ye!==0)return;const n=ze;do{try{for(;ye<ge.length;){const e=ge[ye];ye++,ve(e),en(e.$$)}}catch(e){throw ge.length=0,ye=0,e}for(ve(null),ge.length=0,ye=0;pt.length;)pt.pop()();for(let e=0;e<pe.length;e+=1){const t=pe[e];Ke.has(t)||(Ke.add(t),t())}pe.length=0}while(ge.length);for(;yt.length;)yt.pop()();Fe=!1,Ke.clear(),ve(n)}function en(n){if(n.fragment!==null){n.update(),Oe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ve)}}function tn(n){const e=[],t=[];pe.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),pe=e}const nn=new Set;function rn(n,e){n&&n.i&&(nn.delete(n),n.i(e))}function sn(n,e,t){const{fragment:i,after_update:r}=n.$$;i&&i.m(e,t),Ve(()=>{const u=n.$$.on_mount.map(ft).filter(at);n.$$.on_destroy?n.$$.on_destroy.push(...u):Oe(u),n.$$.on_mount=[]}),r.forEach(Ve)}function on(n,e){const t=n.$$;t.fragment!==null&&(tn(t.after_update),Oe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ln(n,e){n.$$.dirty[0]===-1&&(ge.push(n),Qt(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function un(n,e,t,i,r,u,y=null,c=[-1]){const E=ze;ve(n);const h=n.$$={fragment:null,ctx:[],props:u,update:Ee,not_equal:r,bound:ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(E?E.$$.context:[])),callbacks:ct(),dirty:c,skip_bound:!1,root:e.target||E.$$.root};y&&y(h.root);let b=!1;if(h.ctx=t(n,e.props||{},(_,T,...O)=>{const G=O.length?O[0]:T;return h.ctx&&r(h.ctx[_],h.ctx[_]=G)&&(!h.skip_bound&&h.bound[_]&&h.bound[_](G),b&&ln(n,_)),T}),h.update(),b=!0,Oe(h.before_update),h.fragment=i(h.ctx),e.target){if(e.hydrate){const _=Ht(e.target);h.fragment&&h.fragment.l(_),_.forEach(ht)}else h.fragment&&h.fragment.c();e.intro&&rn(n.$$.fragment),sn(n,e.target,e.anchor),dt()}ve(E)}class fn{constructor(){M(this,"$$");M(this,"$$set")}$destroy(){on(this,1),this.$destroy=Ee}$on(e,t){if(!at(t))return Ee;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Zt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const cn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(cn);function an(n){let e,t,i;return{c(){e=gt("svg"),t=gt("path"),ae(t,"stroke-width","4"),ae(t,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),ae(t,"class","svelte-gzo3ar"),ae(e,"width",i=n[0]==="list"?20:void 0),ae(e,"viewBox","0 0 70 85"),ae(e,"fill","none"),ae(e,"class","svelte-gzo3ar"),Ne(e,"in-map",n[0]!=="list"),Ne(e,"list-icon",n[0]==="list")},m(r,u){Wt(r,e,u),jt(e,t)},p(r,[u]){u&1&&i!==(i=r[0]==="list"?20:void 0)&&ae(e,"width",i),u&1&&Ne(e,"in-map",r[0]!=="list"),u&1&&Ne(e,"list-icon",r[0]==="list")},i:Ee,o:Ee,d(r){r&&ht(e)}}}function hn(n,e,t){let{displayIn:i}=e;return n.$$set=r=>{"displayIn"in r&&t(0,i=r.displayIn)},[i]}class gn extends fn{constructor(e){super(),un(this,e,hn,an,Yt,{displayIn:0})}}function pn(n,e={}){if(n.bbox!=null&&e.recompute!==!0)return n.bbox;const t=[1/0,1/0,-1/0,-1/0];return lt(n,i=>{t[0]>i[0]&&(t[0]=i[0]),t[1]>i[1]&&(t[1]=i[1]),t[2]<i[0]&&(t[2]=i[0]),t[3]<i[1]&&(t[3]=i[1])}),t}var mt=pn;function yn(n){const e=[];if(Ue(n,r=>{e.push(r.coordinates)}),e.length<2)throw new Error("Must have at least two features");const t=n.features[0].properties||{},i=Vt(e[0],...e.slice(1));return i.length===0?null:i.length===1?fe(i[0],t):je(i,t)}var dn=yn;function mn(n){if(!n)throw new Error("geojson is required");var e=[];return Kt(n,function(t){e.push(t)}),de(e)}var xn=mn;function xt(n){const e=[...n];return e[2]<e[0]&&(Math.abs((e[0]+e[2]+360)/2)>Math.abs((e[0]-360+e[2])/2)?e[0]-=360:e[2]+=360),e}function wt(n,e){const t=dn(de([fe([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),n]));if(!t)return;t.properties={isMask:!0};const i=xt(mt(n)),r=(i[2]-i[0])/360/1e3,u=i[0]<-180,y=i[2]>180,c=xn(n);if(c.features.length>1&&(u||y))for(const E of c.features){const h=xt(mt(E));if(y&&h[0]<-180+r)for(const b of E.geometry.coordinates)for(const _ of b)_[0]+=360-r;if(u&&h[2]>180-r)for(const b of E.geometry.coordinates)for(const _ of b)_[0]-=360-r}e(de([c.features.length<2?n:ut(c)??n,t]))}const Et={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}},Ae="mtlr-gc-full-geom",vt="mtlr-gc-full-geom-fill",St="mtlr-gc-full-geom-line";function wn(n,e,t=!0,i=!0,r={},u={},y=Et){let c;const E=[];let h,b,_;function T(){if(!n.loaded){n.once("load",T);return}const L=y?y===!0?Et:y:void 0;if(!(L!=null&&L.fill)&&!(L!=null&&L.line))return;const N=n.getSource(Ae);if(N)N.setData(_??de([]));else if(_)n.addSource(Ae,{type:"geojson",data:_});else return;!n.getLayer(vt)&&(L!=null&&L.fill)&&n.addLayer({...L==null?void 0:L.fill,id:vt,type:"fill",source:Ae}),!n.getLayer(St)&&(L!=null&&L.line)&&n.addLayer({...L==null?void 0:L.line,id:St,type:"line",source:Ae})}function O(L){_=L,T()}n.on("styledata",()=>{setTimeout(()=>{_&&T()})});const G=L=>{c==null||c({type:"mapClick",coordinates:[L.lngLat.lng,L.lngLat.lat]})};function F(L=!1){if(!e)throw new Error;const N=document.createElement("div");return L&&N.classList.add("marker-interactive"),new gn({props:{displayIn:"maplibre"},target:N}),new e.Marker({element:N,offset:[1,-13]})}return{setEventHandler(L){L?(c=L,n.on("click",G)):(c=void 0,n.off("click",G))},flyTo(L,N){n.flyTo({center:L,...N?{zoom:N}:{},...r})},fitBounds(L,N,S){n.fitBounds([[L[0],L[1]],[L[2],L[3]]],{padding:N,...S?{maxZoom:S}:{},...u})},indicateReverse(L){n.getCanvasContainer().style.cursor=L?"crosshair":""},setReverseMarker(L){!e||!t||(b?L?b.setLngLat(L):(b.remove(),b=void 0):L&&(t instanceof Function?b=t(n)??void 0:(b=(typeof t=="object"?new e.Marker(t):F()).setLngLat(L).addTo(n),b.getElement().classList.add("marker-reverse"))))},setFeatures(L,N,S){for(const k of E)k.remove();if(E.length=0,O(void 0),!!e){e:if(N){let k=!1;if(N.geometry.type==="GeometryCollection"){const $=N.geometry.geometries.filter(D=>D.type==="Polygon"||D.type==="MultiPolygon");t:if($.length>0){const D=ut(de($.map(V=>X(V))));if(!D)break t;wt({...N,geometry:D.geometry},O),k=!0}else{const D=N.geometry.geometries.filter(V=>V.type==="LineString"||V.type==="MultiLineString");D.length>0&&(O({...N,geometry:{type:"GeometryCollection",geometries:D}}),k=!0)}}if(!k){if(N.geometry.type==="Polygon"||N.geometry.type==="MultiPolygon")wt(N,O);else if(N.geometry.type==="LineString"||N.geometry.type==="MultiLineString"){O(N);break e}}if(!S&&N.geometry.type!=="Point")break e;if(t instanceof Function){const $=t(n,N);$&&E.push($)}else t&&E.push(typeof t=="object"?new e.Marker(t):F().setLngLat(N.center).addTo(n))}if(i)for(const k of L??[]){if(k===N)continue;let $;if(i instanceof Function){if($=i(n,k),!$)continue}else $=(typeof i=="object"?new e.Marker(i):F(!0)).setLngLat(k.center).setPopup(new e.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(k.place_type[0]==="reverse"?k.place_name:k.place_name.replace(/,.*/,""))).addTo(n);const D=$.getElement();D.addEventListener("click",V=>{V.stopPropagation(),c==null||c({type:"markerClick",id:k.id})}),D.addEventListener("mouseenter",()=>{c==null||c({type:"markerMouseEnter",id:k.id}),$.togglePopup()}),D.addEventListener("mouseleave",()=>{c==null||c({type:"markerMouseLeave",id:k.id}),$.togglePopup()}),E.push($)}}},setSelectedMarker(L){h&&h.getElement().classList.toggle("marker-selected",!1),h=L>-1?E[L]:void 0,h==null||h.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const L=n.getCenter();return[n.getZoom(),L.lng,L.lat]}}}H.createMapLibreGlMapController=wn,Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=maplibregl-controller.umd.js.map
