(function(l,T){typeof exports=="object"&&typeof module<"u"?T(exports):typeof define=="function"&&define.amd?define(["exports"],T):(l=typeof globalThis<"u"?globalThis:l||self,T(l.maptilerClient={}))})(this,function(l){"use strict";function T(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class Q{constructor(){this._apiKey="",this._fetch=T(),this.tileCacheSize=200}set apiKey(e){this._apiKey=e}get apiKey(){return this._apiKey}set fetch(e){this._fetch=e}get fetch(){return this._fetch}}const h=new Q,Z={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1}},X={ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!0},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!0},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!0},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!0},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!0},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!0},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!0},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!0},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!0},WELSH:{code:"cy",flag:"name:cy",name:"Welsh",latin:!0,isMode:!1,geocoding:!0}},y={...Z,...X};function ee(t,e=y){return t in e?t[t]:null}function M(t,e=y){for(const a of Object.values(e))if(a.code===t)return a;return null}function D(t,e=y){for(const a of Object.values(e))if(a.flag===t)return a;return null}function O(){if(typeof navigator>"u"){const t=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return M(t)??y.ENGLISH}return Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).map(t=>M(t)).filter(t=>t)[0]??y.ENGLISH}function j(t){return t!==null&&typeof t=="object"&&"code"in t&&"flag"in t&&"name"in t&&"latin"in t&&"isMode"in t&&"geocoding"in t&&(typeof t.code=="string"||t.code===null)&&typeof t.flag=="string"&&typeof t.name=="string"&&typeof t.latin=="boolean"&&typeof t.isMode=="boolean"&&typeof t.geocoding=="boolean"}function H(t,e=y){return j(t)?D(t.flag,e):typeof t!="string"?null:ee(t,e)||M(t,e)||D(t,e)||null}function Te(t,e,a=y){const n=H(t,a),i=H(e,a);return n&&i&&n.flag===i.flag}async function p(t,e={}){if(h.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(t).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return h.fetch(t,e)}const f={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(f);class u extends Error{constructor(e,a=""){super(`Call to enpoint ${e.url} failed with the status code ${e.status}. ${a}`),this.res=e}}const E={400:"Query too long / Invalid parameters",403:"Key is missing, invalid or restricted"};function te(t,e){const{language:a}=e;if(a===void 0)return;const n=(Array.isArray(a)?a:[a]).map(r=>Me(r)).filter(r=>r),i=Array.from(new Set(n)).join(",");t.set("language",i)}function Me(t){const e=t===y.AUTO.flag?O():typeof t=="string"?M(t):j(t)?t.flag===y.AUTO.flag?O():D(t.flag):null;return e?.geocoding?e.code:null}function ae(t,e){const{apiKey:a,limit:n,types:i,excludeTypes:r}=e;t.set("key",a??h.apiKey),n!==void 0&&t.set("limit",String(n)),i!==void 0&&t.set("types",i.join(",")),r!==void 0&&t.set("excludeTypes",String(r)),te(t,e)}function ne(t,e){ae(t,e);const{bbox:a,proximity:n,country:i,fuzzyMatch:r,autocomplete:o}=e;a!==void 0&&t.set("bbox",a.join(",")),n!==void 0&&t.set("proximity",n==="ip"?n:n.join(",")),i!==void 0&&t.set("country",i.join(",")),r!==void 0&&t.set("fuzzyMatch",r?"true":"false"),o!==void 0&&t.set("autocomplete",o?"true":"false")}async function Re(t,e={}){if(typeof t!="string"||t.trim().length===0)throw new Error("The query must be a non-empty string");const a=new URL(`geocoding/${encodeURIComponent(t)}.json`,f.maptilerApiURL);ne(a.searchParams,e);const n=await p(a.toString());if(!n.ok)throw new u(n,E[n.status]??"");return await n.json()}async function we(t,e={}){if(!Array.isArray(t)||t.length<2)throw new Error("The position must be an array of form [lng, lat].");const a=new URL(`geocoding/${t[0]},${t[1]}.json`,f.maptilerApiURL);ae(a.searchParams,e);const n=await p(a.toString());if(!n.ok)throw new u(n,E[n.status]??"");return await n.json()}async function De(t,e={}){const a=new URL(`geocoding/${t}.json`,f.maptilerApiURL);a.searchParams.set("key",e.apiKey??h.apiKey),te(a.searchParams,e);const n=await p(a.toString());if(!n.ok)throw new u(n,E[n.status]??"");return await n.json()}async function Ee(t,e={}){if(!t.length)return[];const a=t.map(o=>encodeURIComponent(o)).join(";"),n=new URL(`geocoding/${a}.json`,f.maptilerApiURL);ne(n.searchParams,e);const i=await p(n.toString());if(!i.ok)throw new u(i,E[i.status]??"");const r=await i.json();return t.length===1?[r]:r}const Ue={forward:Re,reverse:we,byId:De,batch:Ee},ie={403:"Key is missing, invalid or restricted"};async function ke(t={}){const e=new URL("geolocation/ip.json",f.maptilerApiURL);e.searchParams.set("key",t.apiKey??h.apiKey),"elevation"in t&&e.searchParams.set("elevation",t.elevation?"true":"false");const a=e.toString(),n=await p(a);if(!n.ok)throw new u(n,n.status in ie?ie[n.status]:"");return await n.json()}const Pe={info:ke},U={403:"Key is missing, invalid or restricted"};async function Ne(t,e={}){if(typeof t!="string"||t.trim().length===0)throw new Error("The query must be a non-empty string");const a=new URL(`coordinates/search/${t}.json`,f.maptilerApiURL);a.searchParams.set("key",e.apiKey??h.apiKey),"limit"in e&&a.searchParams.set("limit",e.limit.toString()),"transformations"in e&&a.searchParams.set("transformations",e.transformations.toString()),"exports"in e&&a.searchParams.set("exports",e.exports.toString());const n=a.toString(),i=await p(n);if(!i.ok)throw new u(i,i.status in U?U[i.status]:"");return await i.json()}async function be(t,e={}){const a=(Array.isArray(t[0])?t:[t]).map(o=>`${o[0]},${o[1]}`).join(";"),n=new URL(`coordinates/transform/${a}.json`,f.maptilerApiURL);n.searchParams.set("key",e.apiKey??h.apiKey),"sourceCrs"in e&&n.searchParams.set("s_srs",e.sourceCrs.toString()),"targetCrs"in e&&n.searchParams.set("t_srs",e.targetCrs.toString()),"operations"in e&&n.searchParams.set("ops",(Array.isArray(e.operations)?e.operations:[e.operations]).join("|"));const i=n.toString(),r=await p(i);if(!r.ok)throw new u(r,r.status in U?U[r.status]:"");return await r.json()}const $e={search:Ne,transform:be},re={403:"Key is missing, invalid or restricted"};async function Ce(t,e={}){if(typeof t!="string"||t.trim().length===0)throw new Error("The data ID must be a non-empty string");const a=new URL(`data/${encodeURIComponent(t)}/features.json`,f.maptilerApiURL);a.searchParams.set("key",e.apiKey??h.apiKey);const n=a.toString(),i=await p(n);if(!i.ok)throw new u(i,i.status in re?re[i.status]:"");return await i.json()}const Ke={get:Ce};function oe(t){const e=/^maptiler:\/\/(.*)/;let a;const n=t.trim();let i;return n.startsWith("http://")||n.startsWith("https://")?i=n:(a=e.exec(n))!==null?i=`https://api.maptiler.com/maps/${a[1]}/style.json`:i=`https://api.maptiler.com/maps/${n}/style.json`,i}class V{constructor(e,a,n,i,r,o,s=!1,c){this.name=e,this.variantType=a,this.id=n,this.referenceStyle=i,this.description=r,this.imageURL=o,this.deprecated=s,this.deprecationMessage=c}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(e){return this.referenceStyle.hasVariant(e)}getVariant(e){const a=this.referenceStyle.getVariant(e);return this.warnIfDeprecated(a),a}getVariants(){return this.referenceStyle.getVariants().filter(e=>e!==this).map(e=>(this.warnIfDeprecated(e),e))}getImageURL(){return this.imageURL}getExpandedStyleURL(){return oe(this.getId())}warnIfDeprecated(e=this){if(!e.deprecated)return e;if(e.deprecationMessage)console.warn(e.deprecationMessage);else{const a=e.getFullName();console.warn(`Style "${a}" is deprecated and will be removed in a future version.`)}return e}}class F{constructor(e,a){this.name=e,this.id=a,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(e){this.variants[e.getType()]=e,this.orderedVariants.push(e)}hasVariant(e){return e in this.variants}getVariant(e){return e in this.variants?this.variants[e]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0].warnIfDeprecated()}}const k=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v4-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"streets-v2",name:"Default v2",variantType:"DEFAULT_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2" is deprecated, use "streets-v4" instead'},{id:"streets-v2-dark",name:"Dark v2",variantType:"DARK_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-dark" is deprecated, use "streets-v4-dark" instead'},{id:"streets-v2-light",name:"Light v2",variantType:"LIGHT_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-light" is deprecated, use "streets-v4-light" instead'},{id:"streets-v2-night",name:"Night v2",variantType:"NIGHT_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-night" is deprecated, use "streets-v4-night" instead'},{id:"streets-v2-pastel",name:"Pastel v2",variantType:"PASTEL_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"streets-v2-pastel" is deprecated, use "streets-v4-pastel" instead'}]},{referenceStyleID:"BASE",name:"Base",description:"",variants:[{id:"base-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"base-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"base-v4-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"base-v4-ai",name:"Night",variantType:"NIGHT",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",deprecated:!0,variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",deprecated:!0,variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",deprecated:!0,variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",deprecated:!0,variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",deprecated:!0,variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",deprecated:!0,description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",deprecated:!0,description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"AQUARELLE",name:"Aquarelle",description:"Watercolor map for creative use",variants:[{id:"aquarelle",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"aquarelle-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"aquarelle-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""}]},{referenceStyleID:"LANDSCAPE",name:"Landscape",description:"Terrain map for data overlays and visualisations",variants:[{id:"landscape-v4",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"landscape-v4-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"landscape-v4-vivid",name:"Vivid",variantType:"VIVID",description:"",imageURL:""},{id:"landscape",name:"Default",variantType:"DEFAULT_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape" is deprecated, use "landscape-v4" instead'},{id:"landscape-dark",name:"Dark",variantType:"DARK_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape-dark" is deprecated, use "landscape-v4-dark" instead'},{id:"landscape-vivid",name:"Vivid",variantType:"VIVID_V2",description:"",imageURL:"",deprecated:!0,deprecationMessage:'"landscape-vivid" is deprecated, use "landscape-v4-vivid" instead'}]}];function Oe(t){return new Proxy(t,{get(e,a,n){return e.hasVariant(a)?e.getVariant(a):a.toString().toUpperCase()===a?t.getDefaultVariant():Reflect.get(e,a,n)}})}function je(){const t={};for(let e=0;e<k.length;e+=1){const a=k[e],n=Oe(new F(a.name,a.referenceStyleID));for(let i=0;i<a.variants.length;i+=1){const r=a.variants[i],o=new V(r.name,r.variantType,r.id,n,r.description,r.imageURL,r.deprecated);n.addVariant(o)}t[a.referenceStyleID]=n}return t}function P(t){if(!t)return se[k[0].referenceStyleID].getDefaultVariant().getId();if(typeof t=="string"||t instanceof String)return t.trim().toLowerCase();if(t instanceof V)return t.getId();if(t instanceof F)return t.getDefaultVariant().getId()}const se=je();function He(t){const e=[];function a(r){(r.type==="LineString"||r.type==="MultiLineString")&&e.push(r)}function n(r){r.geometry&&a(r.geometry)}function i(r){for(const o of r.features)o.type==="Feature"?n(o):o.type==="FeatureCollection"&&i(o)}return t.type==="Feature"?n(t):t.type==="FeatureCollection"?i(t):a(t),e}function Ve(t,e,a){let n=e[0],i=e[1],r=a[0]-n,o=a[1]-i;if(r!==0||o!==0){const s=((t[0]-n)*r+(t[1]-i)*o)/(r*r+o*o);s>1?(n=a[0],i=a[1]):s>0&&(n+=r*s,i+=o*s)}return r=t[0]-n,o=t[1]-i,r*r+o*o}function _(t,e,a,n,i){let r=n,o;for(let s=e+1;s<a;s++){const c=Ve(t[s],t[e],t[a]);c>r&&(o=s,r=c)}r>n&&(o-e>1&&_(t,e,o,n,i),i.push(t[o]),a-o>1&&_(t,o,a,n,i))}function Fe(t,e){const a=t.length-1,n=[t[0]];return _(t,0,a,e,n),n.push(t[a]),n}function _e(t,e){if(t.length<=2)return t;const a=e!==void 0?e*e:1;return Fe(t,a)}const ce={extractLineStrings:He,simplify:_e};function B(t,e=!0){let a=`${t[0]},${t[1]}`;return t.length===3&&e&&(a+=`,${t[2]}`),a}function x(t,e=3e3){let a=t.map(r=>r.join(",")).join("|"),n=5e-6;const i=1e-5;for(;a.length>e;)a=ce.simplify(t,n).map(r=>`${r[0]},${r[1]}`).join("|"),n+=i;return a}function Be(t,e,a={}){const n=P(a.style),i=a.hiDPI?"@2x":"",r=a.format??"png";let o=~~(a.width??1024),s=~~(a.height??1024);a.hiDPI&&(o=~~(o/2),s=~~(s/2));const c=new URL(`maps/${encodeURIComponent(n)}/static/${t[0]},${t[1]},${e}/${o}x${s}${i}.${r}`,f.maptilerApiURL);if("attribution"in a&&c.searchParams.set("attribution",a.attribution.toString()),"markers"in a){let g="";const m="markerIcon"in a;m&&(g+=`icon:${a.markerIcon}|`),m&&"markerAnchor"in a&&(g+=`anchor:${a.markerAnchor}|`),m&&a.hiDPI&&(g+="scale:2|");const v=Array.isArray(a.markers[0])?a.markers:[a.markers];g+=v.map(A=>B(A,!m)).join("|"),c.searchParams.set("markers",g)}if("path"in a){let g="";if(g+=`fill:${a.pathFillColor??"none"}|`,"pathStrokeColor"in a&&(g+=`stroke:${a.pathStrokeColor}|`),"pathWidth"in a){const m=a.pathWidth/(a.hiDPI?2:1);g+=`width:${m.toString()}|`}g+=x(a.path),c.searchParams.set("path",g)}return c.searchParams.set("key",a.apiKey??h.apiKey),c.toString()}function xe(t,e={}){const a=P(e.style),n=e.hiDPI?"@2x":"",i=e.format??"png";let r=~~(e.width??1024),o=~~(e.height??1024);e.hiDPI&&(r=~~(r/2),o=~~(o/2));const s=new URL(`maps/${encodeURIComponent(a)}/static/${t[0]},${t[1]},${t[2]},${t[3]}/${r}x${o}${n}.${i}`,f.maptilerApiURL);if("attribution"in e&&s.searchParams.set("attribution",e.attribution.toString()),"padding"in e&&s.searchParams.set("padding",e.padding.toString()),"markers"in e){let c="";const g="markerIcon"in e;g&&(c+=`icon:${e.markerIcon}|`),g&&"markerAnchor"in e&&(c+=`anchor:${e.markerAnchor}|`),g&&e.hiDPI&&(c+="scale:2|");const m=Array.isArray(e.markers[0])?e.markers:[e.markers];c+=m.map(v=>B(v,!g)).join("|"),s.searchParams.set("markers",c)}if("path"in e){let c="";if(c+=`fill:${e.pathFillColor??"none"}|`,"pathStrokeColor"in e&&(c+=`stroke:${e.pathStrokeColor}|`),"pathWidth"in e){const g=e.pathWidth/(e.hiDPI?2:1);c+=`width:${g.toString()}|`}c+=x(e.path),s.searchParams.set("path",c)}return s.searchParams.set("key",e.apiKey??h.apiKey),s.toString()}function ze(t={}){if(!("markers"in t)&&!("path"in t))throw new Error("Automatic static maps require markers and/or path to be created.");const e=P(t.style),a=t.hiDPI?"@2x":"",n=t.format??"png";let i=~~(t.width??1024),r=~~(t.height??1024);t.hiDPI&&(i=~~(i/2),r=~~(r/2));const o=new URL(`maps/${encodeURIComponent(e)}/static/auto/${i}x${r}${a}.${n}`,f.maptilerApiURL);if("attribution"in t&&o.searchParams.set("attribution",t.attribution.toString()),"padding"in t&&o.searchParams.set("padding",t.padding.toString()),"markers"in t){let s="";const c="markerIcon"in t;c&&(s+=`icon:${t.markerIcon}|`),c&&"markerAnchor"in t&&(s+=`anchor:${t.markerAnchor}|`),c&&t.hiDPI&&(s+="scale:2|");const g=Array.isArray(t.markers[0])?t.markers:[t.markers];s+=g.map(m=>B(m,!c)).join("|"),o.searchParams.set("markers",s)}if("path"in t){let s="";if(s+=`fill:${t.pathFillColor??"none"}|`,"pathStrokeColor"in t&&(s+=`stroke:${t.pathStrokeColor}|`),"pathWidth"in t){const c=t.pathWidth/(t.hiDPI?2:1);s+=`width:${c.toString()}|`}s+=x(t.path),o.searchParams.set("path",s)}return o.searchParams.set("key",t.apiKey??h.apiKey),o.toString()}const Ge={centered:Be,bounded:xe,automatic:ze},N=63710088e-1,de=2*Math.PI*N;function le(t){return(180+t)/360}function ge(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function me(t){const e=pe(t);return[le(e[0]),ge(e[1])]}function he(t){return t*360-180}function fe(t){const e=180-t*360;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function We(t){return[he(t[0]),fe(t[1])]}function z(t,e){const a=Math.PI/180,n=t[1]*a,i=e[1]*a,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e[0]-t[0])*a);return N*Math.acos(Math.min(r,1))}function Je(t){const e=Array(t.length);e[0]=0;const a=e.length;for(let n=1;n<a;n++)e[n]=z(t[n-1],t[n])+e[n-1];return e}function pe(t){const e=t[0],a=t[1],n=360,i=((e+180)%n+n)%n-180;return[i===-180?180:i,a]}function ue(t){return de*Math.cos(t*Math.PI/180)}function ye(t,e,a=!0){const n=2**e,i=[t[0]*n,t[1]*n];return a?[~~i[0],~~i[1]]:i}function qe(t,e,a=!0){const n=me(t);return ye(n,e,a)}function R(t){return t*Math.PI/180}function G(t){return t*180/Math.PI}function Ye(t,e,a){const n=z(t,e),i=R(t[0]),r=R(t[1]),o=R(e[0]),s=R(e[1]),c=n/N,g=Math.sin((1-a)*c)/Math.sin(c),m=Math.sin(a*c)/Math.sin(c),v=g*Math.cos(r)*Math.cos(i)+m*Math.cos(s)*Math.cos(o),A=g*Math.cos(r)*Math.sin(i)+m*Math.cos(s)*Math.sin(o),w=g*Math.sin(r)+m*Math.sin(s),C=Math.atan2(w,Math.sqrt(v*v+A*A)),d=Math.atan2(A,v);return[G(d),G(C)]}const ve={EARTH_RADIUS:N,EARTH_CIRCUMFERENCE:de,longitudeToMercatorX:le,latitudeToMercatorY:ge,wgs84ToMercator:me,mercatorXToLongitude:he,mercatorYToLatitude:fe,mercatorToWgs84:We,haversineDistanceWgs84:z,wrapWgs84:pe,circumferenceAtLatitude:ue,mercatorToTileIndex:ye,wgs84ToTileIndex:qe,toRadians:R,toDegrees:G,haversineIntermediateWgs84:Ye,haversineCumulatedDistanceWgs84:Je};class Qe extends Map{#n=0;#e=new Map;#t=new Map;#i;#o;#r;constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.#i=e.maxSize,this.#o=e.maxAge||Number.POSITIVE_INFINITY,this.#r=e.onEviction}get __oldCache(){return this.#t}#s(e){if(typeof this.#r=="function")for(const[a,n]of e)this.#r(a,n.value)}#a(e,a){return typeof a.expiry=="number"&&a.expiry<=Date.now()?(typeof this.#r=="function"&&this.#r(e,a.value),this.delete(e)):!1}#m(e,a){if(this.#a(e,a)===!1)return a.value}#c(e,a){return a.expiry?this.#m(e,a):a.value}#d(e,a){const n=a.get(e);return this.#c(e,n)}#l(e,a){this.#e.set(e,a),this.#n++,this.#n>=this.#i&&(this.#n=0,this.#s(this.#t),this.#t=this.#e,this.#e=new Map)}#h(e,a){this.#t.delete(e),this.#l(e,a)}*#g(){for(const e of this.#t){const[a,n]=e;this.#e.has(a)||this.#a(a,n)===!1&&(yield e)}for(const e of this.#e){const[a,n]=e;this.#a(a,n)===!1&&(yield e)}}get(e){if(this.#e.has(e)){const a=this.#e.get(e);return this.#c(e,a)}if(this.#t.has(e)){const a=this.#t.get(e);if(this.#a(e,a)===!1)return this.#h(e,a),a.value}}set(e,a,{maxAge:n=this.#o}={}){const i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.#e.has(e)?this.#e.set(e,{value:a,expiry:i}):this.#l(e,{value:a,expiry:i}),this}has(e){return this.#e.has(e)?!this.#a(e,this.#e.get(e)):this.#t.has(e)?!this.#a(e,this.#t.get(e)):!1}peek(e){if(this.#e.has(e))return this.#d(e,this.#e);if(this.#t.has(e))return this.#d(e,this.#t)}delete(e){const a=this.#e.delete(e);return a&&this.#n--,this.#t.delete(e)||a}clear(){this.#e.clear(),this.#t.clear(),this.#n=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const a=[...this.#g()],n=a.length-e;n<0?(this.#e=new Map(a),this.#t=new Map,this.#n=a.length):(n>0&&this.#s(a.slice(0,n)),this.#t=new Map(a.slice(n)),this.#e=new Map,this.#n=0),this.#i=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.#e){const[a,n]=e;this.#a(a,n)===!1&&(yield[a,n.value])}for(const e of this.#t){const[a,n]=e;this.#e.has(a)||this.#a(a,n)===!1&&(yield[a,n.value])}}*entriesDescending(){let e=[...this.#e];for(let a=e.length-1;a>=0;--a){const n=e[a],[i,r]=n;this.#a(i,r)===!1&&(yield[i,r.value])}e=[...this.#t];for(let a=e.length-1;a>=0;--a){const n=e[a],[i,r]=n;this.#e.has(i)||this.#a(i,r)===!1&&(yield[i,r.value])}}*entriesAscending(){for(const[e,a]of this.#g())yield[e,a.value]}get size(){if(!this.#n)return this.#t.size;let e=0;for(const a of this.#t.keys())this.#e.has(a)||e++;return Math.min(this.#n+e,this.#i)}get maxSize(){return this.#i}entries(){return this.entriesAscending()}forEach(e,a=this){for(const[n,i]of this.entriesAscending())e.call(a,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}let W=null;function Le(){return W||(W=new Qe({maxSize:h.tileCacheSize})),W}async function Ae(t){const e=new Blob([t]),a=await createImageBitmap(e),n=document.createElement("canvas"),i=n.getContext("2d");n.width=a.width,n.height=a.height,i.drawImage(a,0,0);const r=i.getImageData(0,0,n.width,n.height);return{pixels:r.data,width:n.width,height:n.height,components:r.data.length/(n.width*n.height)}}function Ie(){if(h.bufferToPixelData)return h.bufferToPixelData;if(typeof window<"u")return Ae;throw new Error("An image file buffer to pixel data parser is necessary. Specify it in `config.bufferToPixelData`")}function J(){return!!h.bufferToPixelData||typeof window<"u"}const Ze="terrain-rgb-v2",q=50,Xe=1e3;let b=null;const Se={403:"Key is missing, invalid or restricted"};async function et(t,e){t.length>Xe&&console.warn("Computing elevation for complex geometries is discouraged - simplify the geometry before proceeding");const a=Math.ceil(t.length/q),n=Array.from({length:a},()=>null).map((r,o)=>{const s=o*q,c=t.slice(s,s+q).map(m=>m.join(",")).join(";"),g=new URL(`elevation/${c}.json`,f.maptilerApiURL);return g.searchParams.set("key",e),p(g.toString())}),i=await Promise.allSettled(n);return(await Promise.all(i.map(async r=>{if(r.status==="rejected")throw new Error(`Some segments could not be fetched, error: ${r.reason}`);if(!r.value.ok)throw new Error(`Some segments could not be fetched, response: ${r.value.status} ${await r.value.text()}, url: ${r.value.url}`);return r.value.json()}))).flat()}async function tt(t,e,a){if(!b){const d=new URL(`tiles/${Ze}/tiles.json`,f.maptilerApiURL);d.searchParams.set("key",e);const S=d.toString(),L=await p(S);if(L.ok)b=await L.json();else throw new u(L,Se[L.status]??"")}const n=Ie(),i=b.tiles[0],r=Le(),o=b.maxzoom;let s=~~(a??o);(s>o||s<0)&&(s=o);const c=t.map(d=>ve.wgs84ToTileIndex(d,s,!1)),g=c.map(d=>[~~d[0],~~d[1]]).map(d=>`terrain_${s.toString()}_${d[0].toString()}_${d[1].toString()}`),m=Array.from(new Set(g.filter(d=>!r.has(d)))).map(d=>d.split("_").slice(1)),v=m.map(d=>i.replace("{x}",d[1].toString()).replace("{y}",d[2].toString()).replace("{z}",d[0].toString())).map(d=>p(d)),A=(await Promise.allSettled(v)).map(d=>d.status==="fulfilled"?d.value:null).filter(d=>d),w=A.filter(d=>!d.ok);if(A.length!==v.length)throw new Error("Some tiles could not be fetched.");if(w.length)throw new u(w[0],Se[w[0].status]??"");const C=await Promise.all(A.map(d=>d.arrayBuffer()));if(!C.every(d=>d.byteLength>0))throw new Error("Some tiles are not available.");return(await Promise.all(C.map(d=>n(d)))).forEach((d,S)=>{const L=m[S],K=`terrain_${L[0].toString()}_${L[1].toString()}_${L[2].toString()}`;r.set(K,d)}),t.map((d,S)=>{const L=g[S],K=c[S],I=r.get(L),ot=Math.min(Math.round(I.width*(K[0]%1)),I.width-1),Y=(Math.min(Math.round(I.height*(K[1]%1)),I.height-1)*I.width+ot)*I.components,st=I.pixels[Y],ct=I.pixels[Y+1],dt=I.pixels[Y+2],lt=-1e4+(st*256*256+ct*256+dt)*.1;return[d[0],d[1],~~(lt*1e3)/1e3]})}async function at(t,e={}){return(await $([t],e))[0]}async function $(t,e={}){if(t.length===0)return[];const a=e.apiKey??h.apiKey,n=e.computeOn==="client"?await tt(t,a,e.zoom):await et(t,a);if(e.smoothingKernelSize){const i=~~(e.smoothingKernelSize/2)*2+1,r=n.map(s=>s[2]),o=~~(i/2);for(let s=o;s<r.length-o-1;s+=1){let c=0;for(let g=0;g<i;g+=1){const m=r[s-o+g];c+=m}c/=i,n[s][2]=c}}return n}async function nt(t,e={}){if(t.type!=="LineString")throw new Error("The provided object is not a GeoJSON LineString");e.computeOn??(e.computeOn=J()?"client":"server");const a=structuredClone(t),n=await $(a.coordinates,e);return a.coordinates=n,a}async function it(t,e={}){if(t.type!=="MultiLineString")throw new Error("The provided object is not a GeoJSON MultiLineString");e.computeOn??(e.computeOn=J()?"client":"server");const a=structuredClone(t),n=a.coordinates.map(c=>c.length),i=a.coordinates.flat(),r=await $(i,e),o=[];let s=0;for(const c of n)o.push(r.slice(s,s+c)),s+=c;return a.coordinates=o,a}const rt={at,batch:$,fromLineString:nt,fromMultiLineString:it};l.ClientConfig=Q,l.ISOLanguage=X,l.Language=y,l.MapStyle=se,l.MapStyleVariant=V,l.NonISOLanguage=Z,l.ReferenceMapStyle=F,l.ServiceError=u,l.areSameLanguages=Te,l.bufferToPixelDataBrowser=Ae,l.canParsePixelData=J,l.circumferenceAtLatitude=ue,l.config=h,l.coordinates=$e,l.data=Ke,l.elevation=rt,l.expandMapStyle=oe,l.geocoding=Ue,l.geolocation=Pe,l.getAutoLanguage=O,l.getBufferToPixelDataParser=Ie,l.getLanguageInfoFromCode=M,l.getLanguageInfoFromFlag=D,l.getLanguageInfoFromKey=ee,l.getTileCache=Le,l.isLanguageInfo=j,l.mapStylePresetList=k,l.math=ve,l.misc=ce,l.staticMaps=Ge,l.styleToStyle=P,l.toLanguageInfo=H});
