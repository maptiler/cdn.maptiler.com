function V(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class w{constructor(){this._apiKey="",this._fetch=V()}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const u=new w,A={AUTO:"auto",ALBANIAN:"sq",ARABIC:"ar",ARMENIAN:"hy",AZERBAIJANI:"az",BELORUSSIAN:"be",BOSNIAN:"bs",BRETON:"br",BULGARIAN:"bg",CATALAN:"ca",CHINESE:"zh",CROATIAN:"hr",CZECH:"cs",DANISH:"da",DUTCH:"nl",ENGLISH:"en",ESPERANTO:"eo",ESTONIAN:"et",FINNISH:"fi",FRENCH:"fr",FRISIAN:"fy",GEORGIAN:"ka",GERMAN:"de",GREEK:"el",HEBREW:"he",HUNGARIAN:"hu",ICELANDIC:"is",IRISH:"ga",ITALIAN:"it",JAPANESE:"ja",KANNADA:"kn",KAZAKH:"kk",KOREAN:"ko",ROMAN_LATIN:"la",LATVIAN:"lv",LITHUANIAN:"lt",LUXEMBOURGISH:"lb",MACEDONIAN:"mk",MALTESE:"mt",NORWEGIAN:"no",POLISH:"pl",PORTUGUESE:"pt",ROMANIAN:"ro",ROMANSH:"rm",RUSSIAN:"ru",SCOTTISH_GAELIC:"gd",SERBIAN_CYRILLIC:"sr",SLOVAK:"sk",SLOVENE:"sl",SPANISH:"es",SWEDISH:"sv",THAI:"th",TURKISH:"tr",UKRAINIAN:"uk",WELSH:"cy"},G=new Set(Object.values(A));function N(){if(typeof navigator>"u")return Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];const r=Array.from(new Set(navigator.languages.map(t=>t.split("-")[0]))).filter(t=>G.has(t));return r.length?r[0]:A.ENGLISH}var F=(r,t,e)=>new Promise((a,n)=>{var s=o=>{try{c(e.next(o))}catch(l){n(l)}},i=o=>{try{c(e.throw(o))}catch(l){n(l)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(s,i);c((e=e.apply(r,t)).next())});function S(r){return F(this,arguments,function*(t,e={}){if(u.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(t).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return u.fetch(t,e)})}const y={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(y);class v extends Error{constructor(t,e=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${e}`),this.res=t}}var b=(r,t,e)=>new Promise((a,n)=>{var s=o=>{try{c(e.next(o))}catch(l){n(l)}},i=o=>{try{c(e.throw(o))}catch(l){n(l)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(s,i);c((e=e.apply(r,t)).next())});const I={400:"Query too long / Invalid parameters",403:"Key is missing, invalid or restricted"};function B(r){return b(this,arguments,function*(t,e={}){var a;if(typeof t!="string"||t.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`geocoding/${encodeURIComponent(t)}.json`,y.maptilerApiURL);if(n.searchParams.set("key",(a=e.apiKey)!=null?a:u.apiKey),"bbox"in e&&n.searchParams.set("bbox",e.bbox.join(",")),"proximity"in e&&n.searchParams.set("proximity",e.proximity.join(",")),"language"in e){const c=Array.from(new Set((Array.isArray(e.language)?e.language:[e.language]).map(o=>o===A.AUTO?N():o))).join(",");n.searchParams.set("language",c)}const s=n.toString(),i=yield S(s);if(!i.ok)throw new v(i,i.status in I?I[i.status]:"");return yield i.json()})}function M(r){return b(this,arguments,function*(t,e={}){var a;if(!Array.isArray(t)||t.length<2)throw new Error("The position must be an array of form [lng, lat].");const n=new URL(`geocoding/${t[0]},${t[1]}.json`,y.maptilerApiURL);if(n.searchParams.set("key",(a=e.apiKey)!=null?a:u.apiKey),"language"in e){const c=Array.from(new Set((Array.isArray(e.language)?e.language:[e.language]).map(o=>o===A.AUTO?N():o))).join(",");n.searchParams.set("language",c)}const s=n.toString(),i=yield S(s);if(!i.ok)throw new v(i,i.status in I?I[i.status]:"");return yield i.json()})}const W={forward:B,reverse:M,language:A};var _=(r,t,e)=>new Promise((a,n)=>{var s=o=>{try{c(e.next(o))}catch(l){n(l)}},i=o=>{try{c(e.throw(o))}catch(l){n(l)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(s,i);c((e=e.apply(r,t)).next())});const C={403:"Key is missing, invalid or restricted"};function q(){return _(this,arguments,function*(r={}){var t;const e=new URL("geolocation/ip.json",y.maptilerApiURL);e.searchParams.set("key",(t=r.apiKey)!=null?t:u.apiKey);const a=e.toString(),n=yield S(a);if(!n.ok)throw new v(n,n.status in C?C[n.status]:"");return yield n.json()})}const Y={info:q};var K=(r,t,e)=>new Promise((a,n)=>{var s=o=>{try{c(e.next(o))}catch(l){n(l)}},i=o=>{try{c(e.throw(o))}catch(l){n(l)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(s,i);c((e=e.apply(r,t)).next())});const L={403:"Key is missing, invalid or restricted"};function z(r){return K(this,arguments,function*(t,e={}){var a;if(typeof t!="string"||t.trim().length===0)throw new Error("The query must be a non-empty string");const n=new URL(`coordinates/search/${t}.json`,y.maptilerApiURL);n.searchParams.set("key",(a=e.apiKey)!=null?a:u.apiKey),"limit"in e&&n.searchParams.set("limit",e.limit.toString()),"transformations"in e&&n.searchParams.set("transformations",e.transformations.toString()),"exports"in e&&n.searchParams.set("exports",e.exports.toString());const s=n.toString(),i=yield S(s);if(!i.ok)throw new v(i,i.status in L?L[i.status]:"");return yield i.json()})}function J(r){return K(this,arguments,function*(t,e={}){var a;const n=(Array.isArray(t[0])?t:[t]).map(o=>`${o[0]},${o[1]}`).join(";"),s=new URL(`coordinates/transform/${n}.json`,y.maptilerApiURL);s.searchParams.set("key",(a=e.apiKey)!=null?a:u.apiKey),"sourceCrs"in e&&s.searchParams.set("s_srs",e.sourceCrs.toString()),"targetCrs"in e&&s.searchParams.set("t_srs",e.targetCrs.toString()),"operations"in e&&s.searchParams.set("ops",(Array.isArray(e.operations)?e.operations:[e.operations]).join("|"));const i=s.toString(),c=yield S(i);if(!c.ok)throw new v(c,c.status in L?L[c.status]:"");return yield c.json()})}const Z={search:z,transform:J};var Q=(r,t,e)=>new Promise((a,n)=>{var s=o=>{try{c(e.next(o))}catch(l){n(l)}},i=o=>{try{c(e.throw(o))}catch(l){n(l)}},c=o=>o.done?a(o.value):Promise.resolve(o.value).then(s,i);c((e=e.apply(r,t)).next())});const O={403:"Key is missing, invalid or restricted"};function X(r){return Q(this,arguments,function*(t,e={}){var a;if(typeof t!="string"||t.trim().length===0)throw new Error("The data ID must be a non-empty string");const n=new URL(`data/${encodeURIComponent(t)}/features.json`,y.maptilerApiURL);n.searchParams.set("key",(a=e.apiKey)!=null?a:u.apiKey);const s=n.toString(),i=yield S(s);if(!i.ok)throw new v(i,i.status in O?O[i.status]:"");return yield i.json()})}const ee={get:X};function x(r){const t=/^maptiler:\/\/(.*)/;let e;const a=r.trim();let n;return a.startsWith("http://")||a.startsWith("https://")?n=a:(e=t.exec(a))!==null?n=`https://api.maptiler.com/maps/${e[1]}/style.json`:n=`https://api.maptiler.com/maps/${a}/style.json`,n}class U{constructor(t,e,a,n,s,i){this.name=t,this.variantType=e,this.id=a,this.referenceStyle=n,this.description=s,this.imageURL=i}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return x(this.getId())}}class k{constructor(t,e){this.name=t,this.id=e,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const R=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Winter",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"STAGE",name:"Stage",description:"",variants:[{id:"stage",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"stage-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"stage-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function te(r){return new Proxy(r,{get(t,e,a){return t.hasVariant(e)?t.getVariant(e):e.toString().toUpperCase()===e?r.getDefaultVariant():Reflect.get(t,e,a)}})}function re(){const r={};for(let t=0;t<R.length;t+=1){const e=R[t],a=te(new k(e.name,e.referenceStyleID));for(let n=0;n<e.variants.length;n+=1){const s=e.variants[n],i=new U(s.name,s.variantType,s.id,a,s.description,s.imageURL);a.addVariant(i)}r[e.referenceStyleID]=a}return r}function D(r){if(!r)return H[R[0].referenceStyleID].getDefaultVariant().getId();if(typeof r=="string"||r instanceof String)return r.trim().toLowerCase();if(r instanceof U)return r.getId();if(r instanceof k)return r.getDefaultVariant().getId()}const H=re();function ne(r,t,e){let a=t[0],n=t[1],s=e[0]-a,i=e[1]-n;if(s!==0||i!==0){const c=((r[0]-a)*s+(r[1]-n)*i)/(s*s+i*i);c>1?(a=e[0],n=e[1]):c>0&&(a+=s*c,n+=i*c)}return s=r[0]-a,i=r[1]-n,s*s+i*i}function E(r,t,e,a,n){let s=a,i;for(let c=t+1;c<e;c++){const o=ne(r[c],r[t],r[e]);o>s&&(i=c,s=o)}s>a&&(i-t>1&&E(r,t,i,a,n),n.push(r[i]),e-i>1&&E(r,i,e,a,n))}function ae(r,t){const e=r.length-1,a=[r[0]];return E(r,0,e,t,a),a.push(r[e]),a}function ie(r,t){if(r.length<=2)return r;const e=t!==void 0?t*t:1;return ae(r,e)}function P(r,t=!0){let e=`${r[0]},${r[1]}`;return r.length===3&&t&&(e+=`,${r[2]}`),e}function $(r,t=3e3){let e=r.map(s=>s.join(",")).join("|"),a=5e-6;const n=1e-5;for(;e.length>t;)e=ie(r,a).map(s=>`${s[0]},${s[1]}`).join("|"),a+=n;return e}function se(r,t,e={}){var a,n,s,i,c;const o=D(e.style),l=e.hiDPI?"@2x":"",f=(a=e.format)!=null?a:"png";let g=~~((n=e.width)!=null?n:1024),m=~~((s=e.height)!=null?s:1024);e.hiDPI&&(g=~~(g/2),m=~~(m/2));const p=new URL(`maps/${encodeURIComponent(o)}/static/${r[0]},${r[1]},${t}/${g}x${m}${l}.${f}`,y.maptilerApiURL);if("attribution"in e&&p.searchParams.set("attribution",e.attribution.toString()),"markers"in e){let h="";const d="markerIcon"in e;d&&(h+=`icon:${e.markerIcon}|`),d&&"markerAnchor"in e&&(h+=`anchor:${e.markerAnchor}|`),d&&e.hiDPI&&(h+="scale:2|");const T=Array.isArray(e.markers[0])?e.markers:[e.markers];h+=T.map(j=>P(j,!d)).join("|"),p.searchParams.set("markers",h)}if("path"in e){let h="";if(h+=`fill:${(i=e.pathFillColor)!=null?i:"none"}|`,"pathStrokeColor"in e&&(h+=`stroke:${e.pathStrokeColor}|`),"pathWidth"in e){const d=e.pathWidth/(e.hiDPI?2:1);h+=`width:${d.toString()}|`}h+=$(e.path),p.searchParams.set("path",h)}return p.searchParams.set("key",(c=e.apiKey)!=null?c:u.apiKey),p.toString()}function oe(r,t={}){var e,a,n,s,i;const c=D(t.style),o=t.hiDPI?"@2x":"",l=(e=t.format)!=null?e:"png";let f=~~((a=t.width)!=null?a:1024),g=~~((n=t.height)!=null?n:1024);t.hiDPI&&(f=~~(f/2),g=~~(g/2));const m=new URL(`maps/${encodeURIComponent(c)}/static/${r[0]},${r[1]},${r[2]},${r[3]}/${f}x${g}${o}.${l}`,y.maptilerApiURL);if("attribution"in t&&m.searchParams.set("attribution",t.attribution.toString()),"padding"in t&&m.searchParams.set("padding",t.padding.toString()),"markers"in t){let p="";const h="markerIcon"in t;h&&(p+=`icon:${t.markerIcon}|`),h&&"markerAnchor"in t&&(p+=`anchor:${t.markerAnchor}|`),h&&t.hiDPI&&(p+="scale:2|");const d=Array.isArray(t.markers[0])?t.markers:[t.markers];p+=d.map(T=>P(T,!h)).join("|"),m.searchParams.set("markers",p)}if("path"in t){let p="";if(p+=`fill:${(s=t.pathFillColor)!=null?s:"none"}|`,"pathStrokeColor"in t&&(p+=`stroke:${t.pathStrokeColor}|`),"pathWidth"in t){const h=t.pathWidth/(t.hiDPI?2:1);p+=`width:${h.toString()}|`}p+=$(t.path),m.searchParams.set("path",p)}return m.searchParams.set("key",(i=t.apiKey)!=null?i:u.apiKey),m.toString()}function ce(r={}){var t,e,a,n,s;if(!("markers"in r)&&!("path"in r))throw new Error("Automatic static maps require markers and/or path to be created.");const i=D(r.style),c=r.hiDPI?"@2x":"",o=(t=r.format)!=null?t:"png";let l=~~((e=r.width)!=null?e:1024),f=~~((a=r.height)!=null?a:1024);r.hiDPI&&(l=~~(l/2),f=~~(f/2));const g=new URL(`maps/${encodeURIComponent(i)}/static/auto/${l}x${f}${c}.${o}`,y.maptilerApiURL);if("attribution"in r&&g.searchParams.set("attribution",r.attribution.toString()),"padding"in r&&g.searchParams.set("padding",r.padding.toString()),"markers"in r){let m="";const p="markerIcon"in r;p&&(m+=`icon:${r.markerIcon}|`),p&&"markerAnchor"in r&&(m+=`anchor:${r.markerAnchor}|`),p&&r.hiDPI&&(m+="scale:2|");const h=Array.isArray(r.markers[0])?r.markers:[r.markers];m+=h.map(d=>P(d,!p)).join("|"),g.searchParams.set("markers",m)}if("path"in r){let m="";if(m+=`fill:${(n=r.pathFillColor)!=null?n:"none"}|`,"pathStrokeColor"in r&&(m+=`stroke:${r.pathStrokeColor}|`),"pathWidth"in r){const p=r.pathWidth/(r.hiDPI?2:1);m+=`width:${p.toString()}|`}m+=$(r.path),g.searchParams.set("path",m)}return g.searchParams.set("key",(s=r.apiKey)!=null?s:u.apiKey),g.toString()}const le={centered:se,bounded:oe,automatic:ce};export{w as ClientConfig,A as LanguageGeocoding,H as MapStyle,U as MapStyleVariant,k as ReferenceMapStyle,v as ServiceError,u as config,Z as coordinates,ee as data,x as expandMapStyle,W as geocoding,Y as geolocation,R as mapStylePresetList,le as staticMaps};
